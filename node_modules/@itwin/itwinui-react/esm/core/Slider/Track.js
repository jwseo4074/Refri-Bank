var __spreadArray = (this && this.__spreadArray) || function (to, from) {
    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)
        to[j] = from[i];
    return to;
};
/*---------------------------------------------------------------------------------------------
 * Copyright (c) Bentley Systems, Incorporated. All rights reserved.
 * See LICENSE.md in the project root for license terms and full copyright notice.
 *--------------------------------------------------------------------------------------------*/
import React from 'react';
function shouldDisplaySegment(segmentIndex, mode) {
    if ('odd-segments' === mode && 0 === (segmentIndex + 1) % 2) {
        return true;
    }
    else if ('even-segments' === mode && 0 === segmentIndex % 2) {
        return true;
    }
    return false;
}
function generateSegments(values, min, max) {
    var segments = [];
    var lastValue = min;
    for (var i = 0; i < values.length; i++) {
        segments.push({ left: lastValue, right: values[i] });
        lastValue = values[i];
    }
    segments.push({ left: lastValue, right: max });
    return segments;
}
/**
 * Track displays color segments above Rail. Which, if any, segments that are
 * colorized is based on `trackDisplayMode`.
 */
export var Track = function (props) {
    var trackDisplayMode = props.trackDisplayMode, sliderMin = props.sliderMin, sliderMax = props.sliderMax, values = props.values;
    var _a = React.useState(__spreadArray([], values).sort(function (a, b) { return a - b; })), currentValues = _a[0], setCurrentValues = _a[1];
    React.useEffect(function () {
        var newValues = __spreadArray([], values);
        newValues.sort(function (a, b) { return a - b; });
        setCurrentValues(newValues);
    }, [values]);
    var segments = React.useMemo(function () { return generateSegments(currentValues, sliderMin, sliderMax); }, [currentValues, sliderMin, sliderMax]);
    return (React.createElement(React.Fragment, null, 'none' !== trackDisplayMode &&
        segments.map(function (segment, index) {
            var leftPercent = (100.0 * (segment.left - sliderMin)) / (sliderMax - sliderMin);
            var rightPercent = (100.0 * (segment.right - sliderMin)) / (sliderMax - sliderMin);
            rightPercent = 100.0 - rightPercent;
            return (React.createElement(React.Fragment, { key: index }, shouldDisplaySegment(index, trackDisplayMode) ? (React.createElement("div", { className: 'iui-slider-track', style: { left: leftPercent + "%", right: rightPercent + "%" } })) : null));
        })));
};
