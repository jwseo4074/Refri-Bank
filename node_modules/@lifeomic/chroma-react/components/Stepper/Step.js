"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
var clsx_1 = __importDefault(require("clsx"));
var React = __importStar(require("react"));
var styles_1 = require("../../styles");
var Box_1 = require("../Box");
var Pill_1 = require("../Pill");
var Text_1 = require("../Text");
exports.StepStylesKey = 'ChromaStep';
exports.useStyles = styles_1.makeStyles(function (theme) { return ({
    buttonRoot: {
        alignItems: 'center',
        backgroundColor: 'transparent',
        border: 'none',
        cursor: 'pointer',
        display: 'flex',
        flexDirection: 'column',
        fontFamily: theme.typography.fontFamily,
        minWidth: theme.pxToRem(110),
        paddingBottom: theme.spacing(1.5),
        '&:focus': {
            outline: 'none',
        },
        '&:hover': {
            '&>div': {
                transform: 'scale(1.1)',
                transition: '0.25s cubic-bezier(0.2, 0.8, 0.2, 1)',
            },
        },
    },
    divRoot: {
        minWidth: theme.pxToRem(110),
        padding: theme.spacing(0, 0.875, 1.5, 0.875),
    },
    activeRoot: {
        borderBottom: "2px solid " + theme.palette.primary.main,
        paddingBottom: theme.spacing(1.25),
    },
    completedRoot: {},
    iconContainer: {
        width: theme.pxToRem(56),
        height: theme.pxToRem(56),
        minWidth: theme.pxToRem(56),
        minHeight: theme.pxToRem(56),
        borderRadius: theme.pxToRem(9999),
        backgroundColor: theme.palette.common.white,
        border: "2px solid " + theme.palette.black[200],
        transition: 'background-color .5s ease, border .5s ease, box-shadow .5s ease',
        '@media screen and (max-width: 850px)': {
            width: theme.pxToRem(40),
            height: theme.pxToRem(40),
            minWidth: theme.pxToRem(40),
            minHeight: theme.pxToRem(40),
        },
    },
    completed: {
        border: "2px solid " + theme.palette.common.white,
        boxShadow: theme.boxShadows.table,
    },
    active: {
        backgroundColor: theme.palette.primary[50],
        border: "2px solid " + theme.palette.primary.main,
        boxShadow: theme.boxShadows.table,
    },
    icon: {
        color: theme.palette.black[500],
        transition: 'color .5s ease',
    },
    activeIcon: {
        color: theme.palette.primary.main,
    },
    completedIcon: {
        color: theme.palette.black[500],
        opacity: 0.75,
    },
    title: {
        color: theme.palette.black[500],
        transition: 'color .5s ease',
        '&:first-of-type': {
            marginTop: theme.spacing(1.5),
        },
        '@media screen and (max-width: 850px)': {
            fontSize: theme.pxToRem(12),
        },
    },
    activeTitle: {
        color: theme.palette.primary.main,
    },
    pillSubTitle: {
        transition: 'background .5s ease',
        marginTop: theme.spacing(0.5),
    },
    completedPillSubTitle: {
        background: theme.palette.black[500],
        marginTop: theme.spacing(0.5),
        opacity: 0.75,
    },
    disabled: {
        cursor: 'not-allowed',
        '&:hover': {
            '&>div': {
                transform: 'none',
            },
        },
    },
}); }, { name: exports.StepStylesKey });
exports.Step = function (_a) {
    var active = _a.active, as = _a.as, className = _a.className, completed = _a.completed, disabled = _a.disabled, Icon = _a.icon, index = _a.index, onClick = _a.onClick, subTitle = _a.subTitle, subTitlePillLabel = _a.subTitlePillLabel, title = _a.title, rootProps = __rest(_a, ["active", "as", "className", "completed", "disabled", "icon", "index", "onClick", "subTitle", "subTitlePillLabel", "title"]);
    var classes = exports.useStyles({});
    var handleClick = function () {
        onClick === null || onClick === void 0 ? void 0 : onClick(index);
    };
    var content = (React.createElement(React.Fragment, null,
        React.createElement(Box_1.Box, { align: "center", className: clsx_1.default(classes.iconContainer, active && classes.active, completed && classes.completed), justify: "center" }, Icon ? (React.createElement(Icon, { "aria-hidden": "true", className: clsx_1.default(classes.icon, active && classes.activeIcon, completed && classes.completedIcon), role: "img" })) : (React.createElement(Text_1.Text, { "aria-hidden": "true", size: "headline", className: clsx_1.default(classes.icon, active && classes.activeIcon, completed && classes.completedIcon) }, (index || 0) + 1))),
        React.createElement(Text_1.Text, { className: clsx_1.default(classes.title, active && classes.activeTitle), size: "subbody" }, title),
        subTitle && !subTitlePillLabel && (React.createElement(Text_1.Text, { className: clsx_1.default(classes.title, active && classes.activeTitle), size: "caption" }, subTitle)),
        subTitlePillLabel && !subTitle && (React.createElement(Pill_1.Pill, { className: clsx_1.default(classes.pillSubTitle, completed && classes.completedPillSubTitle), color: active ? 'primary' : 'default', label: subTitlePillLabel }))));
    if (as === 'button') {
        return (React.createElement("button", __assign({ className: clsx_1.default(classes.buttonRoot, active && classes.activeRoot, completed && classes.completedRoot, disabled && classes.disabled, className), disabled: disabled, onClick: handleClick }, rootProps), content));
    }
    else {
        return (React.createElement(Box_1.Box, __assign({ align: "center", className: clsx_1.default(classes.divRoot, active && classes.activeRoot, completed && classes.completedRoot, className), direction: "column" }, rootProps), content));
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3RlcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1N0ZXBwZXIvU3RlcC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDhDQUF3QjtBQUN4QiwyQ0FBK0I7QUFDL0IsdUNBQTBDO0FBRTFDLDhCQUE2QjtBQUM3QixnQ0FBK0I7QUFDL0IsZ0NBQStCO0FBRWxCLFFBQUEsYUFBYSxHQUFHLFlBQVksQ0FBQztBQUU3QixRQUFBLFNBQVMsR0FBRyxtQkFBVSxDQUNqQyxVQUFDLEtBQUssSUFBSyxPQUFBLENBQUM7SUFDVixVQUFVLEVBQUU7UUFDVixVQUFVLEVBQUUsUUFBUTtRQUNwQixlQUFlLEVBQUUsYUFBYTtRQUM5QixNQUFNLEVBQUUsTUFBTTtRQUNkLE1BQU0sRUFBRSxTQUFTO1FBQ2pCLE9BQU8sRUFBRSxNQUFNO1FBQ2YsYUFBYSxFQUFFLFFBQVE7UUFDdkIsVUFBVSxFQUFFLEtBQUssQ0FBQyxVQUFVLENBQUMsVUFBVTtRQUN2QyxRQUFRLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7UUFDNUIsYUFBYSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO1FBRWpDLFNBQVMsRUFBRTtZQUNULE9BQU8sRUFBRSxNQUFNO1NBQ2hCO1FBRUQsU0FBUyxFQUFFO1lBQ1QsT0FBTyxFQUFFO2dCQUNQLFNBQVMsRUFBRSxZQUFZO2dCQUN2QixVQUFVLEVBQUUsc0NBQXNDO2FBQ25EO1NBQ0Y7S0FDRjtJQUNELE9BQU8sRUFBRTtRQUNQLFFBQVEsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztRQUM1QixPQUFPLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxLQUFLLENBQUM7S0FDN0M7SUFDRCxVQUFVLEVBQUU7UUFDVixZQUFZLEVBQUUsZUFBYSxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFNO1FBQ3ZELGFBQWEsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztLQUNuQztJQUNELGFBQWEsRUFBRSxFQUFFO0lBQ2pCLGFBQWEsRUFBRTtRQUNiLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUN4QixNQUFNLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDekIsUUFBUSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQzNCLFNBQVMsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUM1QixZQUFZLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7UUFDakMsZUFBZSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUs7UUFDM0MsTUFBTSxFQUFFLGVBQWEsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFHO1FBQy9DLFVBQVUsRUFDUixpRUFBaUU7UUFFbkUsc0NBQXNDLEVBQUU7WUFDdEMsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1lBQ3hCLE1BQU0sRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztZQUN6QixRQUFRLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7WUFDM0IsU0FBUyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1NBQzdCO0tBQ0Y7SUFDRCxTQUFTLEVBQUU7UUFDVCxNQUFNLEVBQUUsZUFBYSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFPO1FBQ2pELFNBQVMsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLEtBQUs7S0FDbEM7SUFDRCxNQUFNLEVBQUU7UUFDTixlQUFlLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQzFDLE1BQU0sRUFBRSxlQUFhLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQU07UUFDakQsU0FBUyxFQUFFLEtBQUssQ0FBQyxVQUFVLENBQUMsS0FBSztLQUNsQztJQUNELElBQUksRUFBRTtRQUNKLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7UUFDL0IsVUFBVSxFQUFFLGdCQUFnQjtLQUM3QjtJQUNELFVBQVUsRUFBRTtRQUNWLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJO0tBQ2xDO0lBQ0QsYUFBYSxFQUFFO1FBQ2IsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztRQUMvQixPQUFPLEVBQUUsSUFBSTtLQUNkO0lBQ0QsS0FBSyxFQUFFO1FBQ0wsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztRQUMvQixVQUFVLEVBQUUsZ0JBQWdCO1FBRTVCLGlCQUFpQixFQUFFO1lBQ2pCLFNBQVMsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztTQUM5QjtRQUVELHNDQUFzQyxFQUFFO1lBQ3RDLFFBQVEsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztTQUM1QjtLQUNGO0lBQ0QsV0FBVyxFQUFFO1FBQ1gsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUk7S0FDbEM7SUFDRCxZQUFZLEVBQUU7UUFDWixVQUFVLEVBQUUscUJBQXFCO1FBQ2pDLFNBQVMsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztLQUM5QjtJQUNELHFCQUFxQixFQUFFO1FBQ3JCLFVBQVUsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7UUFDcEMsU0FBUyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO1FBQzdCLE9BQU8sRUFBRSxJQUFJO0tBQ2Q7SUFDRCxRQUFRLEVBQUU7UUFDUixNQUFNLEVBQUUsYUFBYTtRQUVyQixTQUFTLEVBQUU7WUFDVCxPQUFPLEVBQUU7Z0JBQ1AsU0FBUyxFQUFFLE1BQU07YUFDbEI7U0FDRjtLQUNGO0NBQ0YsQ0FBQyxFQXZHUyxDQXVHVCxFQUNGLEVBQUUsSUFBSSxFQUFFLHFCQUFhLEVBQUUsQ0FDeEIsQ0FBQztBQWtCVyxRQUFBLElBQUksR0FBd0IsVUFBQyxFQWF6QztJQVpDLElBQUEsa0JBQU0sRUFDTixVQUFFLEVBQ0Ysd0JBQVMsRUFDVCx3QkFBUyxFQUNULHNCQUFRLEVBQ1IsY0FBVSxFQUNWLGdCQUFLLEVBQ0wsb0JBQU8sRUFDUCxzQkFBUSxFQUNSLHdDQUFpQixFQUNqQixnQkFBSyxFQUNMLG9KQUFZO0lBRVosSUFBTSxPQUFPLEdBQUcsaUJBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUU5QixJQUFNLFdBQVcsR0FBRztRQUNsQixPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUcsS0FBSyxFQUFFO0lBQ25CLENBQUMsQ0FBQztJQUVGLElBQU0sT0FBTyxHQUFHLENBQ2Q7UUFDRSxvQkFBQyxTQUFHLElBQ0YsS0FBSyxFQUFDLFFBQVEsRUFDZCxTQUFTLEVBQUUsY0FBSSxDQUNiLE9BQU8sQ0FBQyxhQUFhLEVBQ3JCLE1BQU0sSUFBSSxPQUFPLENBQUMsTUFBTSxFQUN4QixTQUFTLElBQUksT0FBTyxDQUFDLFNBQVMsQ0FDL0IsRUFDRCxPQUFPLEVBQUMsUUFBUSxJQUVmLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FDTixvQkFBQyxJQUFJLG1CQUNTLE1BQU0sRUFDbEIsU0FBUyxFQUFFLGNBQUksQ0FDYixPQUFPLENBQUMsSUFBSSxFQUNaLE1BQU0sSUFBSSxPQUFPLENBQUMsVUFBVSxFQUM1QixTQUFTLElBQUksT0FBTyxDQUFDLGFBQWEsQ0FDbkMsRUFDRCxJQUFJLEVBQUMsS0FBSyxHQUNWLENBQ0gsQ0FBQyxDQUFDLENBQUMsQ0FDRixvQkFBQyxXQUFJLG1CQUNTLE1BQU0sRUFDbEIsSUFBSSxFQUFDLFVBQVUsRUFDZixTQUFTLEVBQUUsY0FBSSxDQUNiLE9BQU8sQ0FBQyxJQUFJLEVBQ1osTUFBTSxJQUFJLE9BQU8sQ0FBQyxVQUFVLEVBQzVCLFNBQVMsSUFBSSxPQUFPLENBQUMsYUFBYSxDQUNuQyxJQUVBLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FDWixDQUNSLENBQ0c7UUFDTixvQkFBQyxXQUFJLElBQ0gsU0FBUyxFQUFFLGNBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLE1BQU0sSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLEVBQzdELElBQUksRUFBQyxTQUFTLElBRWIsS0FBSyxDQUNEO1FBQ04sUUFBUSxJQUFJLENBQUMsaUJBQWlCLElBQUksQ0FDakMsb0JBQUMsV0FBSSxJQUNILFNBQVMsRUFBRSxjQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxNQUFNLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxFQUM3RCxJQUFJLEVBQUMsU0FBUyxJQUViLFFBQVEsQ0FDSixDQUNSO1FBQ0EsaUJBQWlCLElBQUksQ0FBQyxRQUFRLElBQUksQ0FDakMsb0JBQUMsV0FBSSxJQUNILFNBQVMsRUFBRSxjQUFJLENBQ2IsT0FBTyxDQUFDLFlBQVksRUFDcEIsU0FBUyxJQUFJLE9BQU8sQ0FBQyxxQkFBcUIsQ0FDM0MsRUFDRCxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDckMsS0FBSyxFQUFFLGlCQUFpQixHQUN4QixDQUNILENBQ0EsQ0FDSixDQUFDO0lBRUYsSUFBSSxFQUFFLEtBQUssUUFBUSxFQUFFO1FBQ25CLE9BQU8sQ0FDTCx5Q0FDRSxTQUFTLEVBQUUsY0FBSSxDQUNiLE9BQU8sQ0FBQyxVQUFVLEVBQ2xCLE1BQU0sSUFBSSxPQUFPLENBQUMsVUFBVSxFQUM1QixTQUFTLElBQUksT0FBTyxDQUFDLGFBQWEsRUFDbEMsUUFBUSxJQUFJLE9BQU8sQ0FBQyxRQUFRLEVBQzVCLFNBQVMsQ0FDVixFQUNELFFBQVEsRUFBRSxRQUFRLEVBQ2xCLE9BQU8sRUFBRSxXQUFXLElBQ2hCLFNBQVMsR0FFWixPQUFPLENBQ0QsQ0FDVixDQUFDO0tBQ0g7U0FBTTtRQUNMLE9BQU8sQ0FDTCxvQkFBQyxTQUFHLGFBQ0YsS0FBSyxFQUFDLFFBQVEsRUFDZCxTQUFTLEVBQUUsY0FBSSxDQUNiLE9BQU8sQ0FBQyxPQUFPLEVBQ2YsTUFBTSxJQUFJLE9BQU8sQ0FBQyxVQUFVLEVBQzVCLFNBQVMsSUFBSSxPQUFPLENBQUMsYUFBYSxFQUNsQyxTQUFTLENBQ1YsRUFDRCxTQUFTLEVBQUMsUUFBUSxJQUNkLFNBQVMsR0FFWixPQUFPLENBQ0osQ0FDUCxDQUFDO0tBQ0g7QUFDSCxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2xzeCBmcm9tICdjbHN4JztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG1ha2VTdHlsZXMgfSBmcm9tICcuLi8uLi9zdHlsZXMnO1xuaW1wb3J0IHsgR2V0Q2xhc3NlcyB9IGZyb20gJy4uLy4uL3R5cGVVdGlscyc7XG5pbXBvcnQgeyBCb3ggfSBmcm9tICcuLi9Cb3gnO1xuaW1wb3J0IHsgUGlsbCB9IGZyb20gJy4uL1BpbGwnO1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL1RleHQnO1xuXG5leHBvcnQgY29uc3QgU3RlcFN0eWxlc0tleSA9ICdDaHJvbWFTdGVwJztcblxuZXhwb3J0IGNvbnN0IHVzZVN0eWxlcyA9IG1ha2VTdHlsZXMoXG4gICh0aGVtZSkgPT4gKHtcbiAgICBidXR0b25Sb290OiB7XG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcbiAgICAgIGZvbnRGYW1pbHk6IHRoZW1lLnR5cG9ncmFwaHkuZm9udEZhbWlseSxcbiAgICAgIG1pbldpZHRoOiB0aGVtZS5weFRvUmVtKDExMCksXG4gICAgICBwYWRkaW5nQm90dG9tOiB0aGVtZS5zcGFjaW5nKDEuNSksXG5cbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICB9LFxuXG4gICAgICAnJjpob3Zlcic6IHtcbiAgICAgICAgJyY+ZGl2Jzoge1xuICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDEuMSknLFxuICAgICAgICAgIHRyYW5zaXRpb246ICcwLjI1cyBjdWJpYy1iZXppZXIoMC4yLCAwLjgsIDAuMiwgMSknLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIGRpdlJvb3Q6IHtcbiAgICAgIG1pbldpZHRoOiB0aGVtZS5weFRvUmVtKDExMCksXG4gICAgICBwYWRkaW5nOiB0aGVtZS5zcGFjaW5nKDAsIDAuODc1LCAxLjUsIDAuODc1KSxcbiAgICB9LFxuICAgIGFjdGl2ZVJvb3Q6IHtcbiAgICAgIGJvcmRlckJvdHRvbTogYDJweCBzb2xpZCAke3RoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWlufWAsXG4gICAgICBwYWRkaW5nQm90dG9tOiB0aGVtZS5zcGFjaW5nKDEuMjUpLFxuICAgIH0sXG4gICAgY29tcGxldGVkUm9vdDoge30sXG4gICAgaWNvbkNvbnRhaW5lcjoge1xuICAgICAgd2lkdGg6IHRoZW1lLnB4VG9SZW0oNTYpLFxuICAgICAgaGVpZ2h0OiB0aGVtZS5weFRvUmVtKDU2KSxcbiAgICAgIG1pbldpZHRoOiB0aGVtZS5weFRvUmVtKDU2KSxcbiAgICAgIG1pbkhlaWdodDogdGhlbWUucHhUb1JlbSg1NiksXG4gICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnB4VG9SZW0oOTk5OSksXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgYm9yZGVyOiBgMnB4IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5ibGFja1syMDBdfWAsXG4gICAgICB0cmFuc2l0aW9uOlxuICAgICAgICAnYmFja2dyb3VuZC1jb2xvciAuNXMgZWFzZSwgYm9yZGVyIC41cyBlYXNlLCBib3gtc2hhZG93IC41cyBlYXNlJyxcblxuICAgICAgJ0BtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDg1MHB4KSc6IHtcbiAgICAgICAgd2lkdGg6IHRoZW1lLnB4VG9SZW0oNDApLFxuICAgICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oNDApLFxuICAgICAgICBtaW5XaWR0aDogdGhlbWUucHhUb1JlbSg0MCksXG4gICAgICAgIG1pbkhlaWdodDogdGhlbWUucHhUb1JlbSg0MCksXG4gICAgICB9LFxuICAgIH0sXG4gICAgY29tcGxldGVkOiB7XG4gICAgICBib3JkZXI6IGAycHggc29saWQgJHt0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZX1gLFxuICAgICAgYm94U2hhZG93OiB0aGVtZS5ib3hTaGFkb3dzLnRhYmxlLFxuICAgIH0sXG4gICAgYWN0aXZlOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLnBhbGV0dGUucHJpbWFyeVs1MF0sXG4gICAgICBib3JkZXI6IGAycHggc29saWQgJHt0aGVtZS5wYWxldHRlLnByaW1hcnkubWFpbn1gLFxuICAgICAgYm94U2hhZG93OiB0aGVtZS5ib3hTaGFkb3dzLnRhYmxlLFxuICAgIH0sXG4gICAgaWNvbjoge1xuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuYmxhY2tbNTAwXSxcbiAgICAgIHRyYW5zaXRpb246ICdjb2xvciAuNXMgZWFzZScsXG4gICAgfSxcbiAgICBhY3RpdmVJY29uOiB7XG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5wcmltYXJ5Lm1haW4sXG4gICAgfSxcbiAgICBjb21wbGV0ZWRJY29uOiB7XG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5ibGFja1s1MDBdLFxuICAgICAgb3BhY2l0eTogMC43NSxcbiAgICB9LFxuICAgIHRpdGxlOiB7XG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5ibGFja1s1MDBdLFxuICAgICAgdHJhbnNpdGlvbjogJ2NvbG9yIC41cyBlYXNlJyxcblxuICAgICAgJyY6Zmlyc3Qtb2YtdHlwZSc6IHtcbiAgICAgICAgbWFyZ2luVG9wOiB0aGVtZS5zcGFjaW5nKDEuNSksXG4gICAgICB9LFxuXG4gICAgICAnQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogODUwcHgpJzoge1xuICAgICAgICBmb250U2l6ZTogdGhlbWUucHhUb1JlbSgxMiksXG4gICAgICB9LFxuICAgIH0sXG4gICAgYWN0aXZlVGl0bGU6IHtcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnByaW1hcnkubWFpbixcbiAgICB9LFxuICAgIHBpbGxTdWJUaXRsZToge1xuICAgICAgdHJhbnNpdGlvbjogJ2JhY2tncm91bmQgLjVzIGVhc2UnLFxuICAgICAgbWFyZ2luVG9wOiB0aGVtZS5zcGFjaW5nKDAuNSksXG4gICAgfSxcbiAgICBjb21wbGV0ZWRQaWxsU3ViVGl0bGU6IHtcbiAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUuYmxhY2tbNTAwXSxcbiAgICAgIG1hcmdpblRvcDogdGhlbWUuc3BhY2luZygwLjUpLFxuICAgICAgb3BhY2l0eTogMC43NSxcbiAgICB9LFxuICAgIGRpc2FibGVkOiB7XG4gICAgICBjdXJzb3I6ICdub3QtYWxsb3dlZCcsXG5cbiAgICAgICcmOmhvdmVyJzoge1xuICAgICAgICAnJj5kaXYnOiB7XG4gICAgICAgICAgdHJhbnNmb3JtOiAnbm9uZScsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pLFxuICB7IG5hbWU6IFN0ZXBTdHlsZXNLZXkgfVxuKTtcblxuZXhwb3J0IHR5cGUgU3RlcENsYXNzZXMgPSBHZXRDbGFzc2VzPHR5cGVvZiB1c2VTdHlsZXM+O1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0ZXBQcm9wcyB7XG4gIGFjdGl2ZT86IGJvb2xlYW47XG4gIGFzPzogJ2J1dHRvbicgfCAnZGl2JztcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBjb21wbGV0ZWQ/OiBib29sZWFuO1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIGljb24/OiBSZWFjdC5Db21wb25lbnRUeXBlPFJlYWN0LlNWR1Byb3BzPFNWR1NWR0VsZW1lbnQ+PjtcbiAgaW5kZXg/OiBudW1iZXI7XG4gIG9uQ2xpY2s/OiAoaW5kZXg6IG51bWJlciB8IHVuZGVmaW5lZCkgPT4gdm9pZDtcbiAgc3ViVGl0bGU/OiBzdHJpbmc7XG4gIHN1YlRpdGxlUGlsbExhYmVsPzogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgU3RlcDogUmVhY3QuRkM8U3RlcFByb3BzPiA9ICh7XG4gIGFjdGl2ZSxcbiAgYXMsXG4gIGNsYXNzTmFtZSxcbiAgY29tcGxldGVkLFxuICBkaXNhYmxlZCxcbiAgaWNvbjogSWNvbixcbiAgaW5kZXgsXG4gIG9uQ2xpY2ssXG4gIHN1YlRpdGxlLFxuICBzdWJUaXRsZVBpbGxMYWJlbCxcbiAgdGl0bGUsXG4gIC4uLnJvb3RQcm9wc1xufSkgPT4ge1xuICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKHt9KTtcblxuICBjb25zdCBoYW5kbGVDbGljayA9ICgpID0+IHtcbiAgICBvbkNsaWNrPy4oaW5kZXgpO1xuICB9O1xuXG4gIGNvbnN0IGNvbnRlbnQgPSAoXG4gICAgPD5cbiAgICAgIDxCb3hcbiAgICAgICAgYWxpZ249XCJjZW50ZXJcIlxuICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgY2xhc3Nlcy5pY29uQ29udGFpbmVyLFxuICAgICAgICAgIGFjdGl2ZSAmJiBjbGFzc2VzLmFjdGl2ZSxcbiAgICAgICAgICBjb21wbGV0ZWQgJiYgY2xhc3Nlcy5jb21wbGV0ZWRcbiAgICAgICAgKX1cbiAgICAgICAganVzdGlmeT1cImNlbnRlclwiXG4gICAgICA+XG4gICAgICAgIHtJY29uID8gKFxuICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KFxuICAgICAgICAgICAgICBjbGFzc2VzLmljb24sXG4gICAgICAgICAgICAgIGFjdGl2ZSAmJiBjbGFzc2VzLmFjdGl2ZUljb24sXG4gICAgICAgICAgICAgIGNvbXBsZXRlZCAmJiBjbGFzc2VzLmNvbXBsZXRlZEljb25cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICByb2xlPVwiaW1nXCJcbiAgICAgICAgICAvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxUZXh0XG4gICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICAgICAgc2l6ZT1cImhlYWRsaW5lXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgICAgY2xhc3Nlcy5pY29uLFxuICAgICAgICAgICAgICBhY3RpdmUgJiYgY2xhc3Nlcy5hY3RpdmVJY29uLFxuICAgICAgICAgICAgICBjb21wbGV0ZWQgJiYgY2xhc3Nlcy5jb21wbGV0ZWRJY29uXG4gICAgICAgICAgICApfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHsoaW5kZXggfHwgMCkgKyAxfVxuICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgKX1cbiAgICAgIDwvQm94PlxuICAgICAgPFRleHRcbiAgICAgICAgY2xhc3NOYW1lPXtjbHN4KGNsYXNzZXMudGl0bGUsIGFjdGl2ZSAmJiBjbGFzc2VzLmFjdGl2ZVRpdGxlKX1cbiAgICAgICAgc2l6ZT1cInN1YmJvZHlcIlxuICAgICAgPlxuICAgICAgICB7dGl0bGV9XG4gICAgICA8L1RleHQ+XG4gICAgICB7c3ViVGl0bGUgJiYgIXN1YlRpdGxlUGlsbExhYmVsICYmIChcbiAgICAgICAgPFRleHRcbiAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goY2xhc3Nlcy50aXRsZSwgYWN0aXZlICYmIGNsYXNzZXMuYWN0aXZlVGl0bGUpfVxuICAgICAgICAgIHNpemU9XCJjYXB0aW9uXCJcbiAgICAgICAgPlxuICAgICAgICAgIHtzdWJUaXRsZX1cbiAgICAgICAgPC9UZXh0PlxuICAgICAgKX1cbiAgICAgIHtzdWJUaXRsZVBpbGxMYWJlbCAmJiAhc3ViVGl0bGUgJiYgKFxuICAgICAgICA8UGlsbFxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgIGNsYXNzZXMucGlsbFN1YlRpdGxlLFxuICAgICAgICAgICAgY29tcGxldGVkICYmIGNsYXNzZXMuY29tcGxldGVkUGlsbFN1YlRpdGxlXG4gICAgICAgICAgKX1cbiAgICAgICAgICBjb2xvcj17YWN0aXZlID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnfVxuICAgICAgICAgIGxhYmVsPXtzdWJUaXRsZVBpbGxMYWJlbH1cbiAgICAgICAgLz5cbiAgICAgICl9XG4gICAgPC8+XG4gICk7XG5cbiAgaWYgKGFzID09PSAnYnV0dG9uJykge1xuICAgIHJldHVybiAoXG4gICAgICA8YnV0dG9uXG4gICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICBjbGFzc2VzLmJ1dHRvblJvb3QsXG4gICAgICAgICAgYWN0aXZlICYmIGNsYXNzZXMuYWN0aXZlUm9vdCxcbiAgICAgICAgICBjb21wbGV0ZWQgJiYgY2xhc3Nlcy5jb21wbGV0ZWRSb290LFxuICAgICAgICAgIGRpc2FibGVkICYmIGNsYXNzZXMuZGlzYWJsZWQsXG4gICAgICAgICAgY2xhc3NOYW1lXG4gICAgICAgICl9XG4gICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2t9XG4gICAgICAgIHsuLi5yb290UHJvcHN9XG4gICAgICA+XG4gICAgICAgIHtjb250ZW50fVxuICAgICAgPC9idXR0b24+XG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEJveFxuICAgICAgICBhbGlnbj1cImNlbnRlclwiXG4gICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICBjbGFzc2VzLmRpdlJvb3QsXG4gICAgICAgICAgYWN0aXZlICYmIGNsYXNzZXMuYWN0aXZlUm9vdCxcbiAgICAgICAgICBjb21wbGV0ZWQgJiYgY2xhc3Nlcy5jb21wbGV0ZWRSb290LFxuICAgICAgICAgIGNsYXNzTmFtZVxuICAgICAgICApfVxuICAgICAgICBkaXJlY3Rpb249XCJjb2x1bW5cIlxuICAgICAgICB7Li4ucm9vdFByb3BzfVxuICAgICAgPlxuICAgICAgICB7Y29udGVudH1cbiAgICAgIDwvQm94PlxuICAgICk7XG4gIH1cbn07XG4iXX0=