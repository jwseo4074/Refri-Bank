"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
var clsx_1 = __importDefault(require("clsx"));
var React = __importStar(require("react"));
var styles_1 = require("../../styles");
var forms_1 = require("../_private/forms");
var UniqueId_1 = require("../_private/UniqueId");
var Text_1 = require("../Text");
var useRadioGroup_1 = require("./useRadioGroup");
exports.RadioStylesKey = 'ChromaRadio';
exports.useStyles = styles_1.makeStyles(function (theme) { return ({
    root: {
        display: 'flex',
        '& > input[type="radio"]::after': {
            opacity: 0,
            transition: 'transform .3s cubic-bezier(.2, .85, .32, 1.2), opacity .2s',
        },
        '& > input[type="radio"]:checked::after': {
            opacity: 1,
        },
    },
    input: {
        background: 'rgba(132, 137, 166, 0.15)',
        border: '1px solid transparent',
        borderRadius: '50%',
        cursor: 'pointer',
        display: 'inline-block',
        height: theme.pxToRem(21),
        margin: 0,
        MozAppearance: 'none',
        outline: 'none',
        position: 'relative',
        transition: 'background .3s, border-color .3s, box-shadow .2s',
        verticalAlign: 'top',
        WebkitAppearance: 'none',
        width: theme.pxToRem(21),
        '&:after': {
            background: theme.palette.common.white,
            borderRadius: '50%',
            content: '" "',
            display: 'block',
            position: 'absolute',
            top: 0,
            left: 0,
            transform: 'scale(0.5)',
            height: theme.pxToRem(19),
            width: theme.pxToRem(19),
        },
        '&:checked': {
            background: theme.palette.primary.main,
        },
        '&:disabled': {
            cursor: 'not-allowed',
            opacity: 0.625,
            // Ensure the label sibling cannot be clicked as well
            '& + label': {
                cursor: 'not-allowed',
            },
        },
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(0, 150, 225, .3)',
        },
        '&:hover:not(:disabled):not(:checked)': {
            border: "1px solid " + theme.palette.primary[700],
        },
    },
    inputInverse: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        '&:checked': {
            backgroundColor: 'rgba(230, 231, 237, 0.1)',
            border: "1px solid rgba(230, 231, 237, 0.55)",
        },
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(255, 255, 255, .3)',
        },
        '&:hover:not(:disabled):not(:checked)': {
            border: "1px solid " + theme.palette.common.white,
        },
    },
    labelContainer: {
        flex: 1,
        marginLeft: theme.spacing(1),
    },
    label: {
        cursor: 'pointer',
        display: 'inline-block',
        marginBottom: 0,
        marginTop: theme.spacing(0.25),
        verticalAlign: 'top',
        '& p': {
            lineHeight: 1.25,
        },
    },
    labelInverse: {
        color: theme.palette.common.white,
    },
}); }, { name: exports.RadioStylesKey });
exports.Radio = React.forwardRef(function (_a, ref) {
    var _b;
    var className = _a.className, children = _a.children, _c = _a.checked, checked = _c === void 0 ? false : _c, color = _a.color, helpMessage = _a.helpMessage, id = _a.id, label = _a.label, value = _a.value, rootProps = __rest(_a, ["className", "children", "checked", "color", "helpMessage", "id", "label", "value"]);
    var classes = exports.useStyles({});
    var uniqueId = React.useState(function () { return id || UniqueId_1.generateUniqueId('radio-'); })[0];
    var _d = useRadioGroup_1.useRadioGroup(), colorFromContext = _d.color, nameFromContext = _d.name, valueFromContext = _d.value, onChangeFromContext = _d.onChange;
    var handleChange = function (e) {
        onChangeFromContext && onChangeFromContext(e);
    };
    return (React.createElement("div", { className: clsx_1.default(classes.root, className) },
        React.createElement("input", __assign({ "aria-describedby": forms_1.buildDescribedBy({
                hasHelpMessage: !!helpMessage,
                uniqueId: uniqueId,
            }), className: clsx_1.default(classes.input, (_b = {},
                _b[classes.inputInverse] = color === 'inverse' || colorFromContext === 'inverse',
                _b)), ref: ref, role: "radio", type: "radio", id: uniqueId, tabIndex: 0, name: nameFromContext, value: value, onChange: handleChange, checked: checked || valueFromContext
                ? valueFromContext === value || checked
                : undefined }, rootProps)),
        React.createElement("div", { className: classes.labelContainer },
            React.createElement("label", { className: classes.label, htmlFor: uniqueId },
                React.createElement(Text_1.Text, { size: "subbody", className: color === 'inverse' || colorFromContext === 'inverse'
                        ? classes.labelInverse
                        : undefined }, label)),
            helpMessage && (React.createElement(forms_1.FormHelpMessage, { color: color || colorFromContext, rootElementId: uniqueId, describedById: forms_1.helpFor(uniqueId) }, helpMessage))),
        children));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFkaW8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9SYWRpby9SYWRpby50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDhDQUF3QjtBQUN4QiwyQ0FBK0I7QUFDL0IsdUNBQTBDO0FBRTFDLDJDQUsyQjtBQUMzQixpREFBd0Q7QUFDeEQsZ0NBQStCO0FBQy9CLGlEQUFnRDtBQUVuQyxRQUFBLGNBQWMsR0FBRyxhQUFhLENBQUM7QUFFL0IsUUFBQSxTQUFTLEdBQUcsbUJBQVUsQ0FDakMsVUFBQyxLQUFLLElBQUssT0FBQSxDQUFDO0lBQ1YsSUFBSSxFQUFFO1FBQ0osT0FBTyxFQUFFLE1BQU07UUFDZixnQ0FBZ0MsRUFBRTtZQUNoQyxPQUFPLEVBQUUsQ0FBQztZQUNWLFVBQVUsRUFDUiw0REFBNEQ7U0FDL0Q7UUFDRCx3Q0FBd0MsRUFBRTtZQUN4QyxPQUFPLEVBQUUsQ0FBQztTQUNYO0tBQ0Y7SUFDRCxLQUFLLEVBQUU7UUFDTCxVQUFVLEVBQUUsMkJBQTJCO1FBQ3ZDLE1BQU0sRUFBRSx1QkFBdUI7UUFDL0IsWUFBWSxFQUFFLEtBQUs7UUFDbkIsTUFBTSxFQUFFLFNBQVM7UUFDakIsT0FBTyxFQUFFLGNBQWM7UUFDdkIsTUFBTSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ3pCLE1BQU0sRUFBRSxDQUFDO1FBQ1QsYUFBYSxFQUFFLE1BQU07UUFDckIsT0FBTyxFQUFFLE1BQU07UUFDZixRQUFRLEVBQUUsVUFBVTtRQUNwQixVQUFVLEVBQUUsa0RBQWtEO1FBQzlELGFBQWEsRUFBRSxLQUFLO1FBQ3BCLGdCQUFnQixFQUFFLE1BQU07UUFDeEIsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ3hCLFNBQVMsRUFBRTtZQUNULFVBQVUsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFD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QUksQ0FBQyxPQUFPLENBQUMsS0FBSztnQkFDM0IsR0FBQyxPQUFPLENBQUMsWUFBWSxJQUNuQixLQUFLLEtBQUssU0FBUyxJQUFJLGdCQUFnQixLQUFLLFNBQVM7b0JBQ3ZELEVBQ0YsR0FBRyxFQUFFLEdBQUcsRUFDUixJQUFJLEVBQUMsT0FBTyxFQUNaLElBQUksRUFBQyxPQUFPLEVBQ1osRUFBRSxFQUFFLFFBQVEsRUFDWixRQUFRLEVBQUUsQ0FBQyxFQUNYLElBQUksRUFBRSxlQUFlLEVBQ3JCLEtBQUssRUFBRSxLQUFLLEVBQ1osUUFBUSxFQUFFLFlBQVksRUFDdEIsT0FBTyxFQUNMLE9BQU8sSUFBSSxnQkFBZ0I7Z0JBQ3pCLENBQUMsQ0FBQyxnQkFBZ0IsS0FBSyxLQUFLLElBQUksT0FBTztnQkFDdkMsQ0FBQyxDQUFDLFNBQVMsSUFFWCxTQUFTLEVBQ2I7UUFDRiw2QkFBSyxTQUFTLEVBQUUsT0FBTyxDQUFDLGNBQWM7WUFDcEMsK0JBQU8sU0FBUyxFQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLFFBQVE7Z0JBQ2hELG9CQUFDLFdBQUksSUFDSCxJQUFJLEVBQUMsU0FBUyxFQUNkLFNBQVMsRUFDUCxLQUFLLEtBQUssU0FBUyxJQUFJLGdCQUFnQixLQUFLLFNBQVM7d0JBQ25ELENBQUMsQ0FBQyxPQUFPLENBQUMsWUFBWTt3QkFDdEIsQ0FBQyxDQUFDLFNBQVMsSUFHZCxLQUFLLENBQ0QsQ0FDRDtZQUNQLFdBQVcsSUFBSSxDQUNkLG9CQUFDLHVCQUFlLElBQ2QsS0FBSyxFQUFFLEtBQUssSUFBSSxnQkFBZ0IsRUFDaEMsYUFBYSxFQUFFLFFBQVEsRUFDdkIsYUFBYSxFQUFFLGVBQU8sQ0FBQyxRQUFRLENBQUMsSUFFL0IsV0FBVyxDQUNJLENBQ25CLENBQ0c7UUFDTCxRQUFRLENBQ0wsQ0FDUCxDQUFDO0FBQ0osQ0FBQyxDQUNGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2xzeCBmcm9tICdjbHN4JztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG1ha2VTdHlsZXMgfSBmcm9tICcuLi8uLi9zdHlsZXMnO1xuaW1wb3J0IHsgR2V0Q2xhc3NlcyB9IGZyb20gJy4uLy4uL3R5cGVVdGlscyc7XG5pbXBvcnQge1xuICBCYXNlRm9ybUVsZW1lbnQsXG4gIGJ1aWxkRGVzY3JpYmVkQnksXG4gIEZvcm1IZWxwTWVzc2FnZSxcbiAgaGVscEZvcixcbn0gZnJvbSAnLi4vX3ByaXZhdGUvZm9ybXMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVVbmlxdWVJZCB9IGZyb20gJy4uL19wcml2YXRlL1VuaXF1ZUlkJztcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9UZXh0JztcbmltcG9ydCB7IHVzZVJhZGlvR3JvdXAgfSBmcm9tICcuL3VzZVJhZGlvR3JvdXAnO1xuXG5leHBvcnQgY29uc3QgUmFkaW9TdHlsZXNLZXkgPSAnQ2hyb21hUmFkaW8nO1xuXG5leHBvcnQgY29uc3QgdXNlU3R5bGVzID0gbWFrZVN0eWxlcyhcbiAgKHRoZW1lKSA9PiAoe1xuICAgIHJvb3Q6IHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICcmID4gaW5wdXRbdHlwZT1cInJhZGlvXCJdOjphZnRlcic6IHtcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgdHJhbnNpdGlvbjpcbiAgICAgICAgICAndHJhbnNmb3JtIC4zcyBjdWJpYy1iZXppZXIoLjIsIC44NSwgLjMyLCAxLjIpLCBvcGFjaXR5IC4ycycsXG4gICAgICB9LFxuICAgICAgJyYgPiBpbnB1dFt0eXBlPVwicmFkaW9cIl06Y2hlY2tlZDo6YWZ0ZXInOiB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICB9LFxuICAgIH0sXG4gICAgaW5wdXQ6IHtcbiAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDEzMiwgMTM3LCAxNjYsIDAuMTUpJyxcbiAgICAgIGJvcmRlcjogJzFweCBzb2xpZCB0cmFuc3BhcmVudCcsXG4gICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIGhlaWdodDogdGhlbWUucHhUb1JlbSgyMSksXG4gICAgICBtYXJnaW46IDAsXG4gICAgICBNb3pBcHBlYXJhbmNlOiAnbm9uZScsXG4gICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHRyYW5zaXRpb246ICdiYWNrZ3JvdW5kIC4zcywgYm9yZGVyLWNvbG9yIC4zcywgYm94LXNoYWRvdyAuMnMnLFxuICAgICAgdmVydGljYWxBbGlnbjogJ3RvcCcsXG4gICAgICBXZWJraXRBcHBlYXJhbmNlOiAnbm9uZScsXG4gICAgICB3aWR0aDogdGhlbWUucHhUb1JlbSgyMSksXG4gICAgICAnJjphZnRlcic6IHtcbiAgICAgICAgYmFja2dyb3VuZDogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzUwJScsXG4gICAgICAgIGNvbnRlbnQ6ICdcIiBcIicsXG4gICAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDAuNSknLFxuICAgICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMTkpLFxuICAgICAgICB3aWR0aDogdGhlbWUucHhUb1JlbSgxOSksXG4gICAgICB9LFxuICAgICAgJyY6Y2hlY2tlZCc6IHtcbiAgICAgICAgYmFja2dyb3VuZDogdGhlbWUucGFsZXR0ZS5wcmltYXJ5Lm1haW4sXG4gICAgICB9LFxuICAgICAgJyY6ZGlzYWJsZWQnOiB7XG4gICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJyxcbiAgICAgICAgb3BhY2l0eTogMC42MjUsXG4gICAgICAgIC8vIEVuc3VyZSB0aGUgbGFiZWwgc2libGluZyBjYW5ub3QgYmUgY2xpY2tlZCBhcyB3ZWxsXG4gICAgICAgICcmICsgbGFiZWwnOiB7XG4gICAgICAgICAgY3Vyc29yOiAnbm90LWFsbG93ZWQnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBib3hTaGFkb3c6ICcwIDAgMCAycHggcmdiYSgwLCAxNTAsIDIyNSwgLjMpJyxcbiAgICAgIH0sXG4gICAgICAnJjpob3Zlcjpub3QoOmRpc2FibGVkKTpub3QoOmNoZWNrZWQpJzoge1xuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5wYWxldHRlLnByaW1hcnlbNzAwXX1gLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGlucHV0SW52ZXJzZToge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyMzAsIDIzMSwgMjM3LCAwLjEpJyxcbiAgICAgICcmOmNoZWNrZWQnOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjMwLCAyMzEsIDIzNywgMC4xKScsXG4gICAgICAgIGJvcmRlcjogYDFweCBzb2xpZCByZ2JhKDIzMCwgMjMxLCAyMzcsIDAuNTUpYCxcbiAgICAgIH0sXG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgYm94U2hhZG93OiAnMCAwIDAgMnB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgLjMpJyxcbiAgICAgIH0sXG4gICAgICAnJjpob3Zlcjpub3QoOmRpc2FibGVkKTpub3QoOmNoZWNrZWQpJzoge1xuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZX1gLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxhYmVsQ29udGFpbmVyOiB7XG4gICAgICBmbGV4OiAxLFxuICAgICAgbWFyZ2luTGVmdDogdGhlbWUuc3BhY2luZygxKSxcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgbWFyZ2luQm90dG9tOiAwLFxuICAgICAgbWFyZ2luVG9wOiB0aGVtZS5zcGFjaW5nKDAuMjUpLFxuICAgICAgdmVydGljYWxBbGlnbjogJ3RvcCcsXG4gICAgICAnJiBwJzoge1xuICAgICAgICBsaW5lSGVpZ2h0OiAxLjI1LFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxhYmVsSW52ZXJzZToge1xuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgIH0sXG4gIH0pLFxuICB7IG5hbWU6IFJhZGlvU3R5bGVzS2V5IH1cbik7XG5cbmV4cG9ydCB0eXBlIFJhZGlvQ2xhc3NlcyA9IEdldENsYXNzZXM8dHlwZW9mIHVzZVN0eWxlcz47XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmFkaW9Qcm9wcyBleHRlbmRzIEJhc2VGb3JtRWxlbWVudCB7fVxuXG5leHBvcnQgY29uc3QgUmFkaW8gPSBSZWFjdC5mb3J3YXJkUmVmPEhUTUxJbnB1dEVsZW1lbnQsIFJhZGlvUHJvcHM+KFxuICAoXG4gICAge1xuICAgICAgY2xhc3NOYW1lLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICBjaGVja2VkID0gZmFsc2UsXG4gICAgICBjb2xvcixcbiAgICAgIGhlbHBNZXNzYWdlLFxuICAgICAgaWQsXG4gICAgICBsYWJlbCxcbiAgICAgIHZhbHVlLFxuICAgICAgLi4ucm9vdFByb3BzXG4gICAgfSxcbiAgICByZWZcbiAgKSA9PiB7XG4gICAgY29uc3QgY2xhc3NlcyA9IHVzZVN0eWxlcyh7fSk7XG5cbiAgICBjb25zdCBbdW5pcXVlSWRdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihcbiAgICAgICgpID0+IGlkIHx8IGdlbmVyYXRlVW5pcXVlSWQoJ3JhZGlvLScpXG4gICAgKTtcblxuICAgIGNvbnN0IHtcbiAgICAgIGNvbG9yOiBjb2xvckZyb21Db250ZXh0LFxuICAgICAgbmFtZTogbmFtZUZyb21Db250ZXh0LFxuICAgICAgdmFsdWU6IHZhbHVlRnJvbUNvbnRleHQsXG4gICAgICBvbkNoYW5nZTogb25DaGFuZ2VGcm9tQ29udGV4dCxcbiAgICB9ID0gdXNlUmFkaW9Hcm91cCgpO1xuXG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgICBvbkNoYW5nZUZyb21Db250ZXh0ICYmIG9uQ2hhbmdlRnJvbUNvbnRleHQoZSk7XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xzeChjbGFzc2VzLnJvb3QsIGNsYXNzTmFtZSl9PlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PXtidWlsZERlc2NyaWJlZEJ5KHtcbiAgICAgICAgICAgIGhhc0hlbHBNZXNzYWdlOiAhIWhlbHBNZXNzYWdlLFxuICAgICAgICAgICAgdW5pcXVlSWQsXG4gICAgICAgICAgfSl9XG4gICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KGNsYXNzZXMuaW5wdXQsIHtcbiAgICAgICAgICAgIFtjbGFzc2VzLmlucHV0SW52ZXJzZV06XG4gICAgICAgICAgICAgIGNvbG9yID09PSAnaW52ZXJzZScgfHwgY29sb3JGcm9tQ29udGV4dCA9PT0gJ2ludmVyc2UnLFxuICAgICAgICAgIH0pfVxuICAgICAgICAgIHJlZj17cmVmfVxuICAgICAgICAgIHJvbGU9XCJyYWRpb1wiXG4gICAgICAgICAgdHlwZT1cInJhZGlvXCJcbiAgICAgICAgICBpZD17dW5pcXVlSWR9XG4gICAgICAgICAgdGFiSW5kZXg9ezB9XG4gICAgICAgICAgbmFtZT17bmFtZUZyb21Db250ZXh0fVxuICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgIGNoZWNrZWQ9e1xuICAgICAgICAgICAgY2hlY2tlZCB8fCB2YWx1ZUZyb21Db250ZXh0XG4gICAgICAgICAgICAgID8gdmFsdWVGcm9tQ29udGV4dCA9PT0gdmFsdWUgfHwgY2hlY2tlZFxuICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICAgIH1cbiAgICAgICAgICB7Li4ucm9vdFByb3BzfVxuICAgICAgICAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5sYWJlbENvbnRhaW5lcn0+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT17Y2xhc3Nlcy5sYWJlbH0gaHRtbEZvcj17dW5pcXVlSWR9PlxuICAgICAgICAgICAgPFRleHRcbiAgICAgICAgICAgICAgc2l6ZT1cInN1YmJvZHlcIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e1xuICAgICAgICAgICAgICAgIGNvbG9yID09PSAnaW52ZXJzZScgfHwgY29sb3JGcm9tQ29udGV4dCA9PT0gJ2ludmVyc2UnXG4gICAgICAgICAgICAgICAgICA/IGNsYXNzZXMubGFiZWxJbnZlcnNlXG4gICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtsYWJlbH1cbiAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgIHtoZWxwTWVzc2FnZSAmJiAoXG4gICAgICAgICAgICA8Rm9ybUhlbHBNZXNzYWdlXG4gICAgICAgICAgICAgIGNvbG9yPXtjb2xvciB8fCBjb2xvckZyb21Db250ZXh0fVxuICAgICAgICAgICAgICByb290RWxlbWVudElkPXt1bmlxdWVJZH1cbiAgICAgICAgICAgICAgZGVzY3JpYmVkQnlJZD17aGVscEZvcih1bmlxdWVJZCl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtoZWxwTWVzc2FnZX1cbiAgICAgICAgICAgIDwvRm9ybUhlbHBNZXNzYWdlPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG4pO1xuIl19