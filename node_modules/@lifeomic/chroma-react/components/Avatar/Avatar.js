"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Avatar = exports.useStyles = exports.AvatarStylesKey = void 0;
var clsx_1 = __importDefault(require("clsx"));
var React = __importStar(require("react"));
var styles_1 = require("../../styles");
var AvatarSizeContext_1 = require("./AvatarSizeContext");
exports.AvatarStylesKey = 'ChromaAvatar';
exports.useStyles = (0, styles_1.makeStyles)(function (theme) { return ({
    root: {
        alignItems: 'center',
        backgroundColor: theme.palette.primary.main,
        border: "".concat(theme.pxToRem(1), " solid ").concat(theme.palette.black[100]),
        borderRadius: 9999,
        color: theme.palette.common.white,
        display: 'inline-flex',
        flexShrink: 0,
        justifyContent: 'center',
        outline: 'none',
        position: 'relative',
        transition: 'opacity 0.25s ease, border 0.25s ease',
        userSelect: 'none',
        '&:focus': {
            opacity: 0.85,
            border: "".concat(theme.pxToRem(2), " solid ").concat(theme.palette.black[700]),
        },
    },
    size0: {
        fontSize: theme.typography.caption.fontSize,
        fontWeight: theme.typography.fontWeightBold,
        width: theme.pxToRem(22),
        height: theme.pxToRem(22),
    },
    size1: {
        fontSize: theme.typography.body1.fontSize,
        width: theme.pxToRem(32),
        height: theme.pxToRem(32),
    },
    size2: {
        fontSize: theme.typography.h5.fontSize,
        width: theme.pxToRem(42),
        height: theme.pxToRem(42),
    },
    img: {
        width: '100%',
        height: '100%',
        objectFit: 'cover',
        maxWidth: '100%',
        verticalAlign: 'middle',
        borderRadius: 9999,
    },
    defaultSrc: {
        fill: theme.palette.common.white,
    },
    clickable: {
        cursor: 'pointer',
        '&:hover': {
            opacity: 0.85,
            border: "".concat(theme.pxToRem(1), " solid ").concat(theme.palette.black[700]),
        },
    },
}); }, { name: exports.AvatarStylesKey });
var getInitials = function (name) {
    var _a;
    if (!name) {
        return '';
    }
    var firstName = name.split(' ')[0];
    return (_a = firstName === null || firstName === void 0 ? void 0 : firstName.charAt(0)) === null || _a === void 0 ? void 0 : _a.toUpperCase();
};
exports.Avatar = React.forwardRef(function (_a, ref) {
    var _b;
    var className = _a.className, children = _a.children, _c = _a.name, name = _c === void 0 ? '' : _c, onClick = _a.onClick, _d = _a.size, size = _d === void 0 ? 1 : _d, src = _a.src, _e = _a.useDefaultSrc, useDefaultSrc = _e === void 0 ? false : _e, bubbleError = _a.onError, rootProps = __rest(_a, ["className", "children", "name", "onClick", "size", "src", "useDefaultSrc", "onError"]);
    var classes = (0, exports.useStyles)({});
    var _f = React.useState(false), error = _f[0], setError = _f[1];
    var onError = function (error) {
        setError(true);
        bubbleError && bubbleError(error);
    };
    React.useEffect(function () {
        setError(false);
    }, [src]);
    // We need to be *super* careful to not display any self identifying information
    // (name or image src) if "useDefaultSrc" is provided.  This will ensure
    // that our "masked mode" when dealing with healthcare information is respected
    return (
    // We conditionally add the role if `onClick` is provided
    // eslint-disable-next-line jsx-a11y/no-static-element-interactions
    React.createElement("div", __assign({ ref: ref, className: (0, clsx_1.default)(classes.root, (_b = {},
            _b[classes.size0] = size === 0,
            _b[classes.size1] = size === 1,
            _b[classes.size2] = size === 2,
            _b), onClick && classes.clickable, className), onClick: onClick, "aria-label": !src && name && !useDefaultSrc ? name : undefined, role: onClick ? 'button' : undefined, tabIndex: onClick ? 0 : undefined }, rootProps),
        (error || !src) && !useDefaultSrc ? getInitials(name) : null,
        src && !error && !useDefaultSrc && (React.createElement("img", { onError: onError, className: classes.img, src: src, alt: name })),
        useDefaultSrc && (React.createElement("svg", { className: (0, clsx_1.default)(classes.img, classes.defaultSrc), fill: "currentColor", viewBox: "0 0 128 128", role: "img" },
            React.createElement("g", null,
                React.createElement("path", { d: "M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z" }),
                React.createElement("path", { d: "M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24" })))),
        children && (React.createElement(AvatarSizeContext_1.AvatarSizeContext.Provider, { value: { size: size } }, children))));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXZhdGFyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvQXZhdGFyL0F2YXRhci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsOENBQXdCO0FBQ3hCLDJDQUErQjtBQUMvQix1Q0FBMEM7QUFFMUMseURBQXdEO0FBRTNDLFFBQUEsZUFBZSxHQUFHLGNBQWMsQ0FBQztBQUVqQyxRQUFBLFNBQVMsR0FBRyxJQUFBLG1CQUFVLEVBQ2pDLFVBQUMsS0FBSyxJQUFLLE9BQUEsQ0FBQztJQUNWLElBQUksRUFBRTtRQUNKLFVBQVUsRUFBRSxRQUFRO1FBQ3BCLGVBQWUsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJO1FBQzNDLE1BQU0sRUFBRSxVQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLG9CQUFVLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFFO1FBQy9ELFlBQVksRUFBRSxJQUFJO1FBQ2xCLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLO1FBQ2pDLE9BQU8sRUFBRSxhQUFhO1FBQ3RCLFVBQVUsRUFBRSxDQUFDO1FBQ2IsY0FBYyxFQUFFLFFBQVE7UUFDeEIsT0FBTyxFQUFFLE1BQU07UUFDZixRQUFRLEVBQUUsVUFBVTtRQUNwQixVQUFVLEVBQUUsdUNBQXVDO1FBQ25ELFVBQVUsRUFBRSxNQUFNO1FBQ2xCLFNBQVMsRUFBRTtZQUNULE9BQU8sRUFBRSxJQUFJO1lBQ2IsTUFBTSxFQUFFLFVBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsb0JBQVUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUU7U0FDaEU7S0FDRjtJQUNELEtBQUssRUFBRTtRQUNMLFFB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QUFTLEVBQUUsSUFBQSxjQUFJLEVBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQ2hELElBQUksRUFBQyxjQUFjLEVBQ25CLE9BQU8sRUFBQyxhQUFhLEVBQ3JCLElBQUksRUFBQyxLQUFLO1lBRVY7Z0JBQ0UsOEJBQU0sQ0FBQyxFQUFDLCtMQUErTCxHQUFHO2dCQUMxTSw4QkFBTSxDQUFDLEVBQUMsNExBQTRMLEdBQUcsQ0FDck0sQ0FDQSxDQUNQO1FBQ0EsUUFBUSxJQUFJLENBQ1gsb0JBQUMscUNBQWlCLENBQUMsUUFBUSxJQUFDLEtBQUssRUFBRSxFQUFFLElBQUksTUFBQSxFQUFFLElBQ3hDLFFBQVEsQ0FDa0IsQ0FDOUIsQ0FDRyxDQUNQLENBQUM7QUFDSixDQUFDLENBQ0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjbHN4IGZyb20gJ2Nsc3gnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgbWFrZVN0eWxlcyB9IGZyb20gJy4uLy4uL3N0eWxlcyc7XG5pbXBvcnQgeyBHZXRDbGFzc2VzIH0gZnJvbSAnLi4vLi4vdHlwZVV0aWxzJztcbmltcG9ydCB7IEF2YXRhclNpemVDb250ZXh0IH0gZnJvbSAnLi9BdmF0YXJTaXplQ29udGV4dCc7XG5cbmV4cG9ydCBjb25zdCBBdmF0YXJTdHlsZXNLZXkgPSAnQ2hyb21hQXZhdGFyJztcblxuZXhwb3J0IGNvbnN0IHVzZVN0eWxlcyA9IG1ha2VTdHlsZXMoXG4gICh0aGVtZSkgPT4gKHtcbiAgICByb290OiB7XG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhlbWUucGFsZXR0ZS5wcmltYXJ5Lm1haW4sXG4gICAgICBib3JkZXI6IGAke3RoZW1lLnB4VG9SZW0oMSl9IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5ibGFja1sxMDBdfWAsXG4gICAgICBib3JkZXJSYWRpdXM6IDk5OTksXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWZsZXgnLFxuICAgICAgZmxleFNocmluazogMCxcbiAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgdHJhbnNpdGlvbjogJ29wYWNpdHkgMC4yNXMgZWFzZSwgYm9yZGVyIDAuMjVzIGVhc2UnLFxuICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgJyY6Zm9jdXMnOiB7XG4gICAgICAgIG9wYWNpdHk6IDAuODUsXG4gICAgICAgIGJvcmRlcjogYCR7dGhlbWUucHhUb1JlbSgyKX0gc29saWQgJHt0aGVtZS5wYWxldHRlLmJsYWNrWzcwMF19YCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBzaXplMDoge1xuICAgICAgZm9udFNpemU6IHRoZW1lLnR5cG9ncmFwaHkuY2FwdGlvbi5mb250U2l6ZSxcbiAgICAgIGZvbnRXZWlnaHQ6IHRoZW1lLnR5cG9ncmFwaHkuZm9udFdlaWdodEJvbGQsXG4gICAgICB3aWR0aDogdGhlbWUucHhUb1JlbSgyMiksXG4gICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMjIpLFxuICAgIH0sXG4gICAgc2l6ZTE6IHtcbiAgICAgIGZvbnRTaXplOiB0aGVtZS50eXBvZ3JhcGh5LmJvZHkxLmZvbnRTaXplLFxuICAgICAgd2lkdGg6IHRoZW1lLnB4VG9SZW0oMzIpLFxuICAgICAgaGVpZ2h0OiB0aGVtZS5weFRvUmVtKDMyKSxcbiAgICB9LFxuICAgIHNpemUyOiB7XG4gICAgICBmb250U2l6ZTogdGhlbWUudHlwb2dyYXBoeS5oNS5mb250U2l6ZSxcbiAgICAgIHdpZHRoOiB0aGVtZS5weFRvUmVtKDQyKSxcbiAgICAgIGhlaWdodDogdGhlbWUucHhUb1JlbSg0MiksXG4gICAgfSxcbiAgICBpbWc6IHtcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgIG9iamVjdEZpdDogJ2NvdmVyJyxcbiAgICAgIG1heFdpZHRoOiAnMTAwJScsXG4gICAgICB2ZXJ0aWNhbEFsaWduOiAnbWlkZGxlJyxcbiAgICAgIGJvcmRlclJhZGl1czogOTk5OSxcbiAgICB9LFxuICAgIGRlZmF1bHRTcmM6IHtcbiAgICAgIGZpbGw6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgIH0sXG4gICAgY2xpY2thYmxlOiB7XG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICcmOmhvdmVyJzoge1xuICAgICAgICBvcGFjaXR5OiAwLjg1LFxuICAgICAgICBib3JkZXI6IGAke3RoZW1lLnB4VG9SZW0oMSl9IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5ibGFja1s3MDBdfWAsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pLFxuICB7IG5hbWU6IEF2YXRhclN0eWxlc0tleSB9XG4pO1xuXG5leHBvcnQgdHlwZSBBdmF0YXJDbGFzc2VzID0gR2V0Q2xhc3Nlczx0eXBlb2YgdXNlU3R5bGVzPjtcblxuZXhwb3J0IGludGVyZmFjZSBBdmF0YXJQcm9wcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudFByb3BzV2l0aG91dFJlZjwnZGl2Jz4ge1xuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZTtcbiAgbmFtZTogc3RyaW5nO1xuICBzaXplPzogMCB8IDEgfCAyO1xuICBzcmM/OiBzdHJpbmc7XG4gIHVzZURlZmF1bHRTcmM/OiBib29sZWFuO1xuICBvbkVycm9yPzogUmVhY3QuUmVhY3RFdmVudEhhbmRsZXI8SFRNTEltYWdlRWxlbWVudD47XG59XG5cbmNvbnN0IGdldEluaXRpYWxzID0gKG5hbWU6IHN0cmluZykgPT4ge1xuICBpZiAoIW5hbWUpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBjb25zdCBbZmlyc3ROYW1lXSA9IG5hbWUuc3BsaXQoJyAnKTtcblxuICByZXR1cm4gZmlyc3ROYW1lPy5jaGFyQXQoMCk/LnRvVXBwZXJDYXNlKCk7XG59O1xuXG5leHBvcnQgY29uc3QgQXZhdGFyID0gUmVhY3QuZm9yd2FyZFJlZjxIVE1MRGl2RWxlbWVudCwgQXZhdGFyUHJvcHM+KFxuICAoXG4gICAge1xuICAgICAgY2xhc3NOYW1lLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICBuYW1lID0gJycsXG4gICAgICBvbkNsaWNrLFxuICAgICAgc2l6ZSA9IDEsXG4gICAgICBzcmMsXG4gICAgICB1c2VEZWZhdWx0U3JjID0gZmFsc2UsXG4gICAgICBvbkVycm9yOiBidWJibGVFcnJvcixcbiAgICAgIC4uLnJvb3RQcm9wc1xuICAgIH0sXG4gICAgcmVmXG4gICkgPT4ge1xuICAgIGNvbnN0IGNsYXNzZXMgPSB1c2VTdHlsZXMoe30pO1xuXG4gICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG5cbiAgICBjb25zdCBvbkVycm9yOiBSZWFjdC5SZWFjdEV2ZW50SGFuZGxlcjxIVE1MSW1hZ2VFbGVtZW50PiA9IChlcnJvcikgPT4ge1xuICAgICAgc2V0RXJyb3IodHJ1ZSk7XG4gICAgICBidWJibGVFcnJvciAmJiBidWJibGVFcnJvcihlcnJvcik7XG4gICAgfTtcblxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBzZXRFcnJvcihmYWxzZSk7XG4gICAgfSwgW3NyY10pO1xuXG4gICAgLy8gV2UgbmVlZCB0byBiZSAqc3VwZXIqIGNhcmVmdWwgdG8gbm90IGRpc3BsYXkgYW55IHNlbGYgaWRlbnRpZnlpbmcgaW5mb3JtYXRpb25cbiAgICAvLyAobmFtZSBvciBpbWFnZSBzcmMpIGlmIFwidXNlRGVmYXVsdFNyY1wiIGlzIHByb3ZpZGVkLiAgVGhpcyB3aWxsIGVuc3VyZVxuICAgIC8vIHRoYXQgb3VyIFwibWFza2VkIG1vZGVcIiB3aGVuIGRlYWxpbmcgd2l0aCBoZWFsdGhjYXJlIGluZm9ybWF0aW9uIGlzIHJlc3BlY3RlZFxuICAgIHJldHVybiAoXG4gICAgICAvLyBXZSBjb25kaXRpb25hbGx5IGFkZCB0aGUgcm9sZSBpZiBgb25DbGlja2AgaXMgcHJvdmlkZWRcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBqc3gtYTExeS9uby1zdGF0aWMtZWxlbWVudC1pbnRlcmFjdGlvbnNcbiAgICAgIDxkaXZcbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICBjbGFzc2VzLnJvb3QsXG4gICAgICAgICAge1xuICAgICAgICAgICAgW2NsYXNzZXMuc2l6ZTBdOiBzaXplID09PSAwLFxuICAgICAgICAgICAgW2NsYXNzZXMuc2l6ZTFdOiBzaXplID09PSAxLFxuICAgICAgICAgICAgW2NsYXNzZXMuc2l6ZTJdOiBzaXplID09PSAyLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb25DbGljayAmJiBjbGFzc2VzLmNsaWNrYWJsZSxcbiAgICAgICAgICBjbGFzc05hbWVcbiAgICAgICAgKX1cbiAgICAgICAgb25DbGljaz17b25DbGlja31cbiAgICAgICAgYXJpYS1sYWJlbD17IXNyYyAmJiBuYW1lICYmICF1c2VEZWZhdWx0U3JjID8gbmFtZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgcm9sZT17b25DbGljayA/ICdidXR0b24nIDogdW5kZWZpbmVkfVxuICAgICAgICB0YWJJbmRleD17b25DbGljayA/IDAgOiB1bmRlZmluZWR9XG4gICAgICAgIHsuLi5yb290UHJvcHN9XG4gICAgICA+XG4gICAgICAgIHsoZXJyb3IgfHwgIXNyYykgJiYgIXVzZURlZmF1bHRTcmMgPyBnZXRJbml0aWFscyhuYW1lKSA6IG51bGx9XG4gICAgICAgIHtzcmMgJiYgIWVycm9yICYmICF1c2VEZWZhdWx0U3JjICYmIChcbiAgICAgICAgICA8aW1nIG9uRXJyb3I9e29uRXJyb3J9IGNsYXNzTmFtZT17Y2xhc3Nlcy5pbWd9IHNyYz17c3JjfSBhbHQ9e25hbWV9IC8+XG4gICAgICAgICl9XG4gICAgICAgIHt1c2VEZWZhdWx0U3JjICYmIChcbiAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goY2xhc3Nlcy5pbWcsIGNsYXNzZXMuZGVmYXVsdFNyYyl9XG4gICAgICAgICAgICBmaWxsPVwiY3VycmVudENvbG9yXCJcbiAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMTI4IDEyOFwiXG4gICAgICAgICAgICByb2xlPVwiaW1nXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8Zz5cbiAgICAgICAgICAgICAgPHBhdGggZD1cIk0xMDMsMTAyLjEzODggQzkzLjA5NCwxMTEuOTIgNzkuMzUwNCwxMTggNjQuMTYzOCwxMTggQzQ4LjgwNTYsMTE4IDM0LjkyOTQsMTExLjc2OCAyNSwxMDEuNzg5MiBMMjUsOTUuMiBDMjUsODYuODA5NiAzMS45ODEsODAgNDAuNiw4MCBMODcuNCw4MCBDOTYuMDE5LDgwIDEwMyw4Ni44MDk2IDEwMyw5NS4yIEwxMDMsMTAyLjEzODggWlwiIC8+XG4gICAgICAgICAgICAgIDxwYXRoIGQ9XCJNNjMuOTk2MTY0NywyNCBDNTEuMjkzODEzNiwyNCA0MSwzNC4yOTM4MTM2IDQxLDQ2Ljk5NjE2NDcgQzQxLDU5LjcwNjE4NjQgNTEuMjkzODEzNiw3MCA2My45OTYxNjQ3LDcwIEM3Ni42OTg1MTU5LDcwIDg3LDU5LjcwNjE4NjQgODcsNDYuOTk2MTY0NyBDODcsMzQuMjkzODEzNiA3Ni42OTg1MTU5LDI0IDYzLjk5NjE2NDcsMjRcIiAvPlxuICAgICAgICAgICAgPC9nPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICApfVxuICAgICAgICB7Y2hpbGRyZW4gJiYgKFxuICAgICAgICAgIDxBdmF0YXJTaXplQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBzaXplIH19PlxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgIDwvQXZhdGFyU2l6ZUNvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG4pO1xuIl19