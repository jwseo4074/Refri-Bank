"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.PrimaryNavigation = exports.useStyles = exports.PrimaryNavigationStylesKey = exports.testIds = void 0;
var clsx_1 = __importDefault(require("clsx"));
var React = __importStar(require("react"));
var react_hotkeys_1 = require("react-hotkeys");
var chromicons_1 = require("@lifeomic/chromicons");
var styles_1 = require("../../styles");
var LayoutManager_1 = require("../LayoutManager");
var common_1 = require("./_private/common");
var framer_motion_1 = require("framer-motion");
var getTestProps_1 = require("../../testUtils/getTestProps");
var KEY_MAP = {
    TOGGLE_SIDE_BAR: '[',
};
exports.testIds = {
    toggleButton: 'primaryNavigation-toggleButton',
    headerRoot: 'primaryNavigation-headerRoot',
};
exports.PrimaryNavigationStylesKey = 'ChromaPrimaryNavigation';
exports.useStyles = (0, styles_1.makeStyles)(function (theme) { return ({
    root: {
        '--link-color': theme.palette.black[300],
        '--link-hover': theme.palette.black[50],
        '--link-active': theme.palette.primary[300],
        '--link-active-bg': theme.palette.action.active,
        '--link-size': '0.875rem',
        backgroundColor: theme.palette.grey.main,
        color: 'var(--link-color)',
        display: 'flex',
        paddingTop: theme.spacing(1.5),
        flexDirection: 'column',
        overflowX: 'hidden',
        overflowY: 'auto',
        width: '100%',
        fallbacks: {
            color: theme.palette.black[300],
        },
    },
    header: {
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'flex-end',
        height: theme.pxToRem(32),
        flex: '0 0 auto',
        marginTop: theme.spacing(0.5),
        marginBottom: theme.spacing(1.25),
    },
    headerContent: {
        flex: '1 1 auto',
        paddingLeft: theme.spacing(2.25),
        paddingRight: theme.spacing(2.25),
    },
    headerContentMin: {
        width: '100%',
        display: 'flex',
        justifyContent: 'center',
        paddingLeft: 0,
        paddingRight: 0,
    },
    headerContentHidden: {
        display: 'none',
    },
    toggleButton: {
        width: LayoutManager_1.sideBarWidthCollapsed,
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        flex: '0 0 auto',
        opacity: 0.3,
    },
    navItems: {
        overflowY: 'auto',
        overflowX: 'hidden',
        flex: '1 1 100px',
        listStyle: 'none',
        padding: 0,
        margin: 0,
    },
    footer: {
        flex: '0 0 auto',
        marginTop: theme.spacing(2),
        marginBottom: theme.spacing(2),
        paddingLeft: theme.spacing(2.75),
        paddingRight: theme.spacing(2.75),
    },
    footToggle: {
        alignItems: 'flex-start',
        background: 'transparent none',
        border: 0,
        color: 'var(--link-color)',
        display: 'flex',
        fontFamily: theme.typography.fontFamily,
        fontSize: 'var(--link-size)',
        justifyContent: 'flex-start',
        letterSpacing: 0.15,
        padding: theme.spacing(1, 2.25, 2),
        textAlign: 'left',
        transition: 'color 0.5s ease',
        whiteSpace: 'nowrap',
        '&:hover': {
            color: 'var(--link-hover)',
            cursor: 'pointer',
        },
        '&[aria-checked=true]': {
            color: 'var(--link-active)',
        },
        '&:focus': {
            outline: 'none',
        },
    },
    footToggleContainer: {
        width: theme.pxToRem(24),
        height: theme.pxToRem(24),
    },
    toggleText: {
        display: 'inline-block',
        marginLeft: theme.spacing(2.25),
        position: 'relative',
        top: theme.spacing(0.25),
    },
}); }, {
    name: exports.PrimaryNavigationStylesKey,
});
var NAV_LIST_TRANSITION_VARIANTS = {
    hide: {},
    show: {
        transition: {
            staggerChildren: 0.04,
            delayChildren: 0.125,
        },
    },
};
var SHARED_TRANSITION_VARIANTS = {
    hide: { opacity: 0 },
    show: {
        opacity: 1,
        transition: {
            duration: 0.3,
        },
    },
};
exports.PrimaryNavigation = React.forwardRef(function (_a, ref) {
    var header = _a.header, headerMin = _a.headerMin, footer = _a.footer, children = _a.children, className = _a.className, toggleButtonText = _a.toggleButtonText, rootProps = __rest(_a, ["header", "headerMin", "footer", "children", "className", "toggleButtonText"]);
    var classes = (0, exports.useStyles)({});
    var _b = (0, LayoutManager_1.useLayoutManager)(), isSidebarCollapsed = _b.isSidebarCollapsed, toggleSidebarCollapsed = _b.toggleSidebarCollapsed, isSidebarCollapseDisabled = _b.isSidebarCollapseDisabled;
    var HANDLERS = {
        TOGGLE_SIDE_BAR: toggleSidebarCollapsed,
    };
    var showHeader = (headerMin && isSidebarCollapsed) || (header && !isSidebarCollapsed);
    return (React.createElement("nav", __assign({ ref: ref, className: (0, clsx_1.default)(classes.root, className), "aria-label": "Primary", role: "navigation" }, rootProps),
        showHeader && (React.createElement("div", __assign({ className: classes.header }, (0, getTestProps_1.getTestProps)(exports.testIds.headerRoot)),
            headerMin && isSidebarCollapsed && (React.createElement(framer_motion_1.motion.div, { "aria-label": "Navigation Header Section Collapsed", className: (0, clsx_1.default)(classes.headerContent, classes.headerContentMin), initial: { opacity: 0 }, animate: {
                    opacity: 1,
                    transition: { delay: 0.25, duration: 0.25 },
                } }, headerMin)),
            header && !isSidebarCollapsed && (React.createElement(framer_motion_1.motion.div, { "aria-label": "Navigation Header Section", className: (0, clsx_1.default)(classes.headerContent), initial: { opacity: 0 }, animate: {
                    opacity: 1,
                    transition: { delay: 0.2, duration: 0.25 },
                } }, header)))),
        React.createElement(framer_motion_1.motion.ul, { variants: NAV_LIST_TRANSITION_VARIANTS, animate: isSidebarCollapsed ? 'hide' : 'show', className: (0, clsx_1.default)(classes.navItems) }, children),
        !isSidebarCollapsed && !!footer && (React.createElement(framer_motion_1.motion.div, { initial: { opacity: 0 }, animate: { opacity: 1, transition: { duration: common_1.inDuration } }, exit: { opacity: 0, transition: { duration: common_1.outDuration } }, className: classes.footer }, footer)),
        !isSidebarCollapseDisabled && (React.createElement(react_hotkeys_1.GlobalHotKeys, { keyMap: KEY_MAP, handlers: HANDLERS },
            React.createElement("button", __assign({ className: classes.footToggle, onClick: toggleSidebarCollapsed, role: "checkbox", "aria-checked": isSidebarCollapsed }, (0, getTestProps_1.getTestProps)(exports.testIds.toggleButton)),
                React.createElement("span", { className: classes.footToggleContainer },
                    React.createElement(chromicons_1.Sidebar, { "aria-hidden": true })),
                React.createElement(framer_motion_1.motion.span, { className: classes.toggleText, animate: isSidebarCollapsed ? 'hide' : 'show', variants: SHARED_TRANSITION_VARIANTS }, toggleButtonText || 'Toggle Sidebar'))))));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJpbWFyeU5hdmlnYXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9QcmltYXJ5TmF2aWdhdGlvbi9QcmltYXJ5TmF2aWdhdGlvbi50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsOENBQXdCO0FBQ3hCLDJDQUErQjtBQUMvQiwrQ0FBOEM7QUFDOUMsbURBQStDO0FBQy9DLHVDQUEwQztBQUUxQyxrREFBMkU7QUFDM0UsNENBQTREO0FBQzVELCtDQUFpRDtBQUNqRCw2REFBNEQ7QUFFNUQsSUFBTSxPQUFPLEdBQUc7SUFDZCxlQUFlLEVBQUUsR0FBRztDQUNyQixDQUFDO0FBRVcsUUFBQSxPQUFPLEdBQUc7SUFDckIsWUFBWSxFQUFFLGdDQUFnQztJQUM5QyxVQUFVLEVBQUUsOEJBQThCO0NBQzNDLENBQUM7QUFFVyxRQUFBLDBCQUEwQixHQUFHLHlCQUF5QixDQUFDO0FBRXZELFFBQUEsU0FBUyxHQUFHLElBQUEsbUJBQVUsRUFDakMsVUFBQyxLQUFLLElBQUssT0FBQSxDQUFDO0lBQ1YsSUFBSSxFQUFFO1FBQ0osY0FBYyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztRQUN4QyxjQUFjLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ3ZDLGVBQWUsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7UUFDM0Msa0JBQWtCLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTTtRQUMvQyxhQUFhLEVBQUUsVUFBVTtRQUN6QixlQUFlLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSTtRQUN4QyxLQUFLLEVBQUUsbUJBQW1CO1FBQzFCLE9BQU8sRUFBRSxN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QyxvQkFBTywwQkFBZSxDQUNsQjtnQkFDUCxvQkFBQyxzQkFBTSxDQUFDLElBQUksSUFDVixTQUFTLEVBQUUsT0FBTyxDQUFDLFVBQVUsRUFDN0IsT0FBTyxFQUFFLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFDN0MsUUFBUSxFQUFFLDBCQUEwQixJQUVuQyxnQkFBZ0IsSUFBSSxnQkFBZ0IsQ0FDekIsQ0FDUCxDQUNLLENBQ2pCLENBQ0csQ0FDUCxDQUFDO0FBQ0osQ0FBQyxDQUNGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2xzeCBmcm9tICdjbHN4JztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEdsb2JhbEhvdEtleXMgfSBmcm9tICdyZWFjdC1ob3RrZXlzJztcbmltcG9ydCB7IFNpZGViYXIgfSBmcm9tICdAbGlmZW9taWMvY2hyb21pY29ucyc7XG5pbXBvcnQgeyBtYWtlU3R5bGVzIH0gZnJvbSAnLi4vLi4vc3R5bGVzJztcbmltcG9ydCB7IEdldENsYXNzZXMgfSBmcm9tICcuLi8uLi90eXBlVXRpbHMnO1xuaW1wb3J0IHsgc2lkZUJhcldpZHRoQ29sbGFwc2VkLCB1c2VMYXlvdXRNYW5hZ2VyIH0gZnJvbSAnLi4vTGF5b3V0TWFuYWdlcic7XG5pbXBvcnQgeyBpbkR1cmF0aW9uLCBvdXREdXJhdGlvbiB9IGZyb20gJy4vX3ByaXZhdGUvY29tbW9uJztcbmltcG9ydCB7IG1vdGlvbiwgVmFyaWFudHMgfSBmcm9tICdmcmFtZXItbW90aW9uJztcbmltcG9ydCB7IGdldFRlc3RQcm9wcyB9IGZyb20gJy4uLy4uL3Rlc3RVdGlscy9nZXRUZXN0UHJvcHMnO1xuXG5jb25zdCBLRVlfTUFQID0ge1xuICBUT0dHTEVfU0lERV9CQVI6ICdbJyxcbn07XG5cbmV4cG9ydCBjb25zdCB0ZXN0SWRzID0ge1xuICB0b2dnbGVCdXR0b246ICdwcmltYXJ5TmF2aWdhdGlvbi10b2dnbGVCdXR0b24nLFxuICBoZWFkZXJSb290OiAncHJpbWFyeU5hdmlnYXRpb24taGVhZGVyUm9vdCcsXG59O1xuXG5leHBvcnQgY29uc3QgUHJpbWFyeU5hdmlnYXRpb25TdHlsZXNLZXkgPSAnQ2hyb21hUHJpbWFyeU5hdmlnYXRpb24nO1xuXG5leHBvcnQgY29uc3QgdXNlU3R5bGVzID0gbWFrZVN0eWxlcyhcbiAgKHRoZW1lKSA9PiAoe1xuICAgIHJvb3Q6IHtcbiAgICAgICctLWxpbmstY29sb3InOiB0aGVtZS5wYWxldHRlLmJsYWNrWzMwMF0sXG4gICAgICAnLS1saW5rLWhvdmVyJzogdGhlbWUucGFsZXR0ZS5ibGFja1s1MF0sXG4gICAgICAnLS1saW5rLWFjdGl2ZSc6IHRoZW1lLnBhbGV0dGUucHJpbWFyeVszMDBdLFxuICAgICAgJy0tbGluay1hY3RpdmUtYmcnOiB0aGVtZS5wYWxldHRlLmFjdGlvbi5hY3RpdmUsXG4gICAgICAnLS1saW5rLXNpemUnOiAnMC44NzVyZW0nLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5wYWxldHRlLmdyZXkubWFpbixcbiAgICAgIGNvbG9yOiAndmFyKC0tbGluay1jb2xvciknLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgcGFkZGluZ1RvcDogdGhlbWUuc3BhY2luZygxLjUpLFxuICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG4gICAgICBvdmVyZmxvd1g6ICdoaWRkZW4nLFxuICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgZmFsbGJhY2tzOiB7XG4gICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmJsYWNrWzMwMF0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgaGVhZGVyOiB7XG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuICAgICAgaGVpZ2h0OiB0aGVtZS5weFRvUmVtKDMyKSxcbiAgICAgIGZsZXg6ICcwIDAgYXV0bycsXG4gICAgICBtYXJnaW5Ub3A6IHRoZW1lLnNwYWNpbmcoMC41KSxcbiAgICAgIG1hcmdpbkJvdHRvbTogdGhlbWUuc3BhY2luZygxLjI1KSxcbiAgICB9LFxuICAgIGhlYWRlckNvbnRlbnQ6IHtcbiAgICAgIGZsZXg6ICcxIDEgYXV0bycsXG4gICAgICBwYWRkaW5nTGVmdDogdGhlbWUuc3BhY2luZygyLjI1KSxcbiAgICAgIHBhZGRpbmdSaWdodDogdGhlbWUuc3BhY2luZygyLjI1KSxcbiAgICB9LFxuICAgIGhlYWRlckNvbnRlbnRNaW46IHtcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICBwYWRkaW5nTGVmdDogMCxcbiAgICAgIHBhZGRpbmdSaWdodDogMCxcbiAgICB9LFxuICAgIGhlYWRlckNvbnRlbnRIaWRkZW46IHtcbiAgICAgIGRpc3BsYXk6ICdub25lJyxcbiAgICB9LFxuICAgIHRvZ2dsZUJ1dHRvbjoge1xuICAgICAgd2lkdGg6IHNpZGVCYXJXaWR0aENvbGxhcHNlZCxcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgZmxleDogJzAgMCBhdXRvJyxcbiAgICAgIG9wYWNpdHk6IDAuMyxcbiAgICB9LFxuICAgIG5hdkl0ZW1zOiB7XG4gICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgIG92ZXJmbG93WDogJ2hpZGRlbicsXG4gICAgICBmbGV4OiAnMSAxIDEwMHB4JyxcbiAgICAgIGxpc3RTdHlsZTogJ25vbmUnLFxuICAgICAgcGFkZGluZzogMCxcbiAgICAgIG1hcmdpbjogMCxcbiAgICB9LFxuICAgIGZvb3Rlcjoge1xuICAgICAgZmxleDogJzAgMCBhdXRvJyxcbiAgICAgIG1hcmdpblRvcDogdGhlbWUuc3BhY2luZygyKSxcbiAgICAgIG1hcmdpbkJvdHRvbTogdGhlbWUuc3BhY2luZygyKSxcbiAgICAgIHBhZGRpbmdMZWZ0OiB0aGVtZS5zcGFjaW5nKDIuNzUpLFxuICAgICAgcGFkZGluZ1JpZ2h0OiB0aGVtZS5zcGFjaW5nKDIuNzUpLFxuICAgIH0sXG4gICAgZm9vdFRvZ2dsZToge1xuICAgICAgYWxpZ25JdGVtczogJ2ZsZXgtc3RhcnQnLFxuICAgICAgYmFja2dyb3VuZDogJ3RyYW5zcGFyZW50IG5vbmUnLFxuICAgICAgYm9yZGVyOiAwLFxuICAgICAgY29sb3I6ICd2YXIoLS1saW5rLWNvbG9yKScsXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBmb250RmFtaWx5OiB0aGVtZS50eXBvZ3JhcGh5LmZvbnRGYW1pbHksXG4gICAgICBmb250U2l6ZTogJ3ZhcigtLWxpbmstc2l6ZSknLFxuICAgICAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LXN0YXJ0JyxcbiAgICAgIGxldHRlclNwYWNpbmc6IDAuMTUsXG4gICAgICBwYWRkaW5nOiB0aGVtZS5zcGFjaW5nKDEsIDIuMjUsIDIpLFxuICAgICAgdGV4dEFsaWduOiAnbGVmdCcsXG4gICAgICB0cmFuc2l0aW9uOiAnY29sb3IgMC41cyBlYXNlJyxcbiAgICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnLFxuICAgICAgJyY6aG92ZXInOiB7XG4gICAgICAgIGNvbG9yOiAndmFyKC0tbGluay1ob3ZlciknLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgIH0sXG4gICAgICAnJlthcmlhLWNoZWNrZWQ9dHJ1ZV0nOiB7XG4gICAgICAgIGNvbG9yOiAndmFyKC0tbGluay1hY3RpdmUpJyxcbiAgICAgIH0sXG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGZvb3RUb2dnbGVDb250YWluZXI6IHtcbiAgICAgIHdpZHRoOiB0aGVtZS5weFRvUmVtKDI0KSxcbiAgICAgIGhlaWdodDogdGhlbWUucHhUb1JlbSgyNCksXG4gICAgfSxcbiAgICB0b2dnbGVUZXh0OiB7XG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIG1hcmdpbkxlZnQ6IHRoZW1lLnNwYWNpbmcoMi4yNSksXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHRvcDogdGhlbWUuc3BhY2luZygwLjI1KSxcbiAgICB9LFxuICB9KSxcbiAge1xuICAgIG5hbWU6IFByaW1hcnlOYXZpZ2F0aW9uU3R5bGVzS2V5LFxuICB9XG4pO1xuXG5jb25zdCBOQVZfTElTVF9UUkFOU0lUSU9OX1ZBUklBTlRTOiBWYXJpYW50cyA9IHtcbiAgaGlkZToge30sXG4gIHNob3c6IHtcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBzdGFnZ2VyQ2hpbGRyZW46IDAuMDQsXG4gICAgICBkZWxheUNoaWxkcmVuOiAwLjEyNSxcbiAgICB9LFxuICB9LFxufTtcblxuY29uc3QgU0hBUkVEX1RSQU5TSVRJT05fVkFSSUFOVFM6IFZhcmlhbnRzID0ge1xuICBoaWRlOiB7IG9wYWNpdHk6IDAgfSxcbiAgc2hvdzoge1xuICAgIG9wYWNpdHk6IDEsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDAuMyxcbiAgICB9LFxuICB9LFxufTtcblxuZXhwb3J0IHR5cGUgUHJpbWFyeU5hdmlnYXRpb25DbGFzc2VzID0gR2V0Q2xhc3Nlczx0eXBlb2YgdXNlU3R5bGVzPjtcblxuZXhwb3J0IGludGVyZmFjZSBQcmltYXJ5TmF2aWdhdGlvblByb3BzXG4gIGV4dGVuZHMgUmVhY3QuRGV0YWlsZWRIVE1MUHJvcHM8XG4gICAgUmVhY3QuSFRNTEF0dHJpYnV0ZXM8SFRNTEVsZW1lbnQ+LFxuICAgIEhUTUxFbGVtZW50XG4gID4ge1xuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZTtcbiAgaGVhZGVyPzogUmVhY3QuUmVhY3ROb2RlO1xuICBoZWFkZXJNaW4/OiBSZWFjdC5SZWFjdE5vZGU7XG4gIGZvb3Rlcj86IFJlYWN0LlJlYWN0Tm9kZTtcbiAgdG9nZ2xlQnV0dG9uVGV4dD86IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IFByaW1hcnlOYXZpZ2F0aW9uID0gUmVhY3QuZm9yd2FyZFJlZjxcbiAgSFRNTEVsZW1lbnQsXG4gIFByaW1hcnlOYXZpZ2F0aW9uUHJvcHNcbj4oXG4gIChcbiAgICB7XG4gICAgICBoZWFkZXIsXG4gICAgICBoZWFkZXJNaW4sXG4gICAgICBmb290ZXIsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIHRvZ2dsZUJ1dHRvblRleHQsXG4gICAgICAuLi5yb290UHJvcHNcbiAgICB9LFxuICAgIHJlZlxuICApID0+IHtcbiAgICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKHt9KTtcbiAgICBjb25zdCB7XG4gICAgICBpc1NpZGViYXJDb2xsYXBzZWQsXG4gICAgICB0b2dnbGVTaWRlYmFyQ29sbGFwc2VkLFxuICAgICAgaXNTaWRlYmFyQ29sbGFwc2VEaXNhYmxlZCxcbiAgICB9ID0gdXNlTGF5b3V0TWFuYWdlcigpO1xuXG4gICAgY29uc3QgSEFORExFUlMgPSB7XG4gICAgICBUT0dHTEVfU0lERV9CQVI6IHRvZ2dsZVNpZGViYXJDb2xsYXBzZWQsXG4gICAgfTtcblxuICAgIGNvbnN0IHNob3dIZWFkZXIgPVxuICAgICAgKGhlYWRlck1pbiAmJiBpc1NpZGViYXJDb2xsYXBzZWQpIHx8IChoZWFkZXIgJiYgIWlzU2lkZWJhckNvbGxhcHNlZCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPG5hdlxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgY2xhc3NOYW1lPXtjbHN4KGNsYXNzZXMucm9vdCwgY2xhc3NOYW1lKX1cbiAgICAgICAgYXJpYS1sYWJlbD1cIlByaW1hcnlcIlxuICAgICAgICByb2xlPVwibmF2aWdhdGlvblwiXG4gICAgICAgIHsuLi5yb290UHJvcHN9XG4gICAgICA+XG4gICAgICAgIHsvKiBIZWFkZXIgd2l0aCBvcHRpb25hbCBoZWFkZXIgY29udGVudCAqL31cbiAgICAgICAge3Nob3dIZWFkZXIgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmhlYWRlcn0gey4uLmdldFRlc3RQcm9wcyh0ZXN0SWRzLmhlYWRlclJvb3QpfT5cbiAgICAgICAgICAgIHtoZWFkZXJNaW4gJiYgaXNTaWRlYmFyQ29sbGFwc2VkICYmIChcbiAgICAgICAgICAgICAgPG1vdGlvbi5kaXZcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiTmF2aWdhdGlvbiBIZWFkZXIgU2VjdGlvbiBDb2xsYXBzZWRcIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgICAgICAgIGNsYXNzZXMuaGVhZGVyQ29udGVudCxcbiAgICAgICAgICAgICAgICAgIGNsYXNzZXMuaGVhZGVyQ29udGVudE1pblxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgaW5pdGlhbD17eyBvcGFjaXR5OiAwIH19XG4gICAgICAgICAgICAgICAgYW5pbWF0ZT17e1xuICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHsgZGVsYXk6IDAuMjUsIGR1cmF0aW9uOiAwLjI1IH0sXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtoZWFkZXJNaW59XG4gICAgICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7aGVhZGVyICYmICFpc1NpZGViYXJDb2xsYXBzZWQgJiYgKFxuICAgICAgICAgICAgICA8bW90aW9uLmRpdlxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJOYXZpZ2F0aW9uIEhlYWRlciBTZWN0aW9uXCJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goY2xhc3Nlcy5oZWFkZXJDb250ZW50KX1cbiAgICAgICAgICAgICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAgfX1cbiAgICAgICAgICAgICAgICBhbmltYXRlPXt7XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogeyBkZWxheTogMC4yLCBkdXJhdGlvbjogMC4yNSB9LFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7aGVhZGVyfVxuICAgICAgICAgICAgICA8L21vdGlvbi5kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuXG4gICAgICAgIHsvKiBOYXYgaXRlbXMgYXJlIHJlbmRlcmVkIGFzIGNoaWxkcmVuIGluIGEgdWwgICovfVxuICAgICAgICA8bW90aW9uLnVsXG4gICAgICAgICAgdmFyaWFudHM9e05BVl9MSVNUX1RSQU5TSVRJT05fVkFSSUFOVFN9XG4gICAgICAgICAgYW5pbWF0ZT17aXNTaWRlYmFyQ29sbGFwc2VkID8gJ2hpZGUnIDogJ3Nob3cnfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChjbGFzc2VzLm5hdkl0ZW1zKX1cbiAgICAgICAgPlxuICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9tb3Rpb24udWw+XG5cbiAgICAgICAgey8qIE9wdGlvbmFsIGZvb3RlciBzZWN0aW9uICovfVxuICAgICAgICB7IWlzU2lkZWJhckNvbGxhcHNlZCAmJiAhIWZvb3RlciAmJiAoXG4gICAgICAgICAgPG1vdGlvbi5kaXZcbiAgICAgICAgICAgIGluaXRpYWw9e3sgb3BhY2l0eTogMCB9fVxuICAgICAgICAgICAgYW5pbWF0ZT17eyBvcGFjaXR5OiAxLCB0cmFuc2l0aW9uOiB7IGR1cmF0aW9uOiBpbkR1cmF0aW9uIH0gfX1cbiAgICAgICAgICAgIGV4aXQ9e3sgb3BhY2l0eTogMCwgdHJhbnNpdGlvbjogeyBkdXJhdGlvbjogb3V0RHVyYXRpb24gfSB9fVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc2VzLmZvb3Rlcn1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7Zm9vdGVyfVxuICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogVmVyeSBib3R0b20gdG9nZ2xlIHNlY3Rpb24gKi99XG4gICAgICAgIHshaXNTaWRlYmFyQ29sbGFwc2VEaXNhYmxlZCAmJiAoXG4gICAgICAgICAgPEdsb2JhbEhvdEtleXMga2V5TWFwPXtLRVlfTUFQfSBoYW5kbGVycz17SEFORExFUlN9PlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMuZm9vdFRvZ2dsZX1cbiAgICAgICAgICAgICAgb25DbGljaz17dG9nZ2xlU2lkZWJhckNvbGxhcHNlZH1cbiAgICAgICAgICAgICAgcm9sZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgYXJpYS1jaGVja2VkPXtpc1NpZGViYXJDb2xsYXBzZWR9XG4gICAgICAgICAgICAgIHsuLi5nZXRUZXN0UHJvcHModGVzdElkcy50b2dnbGVCdXR0b24pfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2NsYXNzZXMuZm9vdFRvZ2dsZUNvbnRhaW5lcn0+XG4gICAgICAgICAgICAgICAgPFNpZGViYXIgYXJpYS1oaWRkZW4gLz5cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8bW90aW9uLnNwYW5cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMudG9nZ2xlVGV4dH1cbiAgICAgICAgICAgICAgICBhbmltYXRlPXtpc1NpZGViYXJDb2xsYXBzZWQgPyAnaGlkZScgOiAnc2hvdyd9XG4gICAgICAgICAgICAgICAgdmFyaWFudHM9e1NIQVJFRF9UUkFOU0lUSU9OX1ZBUklBTlRTfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3RvZ2dsZUJ1dHRvblRleHQgfHwgJ1RvZ2dsZSBTaWRlYmFyJ31cbiAgICAgICAgICAgICAgPC9tb3Rpb24uc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvR2xvYmFsSG90S2V5cz5cbiAgICAgICAgKX1cbiAgICAgIDwvbmF2PlxuICAgICk7XG4gIH1cbik7XG4iXX0=