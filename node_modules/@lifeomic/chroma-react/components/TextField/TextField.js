"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
var clsx_1 = __importDefault(require("clsx"));
var React = __importStar(require("react"));
var styles_1 = require("../../styles");
var forms_1 = require("../_private/forms");
var UniqueId_1 = require("../_private/UniqueId");
var Tooltip_1 = require("../Tooltip");
exports.TextFieldStylesKey = 'ChromaTextField';
exports.useStyles = styles_1.makeStyles(function (theme) { return ({
    root: {},
    label: {
        alignItems: 'center',
        color: theme.palette.black[800],
        display: 'flex',
        fontSize: theme.pxToRem(14),
        fontWeight: theme.typography.fontWeightBold,
        marginBottom: theme.spacing(1),
        '&:empty': {
            marginBottom: theme.spacing(0),
        },
    },
    labelIcon: {
        marginLeft: theme.spacing(0.75),
        color: theme.palette.primary.main,
    },
    labelIconInverse: {
        mixBlendMode: 'screen',
    },
    labelSecondary: {
        color: theme.palette.text.hint,
        fontSize: theme.pxToRem(11),
        display: 'inline-block',
        margin: theme.spacing(0, 0.75),
    },
    labelInverse: {
        color: theme.palette.common.white,
        '&$labelSecondary': {
            opacity: 0.9,
        },
    },
    input: {
        backgroundColor: 'rgba(132, 137, 166, 0.15)',
        border: "1px solid transparent",
        borderRadius: theme.pxToRem(4),
        color: theme.palette.text.primary,
        fontFamily: theme.typography.fontFamily,
        fontSize: theme.pxToRem(14),
        minWidth: theme.pxToRem(175),
        lineHeight: 1.25,
        paddingBottom: theme.spacing(1),
        paddingLeft: theme.spacing(1.25),
        paddingRight: theme.spacing(1.25),
        paddingTop: theme.spacing(1),
        transition: 'border 0.25s ease',
        '&:focus': {
            outline: 'none',
            backgroundColor: 'rgba(255, 255, 255, 0.5)',
            border: "1px solid rgba(132, 137, 166, 0.45)",
        },
        '&:disabled': {
            cursor: 'not-allowed',
            opacity: 0.625,
        },
        '&:read-only': {
            cursor: 'not-allowed',
            opacity: 0.9,
            '&:focus': {
                backgroundColor: 'rgba(132, 137, 166, 0.15)',
                border: "1px solid transparent",
            }
        },
        '&::-webkit-input-placeholder': {
            color: theme.palette.black[400],
        },
        '&::-moz-placeholder': {
            color: theme.palette.black[400],
        },
        '&:-ms-input-placeholder': {
            color: theme.palette.black[400],
        },
        '&:-moz-placeholder': {
            color: theme.palette.black[400],
        },
    },
    inputInverse: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        color: theme.palette.common.white,
        '&:focus': {
            backgroundColor: 'rgba(230, 231, 237, 0.1)',
            border: "1px solid rgba(230, 231, 237, 0.55)",
        },
        '&:read-only': {
            opacity: 1,
            '&:focus': {
                backgroundColor: 'rgba(230, 231, 237, 0.1)',
            }
        },
        '&::-webkit-input-placeholder': {
            color: 'rgba(255, 255, 255, 0.8)',
        },
        '&::-moz-placeholder': {
            color: 'rgba(255, 255, 255, 0.8)',
        },
        '&:-ms-input-placeholder': {
            color: 'rgba(255, 255, 255, 0.8)',
        },
        '&:-moz-placeholder': {
            color: 'rgba(255, 255, 255, 0.8)',
        },
    },
    hasTrailer: {
        marginBottom: theme.spacing(0.5),
    },
    inputError: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        border: "1px solid " + theme.palette.error.main,
        '&:focus': {
            border: "1px solid " + theme.palette.error.main,
        },
    },
    inputErrorInverse: {
        border: "1px solid " + theme.palette.error[700],
    },
    inputFullWidth: {
        width: '100%',
    },
    trailerMessage: {
        marginTop: theme.spacing(0.875),
        marginLeft: 0,
    },
    errorMessage: {
        color: theme.palette.error.main,
        fontSize: theme.typography.caption.fontSize,
        fontWeight: theme.typography.fontWeightBold,
    },
    errorMessageInverse: {
        mixBlendMode: 'color-dodge',
    },
    helpMessage: {
        fontSize: theme.typography.caption.fontSize,
        color: theme.palette.text.hint,
    },
    helpMessageInverse: {
        color: theme.palette.common.white,
    },
    tooltipContainer: {
        display: 'flex',
        outline: 'none',
    },
}); }, { name: exports.TextFieldStylesKey });
exports.TextField = React.forwardRef(function (_a, ref) {
    var _b;
    var ariaLabel = _a["aria-label"], className = _a.className, _c = _a.color, color = _c === void 0 ? 'default' : _c, errorMessage = _a.errorMessage, fullWidth = _a.fullWidth, hasError = _a.hasError, helpMessage = _a.helpMessage, Icon = _a.icon, id = _a.id, label = _a.label, name = _a.name, secondaryLabel = _a.secondaryLabel, tooltipMessage = _a.tooltipMessage, rootProps = __rest(_a, ['aria-label', "className", "color", "errorMessage", "fullWidth", "hasError", "helpMessage", "icon", "id", "label", "name", "secondaryLabel", "tooltipMessage"]);
    var classes = exports.useStyles({});
    var uniqueId = React.useState(function () { return id || name || UniqueId_1.generateUniqueId('textField-'); })[0];
    if (!label && !ariaLabel && process.env.NODE_ENV === 'development') {
        throw new Error('If a "label" is not provided to TextField, please provide "aria-label".');
    }
    return (React.createElement("div", { className: clsx_1.default(classes.root, className) },
        label && (React.createElement("label", { className: clsx_1.default(classes.label, color === 'inverse' && classes.labelInverse), htmlFor: uniqueId },
            label,
            !!Icon && tooltipMessage && (React.createElement(Tooltip_1.Tooltip, { title: tooltipMessage },
                React.createElement("span", { className: classes.tooltipContainer },
                    React.createElement(Icon, { className: clsx_1.default(classes.labelIcon, color === 'inverse' && classes.labelIconInverse), width: 16, height: 16, role: "img", "aria-hidden": true })))),
            secondaryLabel && (React.createElement("span", { className: clsx_1.default(classes.labelSecondary, color === 'inverse' && classes.labelInverse) }, secondaryLabel)))),
        React.createElement("input", __assign({ "aria-describedby": forms_1.buildDescribedBy({
                hasError: hasError,
                hasHelpMessage: !!helpMessage,
                uniqueId: uniqueId,
            }), "aria-label": ariaLabel, ref: ref, className: clsx_1.default(classes.input, fullWidth && classes.inputFullWidth, hasError && classes.inputError, hasError && color === 'inverse' && classes.inputErrorInverse, (_b = {},
                _b[classes.inputInverse] = color === 'inverse',
                _b)), type: "text", id: uniqueId, name: name }, rootProps)),
        helpMessage && (React.createElement(forms_1.FormHelpMessage, { color: color, className: clsx_1.default(classes.trailerMessage, classes.helpMessage, color === 'inverse' && classes.helpMessageInverse), rootElementId: uniqueId, describedById: forms_1.helpFor(uniqueId) }, helpMessage)),
        hasError && errorMessage && (React.createElement(forms_1.FormErrorMessage, { color: color, className: clsx_1.default(classes.trailerMessage), rootElementId: uniqueId, describedById: forms_1.errorFor(uniqueId) }, errorMessage))));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGV4dEZpZWxkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVGV4dEZpZWxkL1RleHRGaWVsZC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDhDQUF3QjtBQUN4QiwyQ0FBK0I7QUFDL0IsdUNBQTBDO0FBRTFDLDJDQU8yQjtBQUMzQixpREFBd0Q7QUFDeEQsc0NBQXFDO0FBRXhCLFFBQUEsa0JBQWtCLEdBQUcsaUJBQWlCLENBQUM7QUFFdkMsUUFBQSxTQUFTLEdBQUcsbUJBQVUsQ0FDakMsVUFBQyxLQUFLLElBQUssT0FBQSxDQUFDO0lBQ1YsSUFBSSxFQUFFLEVBQUU7SUFDUixLQUFLLEVBQUU7UUFDTCxVQUFVLEVBQUUsUUFBUTtRQUNwQixLQUFLLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1FBQy9CLE9BQU8sRUFBRSxNQUFNO1FBQ2YsUUFBUSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQzNCLFVBQVUsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLGNBQWM7UUFDM0MsWUFBWSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQzlCLFNBQVMsRUFBRTtZQUNULFlBQVksRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztTQUMvQjtLQUNGO0lBQ0QsU0FBUyxFQUFFO1FBQ1QsVUFBVSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1FBQy9CLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJO0tBQ2xDO0lBQ0QsZ0JBQWdCLEVBQUU7UUFDaEIsWUFBWSxFQUFFLFFBQVE7S0FDdkI7SUFDRCxjQUFjLEVBQUU7UUFDZCxLQUFLLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFB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SSxDQUNuQjtRQUNBLFFBQVEsSUFBSSxZQUFZLElBQUksQ0FDM0Isb0JBQUMsd0JBQWdCLElBQ2YsS0FBSyxFQUFFLEtBQUssRUFDWixTQUFTLEVBQUUsY0FBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsRUFDdkMsYUFBYSxFQUFFLFFBQVEsRUFDdkIsYUFBYSxFQUFFLGdCQUFRLENBQUMsUUFBUSxDQUFDLElBRWhDLFlBQVksQ0FDSSxDQUNwQixDQUNHLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FDRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNsc3ggZnJvbSAnY2xzeCc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtYWtlU3R5bGVzIH0gZnJvbSAnLi4vLi4vc3R5bGVzJztcbmltcG9ydCB7IEdldENsYXNzZXMgfSBmcm9tICcuLi8uLi90eXBlVXRpbHMnO1xuaW1wb3J0IHtcbiAgQmFzZUZvcm1FbGVtZW50LFxuICBidWlsZERlc2NyaWJlZEJ5LFxuICBlcnJvckZvcixcbiAgRm9ybUVycm9yTWVzc2FnZSxcbiAgRm9ybUhlbHBNZXNzYWdlLFxuICBoZWxwRm9yLFxufSBmcm9tICcuLi9fcHJpdmF0ZS9mb3Jtcyc7XG5pbXBvcnQgeyBnZW5lcmF0ZVVuaXF1ZUlkIH0gZnJvbSAnLi4vX3ByaXZhdGUvVW5pcXVlSWQnO1xuaW1wb3J0IHsgVG9vbHRpcCB9IGZyb20gJy4uL1Rvb2x0aXAnO1xuXG5leHBvcnQgY29uc3QgVGV4dEZpZWxkU3R5bGVzS2V5ID0gJ0Nocm9tYVRleHRGaWVsZCc7XG5cbmV4cG9ydCBjb25zdCB1c2VTdHlsZXMgPSBtYWtlU3R5bGVzKFxuICAodGhlbWUpID0+ICh7XG4gICAgcm9vdDoge30sXG4gICAgbGFiZWw6IHtcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuYmxhY2tbODAwXSxcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGZvbnRTaXplOiB0aGVtZS5weFRvUmVtKDE0KSxcbiAgICAgIGZvbnRXZWlnaHQ6IHRoZW1lLnR5cG9ncmFwaHkuZm9udFdlaWdodEJvbGQsXG4gICAgICBtYXJnaW5Cb3R0b206IHRoZW1lLnNwYWNpbmcoMSksXG4gICAgICAnJjplbXB0eSc6IHtcbiAgICAgICAgbWFyZ2luQm90dG9tOiB0aGVtZS5zcGFjaW5nKDApLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxhYmVsSWNvbjoge1xuICAgICAgbWFyZ2luTGVmdDogdGhlbWUuc3BhY2luZygwLjc1KSxcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnByaW1hcnkubWFpbixcbiAgICB9LFxuICAgIGxhYmVsSWNvbkludmVyc2U6IHtcbiAgICAgIG1peEJsZW5kTW9kZTogJ3NjcmVlbicsXG4gICAgfSxcbiAgICBsYWJlbFNlY29uZGFyeToge1xuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUudGV4dC5oaW50LFxuICAgICAgZm9udFNpemU6IHRoZW1lLnB4VG9SZW0oMTEpLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBtYXJnaW46IHRoZW1lLnNwYWNpbmcoMCwgMC43NSksXG4gICAgfSxcbiAgICBsYWJlbEludmVyc2U6IHtcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgICcmJGxhYmVsU2Vjb25kYXJ5Jzoge1xuICAgICAgICBvcGFjaXR5OiAwLjksXG4gICAgICB9LFxuICAgIH0sXG4gICAgaW5wdXQ6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMTMyLCAxMzcsIDE2NiwgMC4xNSknLFxuICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkIHRyYW5zcGFyZW50YCxcbiAgICAgIGJvcmRlclJhZGl1czogdGhlbWUucHhUb1JlbSg0KSxcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnRleHQucHJpbWFyeSxcbiAgICAgIGZvbnRGYW1pbHk6IHRoZW1lLnR5cG9ncmFwaHkuZm9udEZhbWlseSxcbiAgICAgIGZvbnRTaXplOiB0aGVtZS5weFRvUmVtKDE0KSxcbiAgICAgIG1pbldpZHRoOiB0aGVtZS5weFRvUmVtKDE3NSksXG4gICAgICBsaW5lSGVpZ2h0OiAxLjI1LFxuICAgICAgcGFkZGluZ0JvdHRvbTogdGhlbWUuc3BhY2luZygxKSxcbiAgICAgIHBhZGRpbmdMZWZ0OiB0aGVtZS5zcGFjaW5nKDEuMjUpLFxuICAgICAgcGFkZGluZ1JpZ2h0OiB0aGVtZS5zcGFjaW5nKDEuMjUpLFxuICAgICAgcGFkZGluZ1RvcDogdGhlbWUuc3BhY2luZygxKSxcbiAgICAgIHRyYW5zaXRpb246ICdib3JkZXIgMC4yNXMgZWFzZScsXG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSknLFxuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgcmdiYSgxMzIsIDEzNywgMTY2LCAwLjQ1KWAsXG4gICAgICB9LFxuICAgICAgJyY6ZGlzYWJsZWQnOiB7XG4gICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJyxcbiAgICAgICAgb3BhY2l0eTogMC42MjUsXG4gICAgICB9LFxuICAgICAgJyY6cmVhZC1vbmx5Jzoge1xuICAgICAgICBjdXJzb3I6ICdub3QtYWxsb3dlZCcsXG4gICAgICAgIG9wYWNpdHk6IDAuOSxcbiAgICAgICAgJyY6Zm9jdXMnOiB7XG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgxMzIsIDEzNywgMTY2LCAwLjE1KScsXG4gICAgICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkIHRyYW5zcGFyZW50YCxcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICcmOjotd2Via2l0LWlucHV0LXBsYWNlaG9sZGVyJzoge1xuICAgICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5ibGFja1s0MDBdLFxuICAgICAgfSxcbiAgICAgICcmOjotbW96LXBsYWNlaG9sZGVyJzoge1xuICAgICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5ibGFja1s0MDBdLFxuICAgICAgfSxcbiAgICAgICcmOi1tcy1pbnB1dC1wbGFjZWhvbGRlcic6IHtcbiAgICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuYmxhY2tbNDAwXSxcbiAgICAgIH0sXG4gICAgICAnJjotbW96LXBsYWNlaG9sZGVyJzoge1xuICAgICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5ibGFja1s0MDBdLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGlucHV0SW52ZXJzZToge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyMzAsIDIzMSwgMjM3LCAwLjEpJyxcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDIzMCwgMjMxLCAyMzcsIDAuMSknLFxuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgcmdiYSgyMzAsIDIzMSwgMjM3LCAwLjU1KWAsXG4gICAgICB9LFxuICAgICAgJyY6cmVhZC1vbmx5Jzoge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDIzMCwgMjMxLCAyMzcsIDAuMSknLFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJyY6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXInOiB7XG4gICAgICAgIGNvbG9yOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpJyxcbiAgICAgIH0sXG4gICAgICAnJjo6LW1vei1wbGFjZWhvbGRlcic6IHtcbiAgICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCknLFxuICAgICAgfSxcbiAgICAgICcmOi1tcy1pbnB1dC1wbGFjZWhvbGRlcic6IHtcbiAgICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCknLFxuICAgICAgfSxcbiAgICAgICcmOi1tb3otcGxhY2Vob2xkZXInOiB7XG4gICAgICAgIGNvbG9yOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBoYXNUcmFpbGVyOiB7XG4gICAgICBtYXJnaW5Cb3R0b206IHRoZW1lLnNwYWNpbmcoMC41KSxcbiAgICB9LFxuICAgIGlucHV0RXJyb3I6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjMwLCAyMzEsIDIzNywgMC4xKScsXG4gICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5wYWxldHRlLmVycm9yLm1haW59YCxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5wYWxldHRlLmVycm9yLm1haW59YCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBpbnB1dEVycm9ySW52ZXJzZToge1xuICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5lcnJvcls3MDBdfWAsXG4gICAgfSxcbiAgICBpbnB1dEZ1bGxXaWR0aDoge1xuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICB9LFxuICAgIHRyYWlsZXJNZXNzYWdlOiB7XG4gICAgICBtYXJnaW5Ub3A6IHRoZW1lLnNwYWNpbmcoMC44NzUpLFxuICAgICAgbWFyZ2luTGVmdDogMCxcbiAgICB9LFxuICAgIGVycm9yTWVzc2FnZToge1xuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuZXJyb3IubWFpbixcbiAgICAgIGZvbnRTaXplOiB0aGVtZS50eXBvZ3JhcGh5LmNhcHRpb24uZm9udFNpemUsXG4gICAgICBmb250V2VpZ2h0OiB0aGVtZS50eXBvZ3JhcGh5LmZvbnRXZWlnaHRCb2xkLFxuICAgIH0sXG4gICAgZXJyb3JNZXNzYWdlSW52ZXJzZToge1xuICAgICAgbWl4QmxlbmRNb2RlOiAnY29sb3ItZG9kZ2UnLFxuICAgIH0sXG4gICAgaGVscE1lc3NhZ2U6IHtcbiAgICAgIGZvbnRTaXplOiB0aGVtZS50eXBvZ3JhcGh5LmNhcHRpb24uZm9udFNpemUsXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS50ZXh0LmhpbnQsXG4gICAgfSxcbiAgICBoZWxwTWVzc2FnZUludmVyc2U6IHtcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICB9LFxuICAgIHRvb2x0aXBDb250YWluZXI6IHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICB9LFxuICB9KSxcbiAgeyBuYW1lOiBUZXh0RmllbGRTdHlsZXNLZXkgfVxuKTtcblxuZXhwb3J0IHR5cGUgVGV4dEZpZWxkQ2xhc3NlcyA9IEdldENsYXNzZXM8dHlwZW9mIHVzZVN0eWxlcz47XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dEZpZWxkUHJvcHNcbiAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnRQcm9wc1dpdGhvdXRSZWY8J2lucHV0Jz4ge1xuICBjb2xvcj86IEJhc2VGb3JtRWxlbWVudFsnY29sb3InXTtcbiAgZXJyb3JNZXNzYWdlPzogQmFzZUZvcm1FbGVtZW50WydlcnJvck1lc3NhZ2UnXTtcbiAgZnVsbFdpZHRoPzogYm9vbGVhbjtcbiAgaGFzRXJyb3I/OiBCYXNlRm9ybUVsZW1lbnRbJ2hhc0Vycm9yJ107XG4gIGhlbHBNZXNzYWdlPzogQmFzZUZvcm1FbGVtZW50WydoZWxwTWVzc2FnZSddO1xuICBpY29uPzogUmVhY3QuQ29tcG9uZW50VHlwZTxSZWFjdC5TVkdQcm9wczxTVkdTVkdFbGVtZW50Pj47XG4gIGxhYmVsPzogQmFzZUZvcm1FbGVtZW50WydsYWJlbCddO1xuICBzZWNvbmRhcnlMYWJlbD86IHN0cmluZztcbiAgdG9vbHRpcE1lc3NhZ2U/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBUZXh0RmllbGQgPSBSZWFjdC5mb3J3YXJkUmVmPEhUTUxJbnB1dEVsZW1lbnQsIFRleHRGaWVsZFByb3BzPihcbiAgKFxuICAgIHtcbiAgICAgIFsnYXJpYS1sYWJlbCddOiBhcmlhTGFiZWwsXG4gICAgICBjbGFzc05hbWUsXG4gICAgICBjb2xvciA9ICdkZWZhdWx0JyxcbiAgICAgIGVycm9yTWVzc2FnZSxcbiAgICAgIGZ1bGxXaWR0aCxcbiAgICAgIGhhc0Vycm9yLFxuICAgICAgaGVscE1lc3NhZ2UsXG4gICAgICBpY29uOiBJY29uLFxuICAgICAgaWQsXG4gICAgICBsYWJlbCxcbiAgICAgIG5hbWUsXG4gICAgICBzZWNvbmRhcnlMYWJlbCxcbiAgICAgIHRvb2x0aXBNZXNzYWdlLFxuICAgICAgLi4ucm9vdFByb3BzXG4gICAgfSxcbiAgICByZWZcbiAgKSA9PiB7XG4gICAgY29uc3QgY2xhc3NlcyA9IHVzZVN0eWxlcyh7fSk7XG5cbiAgICBjb25zdCBbdW5pcXVlSWRdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihcbiAgICAgICgpID0+IGlkIHx8IG5hbWUgfHwgZ2VuZXJhdGVVbmlxdWVJZCgndGV4dEZpZWxkLScpXG4gICAgKTtcblxuICAgIGlmICghbGFiZWwgJiYgIWFyaWFMYWJlbCAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnSWYgYSBcImxhYmVsXCIgaXMgbm90IHByb3ZpZGVkIHRvIFRleHRGaWVsZCwgcGxlYXNlIHByb3ZpZGUgXCJhcmlhLWxhYmVsXCIuJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Nsc3goY2xhc3Nlcy5yb290LCBjbGFzc05hbWUpfT5cbiAgICAgICAge2xhYmVsICYmIChcbiAgICAgICAgICA8bGFiZWxcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgICAgY2xhc3Nlcy5sYWJlbCxcbiAgICAgICAgICAgICAgY29sb3IgPT09ICdpbnZlcnNlJyAmJiBjbGFzc2VzLmxhYmVsSW52ZXJzZVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGh0bWxGb3I9e3VuaXF1ZUlkfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtsYWJlbH1cbiAgICAgICAgICAgIHshIUljb24gJiYgdG9vbHRpcE1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17dG9vbHRpcE1lc3NhZ2V9PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17Y2xhc3Nlcy50b29sdGlwQ29udGFpbmVyfT5cbiAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzLmxhYmVsSWNvbixcbiAgICAgICAgICAgICAgICAgICAgICBjb2xvciA9PT0gJ2ludmVyc2UnICYmIGNsYXNzZXMubGFiZWxJY29uSW52ZXJzZVxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICB3aWR0aD17MTZ9XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD17MTZ9XG4gICAgICAgICAgICAgICAgICAgIHJvbGU9XCJpbWdcIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlblxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7c2Vjb25kYXJ5TGFiZWwgJiYgKFxuICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgICAgICAgIGNsYXNzZXMubGFiZWxTZWNvbmRhcnksXG4gICAgICAgICAgICAgICAgICBjb2xvciA9PT0gJ2ludmVyc2UnICYmIGNsYXNzZXMubGFiZWxJbnZlcnNlXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtzZWNvbmRhcnlMYWJlbH1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICApfVxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PXtidWlsZERlc2NyaWJlZEJ5KHtcbiAgICAgICAgICAgIGhhc0Vycm9yLFxuICAgICAgICAgICAgaGFzSGVscE1lc3NhZ2U6ICEhaGVscE1lc3NhZ2UsXG4gICAgICAgICAgICB1bmlxdWVJZCxcbiAgICAgICAgICB9KX1cbiAgICAgICAgICBhcmlhLWxhYmVsPXthcmlhTGFiZWx9XG4gICAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KFxuICAgICAgICAgICAgY2xhc3Nlcy5pbnB1dCxcbiAgICAgICAgICAgIGZ1bGxXaWR0aCAmJiBjbGFzc2VzLmlucHV0RnVsbFdpZHRoLFxuICAgICAgICAgICAgaGFzRXJyb3IgJiYgY2xhc3Nlcy5pbnB1dEVycm9yLFxuICAgICAgICAgICAgaGFzRXJyb3IgJiYgY29sb3IgPT09ICdpbnZlcnNlJyAmJiBjbGFzc2VzLmlucHV0RXJyb3JJbnZlcnNlLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBbY2xhc3Nlcy5pbnB1dEludmVyc2VdOiBjb2xvciA9PT0gJ2ludmVyc2UnLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICl9XG4gICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgIGlkPXt1bmlxdWVJZH1cbiAgICAgICAgICBuYW1lPXtuYW1lfVxuICAgICAgICAgIHsuLi5yb290UHJvcHN9XG4gICAgICAgIC8+XG4gICAgICAgIHtoZWxwTWVzc2FnZSAmJiAoXG4gICAgICAgICAgPEZvcm1IZWxwTWVzc2FnZVxuICAgICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KFxuICAgICAgICAgICAgICBjbGFzc2VzLnRyYWlsZXJNZXNzYWdlLFxuICAgICAgICAgICAgICBjbGFzc2VzLmhlbHBNZXNzYWdlLFxuICAgICAgICAgICAgICBjb2xvciA9PT0gJ2ludmVyc2UnICYmIGNsYXNzZXMuaGVscE1lc3NhZ2VJbnZlcnNlXG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgcm9vdEVsZW1lbnRJZD17dW5pcXVlSWR9XG4gICAgICAgICAgICBkZXNjcmliZWRCeUlkPXtoZWxwRm9yKHVuaXF1ZUlkKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7aGVscE1lc3NhZ2V9XG4gICAgICAgICAgPC9Gb3JtSGVscE1lc3NhZ2U+XG4gICAgICAgICl9XG4gICAgICAgIHtoYXNFcnJvciAmJiBlcnJvck1lc3NhZ2UgJiYgKFxuICAgICAgICAgIDxGb3JtRXJyb3JNZXNzYWdlXG4gICAgICAgICAgICBjb2xvcj17Y29sb3J9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goY2xhc3Nlcy50cmFpbGVyTWVzc2FnZSl9XG4gICAgICAgICAgICByb290RWxlbWVudElkPXt1bmlxdWVJZH1cbiAgICAgICAgICAgIGRlc2NyaWJlZEJ5SWQ9e2Vycm9yRm9yKHVuaXF1ZUlkKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7ZXJyb3JNZXNzYWdlfVxuICAgICAgICAgIDwvRm9ybUVycm9yTWVzc2FnZT5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbik7XG4iXX0=