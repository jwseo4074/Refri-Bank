"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Toggle = exports.useStyles = exports.ToggleStylesKey = void 0;
var clsx_1 = __importDefault(require("clsx"));
var React = __importStar(require("react"));
var styles_1 = require("../../styles");
var forms_1 = require("../_private/forms");
var UniqueId_1 = require("../_private/UniqueId");
var Text_1 = require("../Text");
var screenreaderOnly_1 = require("../../styles/screenreaderOnly");
exports.ToggleStylesKey = 'ChromaToggle';
exports.useStyles = (0, styles_1.makeStyles)(function (theme) { return ({
    root: {
        display: 'flex',
        // Setup default ball styles
        '& > input[type="checkbox"]::after': {
            background: theme.palette.common.white,
            transform: 'translateX(0px)',
            transition: 'transform .3s cubic-bezier(.2, .85, .32, 1.2), opacity .2s',
        },
        // Target the ball to move *and* change color to white
        '& > input[type="checkbox"]:checked::after': {
            background: theme.palette.common.white,
            transform: 'translateX(17px)',
        },
        // Targets the ball when the input is disabled and not checked
        '& > input[type="checkbox"]:disabled:not(:checked)::after': {
            opacity: 0.6,
        },
    },
    input: {
        background: 'rgba(132, 137, 166, 0.15)',
        border: '1px solid transparent',
        borderRadius: theme.pxToRem(11),
        cursor: 'pointer',
        display: 'inline-block',
        height: theme.pxToRem(21),
        margin: 0,
        MozAppearance: 'none',
        outline: 'none',
        position: 'relative',
        transition: 'background .3s, border-color .3s, box-shadow .2s',
        verticalAlign: 'top',
        WebkitAppearance: 'none',
        minWidth: theme.pxToRem(38),
        '&:after': {
            background: theme.palette.common.white,
            borderRadius: '50%',
            content: '" "',
            display: 'block',
            height: theme.pxToRem(15),
            left: theme.pxToRem(2),
            position: 'absolute',
            top: theme.pxToRem(2),
            width: theme.pxToRem(15),
        },
        '&:checked': {
            background: theme.palette.primary.main,
            border: "1px solid ".concat(theme.palette.primary.main),
        },
        '&:disabled': {
            cursor: 'not-allowed',
            opacity: 0.625,
            // Ensure the label sibling cannot be clicked as well
            '& + label': {
                cursor: 'not-allowed',
            },
        },
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(0, 150, 225, .3)',
        },
        '&:hover:not(:disabled):not(:checked)': {
            border: "1px solid ".concat(theme.palette.primary[700]),
        },
    },
    inputInverse: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        border: '1px solid rgba(255, 255, 255, 0.2)',
        mixBlendMode: 'hard-light',
        '&:checked': {
            background: theme.palette.secondary[500],
            border: "1px solid ".concat(theme.palette.secondary[500]),
        },
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(255, 255, 255, .3)',
        },
        '&:hover:not(:disabled):not(:checked)': {
            border: "1px solid ".concat(theme.palette.common.white),
        },
    },
    labelContainer: {
        flex: '0 auto',
        marginLeft: theme.spacing(1),
    },
    label: {
        cursor: 'pointer',
        display: 'inline-block',
        marginBottom: 0,
        marginTop: theme.spacing(0.25),
        verticalAlign: 'top',
        '& p': {
            lineHeight: 1.25,
        },
    },
    labelInverse: {
        color: theme.palette.common.white,
    },
    message: {},
    error: {
        border: "1px solid ".concat(theme.palette.red.main),
    },
    rootRight: {
        flexFlow: 'row-reverse',
        justifyContent: 'flex-end',
    },
    labelContainerRight: {
        marginRight: theme.spacing(1),
        marginLeft: 0,
    },
    labelContainerFullWidth: {
        flex: 1,
    },
    labelFullWidth: {
        display: 'flex',
    },
    srOnly: __assign({}, screenreaderOnly_1.screenreaderOnlyStyles),
}); }, { name: exports.ToggleStylesKey });
exports.Toggle = React.forwardRef(function (_a, ref) {
    var _b, _c, _d;
    var ariaLabel = _a["aria-label"], checked = _a.checked, className = _a.className, _e = _a.color, color = _e === void 0 ? 'default' : _e, fullWidth = _a.fullWidth, errorMessage = _a.errorMessage, hasError = _a.hasError, helpMessage = _a.helpMessage, id = _a.id, label = _a.label, name = _a.name, _f = _a.placement, placement = _f === void 0 ? 'left' : _f, rootProps = __rest(_a, ['aria-label', "checked", "className", "color", "fullWidth", "errorMessage", "hasError", "helpMessage", "id", "label", "name", "placement"]);
    var classes = (0, exports.useStyles)({});
    var uniqueId = React.useState(function () { return id || name || (0, UniqueId_1.generateUniqueId)('toggle-'); })[0];
    if (!label && !ariaLabel && process.env.NODE_ENV === 'development') {
        throw new Error('If a "label" is not provided to Toggle, please provide "aria-label".');
    }
    return (React.createElement("div", { className: (0, clsx_1.default)(classes.root, (_b = {}, _b[classes.rootRight] = placement === 'right', _b), className) },
        React.createElement("input", __assign({ "aria-describedby": (0, forms_1.buildDescribedBy)({
                hasError: hasError,
                hasHelpMessage: !!helpMessage,
                uniqueId: uniqueId,
            }), className: (0, clsx_1.default)(classes.input, hasError && classes.error, (_c = {},
                _c[classes.inputInverse] = color === 'inverse',
                _c)), ref: ref, type: "checkbox", id: uniqueId, checked: checked, tabIndex: 0 }, rootProps)),
        React.createElement("div", { className: (0, clsx_1.default)(classes.labelContainer, fullWidth && classes.labelContainerFullWidth, (_d = {},
                _d[classes.labelContainerRight] = placement === 'right',
                _d), !label && ariaLabel && classes.srOnly) },
            React.createElement("label", { className: (0, clsx_1.default)(classes.label, fullWidth && classes.labelFullWidth), htmlFor: uniqueId },
                React.createElement(Text_1.Text, { className: color === 'inverse' ? classes.labelInverse : undefined, size: "subbody" }, label || ariaLabel)),
            helpMessage && (React.createElement(forms_1.FormHelpMessage, { className: classes.message, color: color, rootElementId: uniqueId, describedById: (0, forms_1.helpFor)(uniqueId) }, helpMessage)),
            hasError && (React.createElement(forms_1.FormErrorMessage, { className: classes.message, color: color, rootElementId: uniqueId, describedById: (0, forms_1.errorFor)(uniqueId) }, errorMessage)))));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9nZ2xlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVG9nZ2xlL1RvZ2dsZS50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsOENBQXdCO0FBQ3hCLDJDQUErQjtBQUMvQix1Q0FBMEM7QUFFMUMsMkNBTzJCO0FBQzNCLGlEQUF3RDtBQUN4RCxnQ0FBK0I7QUFDL0Isa0VBQXVFO0FBRTFELFFBQUEsZUFBZSxHQUFHLGNBQWMsQ0FBQztBQUVqQyxRQUFBLFNBQVMsR0FBRyxJQUFBLG1CQUFVLEVBQ2pDLFVBQUMsS0FBSyxJQUFLLE9BQUEsQ0FBQztJQUNWLElBQUksRUFBRTtRQUNKLE9BQU8sRUFBRSxNQUFNO1FBQ2YsNEJBQTRCO1FBQzVCLG1DQUFtQyxFQUFFO1lBQ25DLFVBQVUsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLO1lBQ3RDLFNBQVMsRUFBRSxpQkFBaUI7WUFDNUIsVUFBVSxFQUNSLDREQUE0RDtTQUMvRDtRQUNELHNEQUFzRDtRQUN0RCwyQ0FBMkMsRUFBRTtZQUMzQyxVQUFVLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSztZQUN0QyxTQUFTLEVBQUUsa0JBQWtCO1NBQzlCO1FBQ0QsOERBQThEO1FBQzlELDBEQUEwRCxFQUFFO1lBQzFELE9BQU8sRUFBRSxHQUFHO1NBQ2I7S0FDRjtJQUNELEtBQUssRUFBRTtRQUNMLFVBQVUsRUFBRSwyQkFBMkI7UUFDdkMsTUFBTSxFQUFFLHVCQUF1QjtRQUMvQixZQUFZLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDL0IsTUFBTSxFQUFFLFNBQVM7UUFDakIsT0FBTyxFQUFFLGNBQWM7UUFDdkIsTUFBTSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ3pC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LFdBQVcsSUFBSSxDQUNkLG9CQUFDLHVCQUFlLElBQ2QsU0FBUyxFQUFFLE9BQU8sQ0FBQyxPQUFPLEVBQzFCLEtBQUssRUFBRSxLQUFLLEVBQ1osYUFBYSxFQUFFLFFBQVEsRUFDdkIsYUFBYSxFQUFFLElBQUEsZUFBTyxFQUFDLFFBQVEsQ0FBQyxJQUUvQixXQUFXLENBQ0ksQ0FDbkI7WUFDQSxRQUFRLElBQUksQ0FDWCxvQkFBQyx3QkFBZ0IsSUFDZixTQUFTLEVBQUUsT0FBTyxDQUFDLE9BQU8sRUFDMUIsS0FBSyxFQUFFLEtBQUssRUFDWixhQUFhLEVBQUUsUUFBUSxFQUN2QixhQUFhLEVBQUUsSUFBQSxnQkFBUSxFQUFDLFFBQVEsQ0FBQyxJQUVoQyxZQUFZLENBQ0ksQ0FDcEIsQ0FDRyxDQUNGLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FDRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNsc3ggZnJvbSAnY2xzeCc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtYWtlU3R5bGVzIH0gZnJvbSAnLi4vLi4vc3R5bGVzJztcbmltcG9ydCB7IEdldENsYXNzZXMgfSBmcm9tICcuLi8uLi90eXBlVXRpbHMnO1xuaW1wb3J0IHtcbiAgQmFzZUZvcm1FbGVtZW50LFxuICBidWlsZERlc2NyaWJlZEJ5LFxuICBlcnJvckZvcixcbiAgRm9ybUVycm9yTWVzc2FnZSxcbiAgRm9ybUhlbHBNZXNzYWdlLFxuICBoZWxwRm9yLFxufSBmcm9tICcuLi9fcHJpdmF0ZS9mb3Jtcyc7XG5pbXBvcnQgeyBnZW5lcmF0ZVVuaXF1ZUlkIH0gZnJvbSAnLi4vX3ByaXZhdGUvVW5pcXVlSWQnO1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL1RleHQnO1xuaW1wb3J0IHsgc2NyZWVucmVhZGVyT25seVN0eWxlcyB9IGZyb20gJy4uLy4uL3N0eWxlcy9zY3JlZW5yZWFkZXJPbmx5JztcblxuZXhwb3J0IGNvbnN0IFRvZ2dsZVN0eWxlc0tleSA9ICdDaHJvbWFUb2dnbGUnO1xuXG5leHBvcnQgY29uc3QgdXNlU3R5bGVzID0gbWFrZVN0eWxlcyhcbiAgKHRoZW1lKSA9PiAoe1xuICAgIHJvb3Q6IHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIC8vIFNldHVwIGRlZmF1bHQgYmFsbCBzdHlsZXNcbiAgICAgICcmID4gaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdOjphZnRlcic6IHtcbiAgICAgICAgYmFja2dyb3VuZDogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMHB4KScsXG4gICAgICAgIHRyYW5zaXRpb246XG4gICAgICAgICAgJ3RyYW5zZm9ybSAuM3MgY3ViaWMtYmV6aWVyKC4yLCAuODUsIC4zMiwgMS4yKSwgb3BhY2l0eSAuMnMnLFxuICAgICAgfSxcbiAgICAgIC8vIFRhcmdldCB0aGUgYmFsbCB0byBtb3ZlICphbmQqIGNoYW5nZSBjb2xvciB0byB3aGl0ZVxuICAgICAgJyYgPiBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZDo6YWZ0ZXInOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDE3cHgpJyxcbiAgICAgIH0sXG4gICAgICAvLyBUYXJnZXRzIHRoZSBiYWxsIHdoZW4gdGhlIGlucHV0IGlzIGRpc2FibGVkIGFuZCBub3QgY2hlY2tlZFxuICAgICAgJyYgPiBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06ZGlzYWJsZWQ6bm90KDpjaGVja2VkKTo6YWZ0ZXInOiB7XG4gICAgICAgIG9wYWNpdHk6IDAuNixcbiAgICAgIH0sXG4gICAgfSxcbiAgICBpbnB1dDoge1xuICAgICAgYmFja2dyb3VuZDogJ3JnYmEoMTMyLCAxMzcsIDE2NiwgMC4xNSknLFxuICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHRyYW5zcGFyZW50JyxcbiAgICAgIGJvcmRlclJhZGl1czogdGhlbWUucHhUb1JlbSgxMSksXG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgaGVpZ2h0OiB0aGVtZS5weFRvUmVtKDIxKSxcbiAgICAgIG1hcmdpbjogMCxcbiAgICAgIE1vekFwcGVhcmFuY2U6ICdub25lJyxcbiAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgdHJhbnNpdGlvbjogJ2JhY2tncm91bmQgLjNzLCBib3JkZXItY29sb3IgLjNzLCBib3gtc2hhZG93IC4ycycsXG4gICAgICB2ZXJ0aWNhbEFsaWduOiAndG9wJyxcbiAgICAgIFdlYmtpdEFwcGVhcmFuY2U6ICdub25lJyxcbiAgICAgIG1pbldpZHRoOiB0aGVtZS5weFRvUmVtKDM4KSxcbiAgICAgICcmOmFmdGVyJzoge1xuICAgICAgICBiYWNrZ3JvdW5kOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNTAlJyxcbiAgICAgICAgY29udGVudDogJ1wiIFwiJyxcbiAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgaGVpZ2h0OiB0aGVtZS5weFRvUmVtKDE1KSxcbiAgICAgICAgbGVmdDogdGhlbWUucHhUb1JlbSgyKSxcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIHRvcDogdGhlbWUucHhUb1JlbSgyKSxcbiAgICAgICAgd2lkdGg6IHRoZW1lLnB4VG9SZW0oMTUpLFxuICAgICAgfSxcbiAgICAgICcmOmNoZWNrZWQnOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5wYWxldHRlLnByaW1hcnkubWFpbn1gLFxuICAgICAgfSxcbiAgICAgICcmOmRpc2FibGVkJzoge1xuICAgICAgICBjdXJzb3I6ICdub3QtYWxsb3dlZCcsXG4gICAgICAgIG9wYWNpdHk6IDAuNjI1LFxuICAgICAgICAvLyBFbnN1cmUgdGhlIGxhYmVsIHNpYmxpbmcgY2Fubm90IGJlIGNsaWNrZWQgYXMgd2VsbFxuICAgICAgICAnJiArIGxhYmVsJzoge1xuICAgICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgYm94U2hhZG93OiAnMCAwIDAgMnB4IHJnYmEoMCwgMTUwLCAyMjUsIC4zKScsXG4gICAgICB9LFxuICAgICAgJyY6aG92ZXI6bm90KDpkaXNhYmxlZCk6bm90KDpjaGVja2VkKSc6IHtcbiAgICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5wcmltYXJ5WzcwMF19YCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBpbnB1dEludmVyc2U6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjMwLCAyMzEsIDIzNywgMC4xKScsXG4gICAgICBib3JkZXI6ICcxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpJyxcbiAgICAgIG1peEJsZW5kTW9kZTogJ2hhcmQtbGlnaHQnLFxuICAgICAgJyY6Y2hlY2tlZCc6IHtcbiAgICAgICAgYmFja2dyb3VuZDogdGhlbWUucGFsZXR0ZS5zZWNvbmRhcnlbNTAwXSxcbiAgICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5zZWNvbmRhcnlbNTAwXX1gLFxuICAgICAgfSxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBib3hTaGFkb3c6ICcwIDAgMCAycHggcmdiYSgyNTUsIDI1NSwgMjU1LCAuMyknLFxuICAgICAgfSxcbiAgICAgICcmOmhvdmVyOm5vdCg6ZGlzYWJsZWQpOm5vdCg6Y2hlY2tlZCknOiB7XG4gICAgICAgIGJvcmRlcjogYDFweCBzb2xpZCAke3RoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlfWAsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbGFiZWxDb250YWluZXI6IHtcbiAgICAgIGZsZXg6ICcwIGF1dG8nLFxuICAgICAgbWFyZ2luTGVmdDogdGhlbWUuc3BhY2luZygxKSxcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgbWFyZ2luQm90dG9tOiAwLFxuICAgICAgbWFyZ2luVG9wOiB0aGVtZS5zcGFjaW5nKDAuMjUpLFxuICAgICAgdmVydGljYWxBbGlnbjogJ3RvcCcsXG4gICAgICAnJiBwJzoge1xuICAgICAgICBsaW5lSGVpZ2h0OiAxLjI1LFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxhYmVsSW52ZXJzZToge1xuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgIH0sXG4gICAgbWVzc2FnZToge30sXG4gICAgZXJyb3I6IHtcbiAgICAgIGJvcmRlcjogYDFweCBzb2xpZCAke3RoZW1lLnBhbGV0dGUucmVkLm1haW59YCxcbiAgICB9LFxuICAgIHJvb3RSaWdodDoge1xuICAgICAgZmxleEZsb3c6ICdyb3ctcmV2ZXJzZScsXG4gICAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJyxcbiAgICB9LFxuICAgIGxhYmVsQ29udGFpbmVyUmlnaHQ6IHtcbiAgICAgIG1hcmdpblJpZ2h0OiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgbWFyZ2luTGVmdDogMCxcbiAgICB9LFxuICAgIGxhYmVsQ29udGFpbmVyRnVsbFdpZHRoOiB7XG4gICAgICBmbGV4OiAxLFxuICAgIH0sXG4gICAgbGFiZWxGdWxsV2lkdGg6IHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICB9LFxuICAgIHNyT25seToge1xuICAgICAgLi4uc2NyZWVucmVhZGVyT25seVN0eWxlcyxcbiAgICB9LFxuICB9KSxcbiAgeyBuYW1lOiBUb2dnbGVTdHlsZXNLZXkgfVxuKTtcblxuZXhwb3J0IHR5cGUgVG9nZ2xlQ2xhc3NlcyA9IEdldENsYXNzZXM8dHlwZW9mIHVzZVN0eWxlcz47XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9nZ2xlUHJvcHMgZXh0ZW5kcyBCYXNlRm9ybUVsZW1lbnQge1xuICBmdWxsV2lkdGg/OiBib29sZWFuO1xuICBwbGFjZW1lbnQ/OiAnbGVmdCcgfCAncmlnaHQnO1xufVxuXG5leHBvcnQgY29uc3QgVG9nZ2xlID0gUmVhY3QuZm9yd2FyZFJlZjxIVE1MSW5wdXRFbGVtZW50LCBUb2dnbGVQcm9wcz4oXG4gIChcbiAgICB7XG4gICAgICBbJ2FyaWEtbGFiZWwnXTogYXJpYUxhYmVsLFxuICAgICAgY2hlY2tlZCxcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIGNvbG9yID0gJ2RlZmF1bHQnLFxuICAgICAgZnVsbFdpZHRoLFxuICAgICAgZXJyb3JNZXNzYWdlLFxuICAgICAgaGFzRXJyb3IsXG4gICAgICBoZWxwTWVzc2FnZSxcbiAgICAgIGlkLFxuICAgICAgbGFiZWwsXG4gICAgICBuYW1lLFxuICAgICAgcGxhY2VtZW50ID0gJ2xlZnQnLFxuICAgICAgLi4ucm9vdFByb3BzXG4gICAgfSxcbiAgICByZWZcbiAgKSA9PiB7XG4gICAgY29uc3QgY2xhc3NlcyA9IHVzZVN0eWxlcyh7fSk7XG5cbiAgICBjb25zdCBbdW5pcXVlSWRdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihcbiAgICAgICgpID0+IGlkIHx8IG5hbWUgfHwgZ2VuZXJhdGVVbmlxdWVJZCgndG9nZ2xlLScpXG4gICAgKTtcblxuICAgIGlmICghbGFiZWwgJiYgIWFyaWFMYWJlbCAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnSWYgYSBcImxhYmVsXCIgaXMgbm90IHByb3ZpZGVkIHRvIFRvZ2dsZSwgcGxlYXNlIHByb3ZpZGUgXCJhcmlhLWxhYmVsXCIuJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgY2xhc3Nlcy5yb290LFxuICAgICAgICAgIHsgW2NsYXNzZXMucm9vdFJpZ2h0XTogcGxhY2VtZW50ID09PSAncmlnaHQnIH0sXG4gICAgICAgICAgY2xhc3NOYW1lXG4gICAgICAgICl9XG4gICAgICA+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIGFyaWEtZGVzY3JpYmVkYnk9e2J1aWxkRGVzY3JpYmVkQnkoe1xuICAgICAgICAgICAgaGFzRXJyb3IsXG4gICAgICAgICAgICBoYXNIZWxwTWVzc2FnZTogISFoZWxwTWVzc2FnZSxcbiAgICAgICAgICAgIHVuaXF1ZUlkLFxuICAgICAgICAgIH0pfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChjbGFzc2VzLmlucHV0LCBoYXNFcnJvciAmJiBjbGFzc2VzLmVycm9yLCB7XG4gICAgICAgICAgICBbY2xhc3Nlcy5pbnB1dEludmVyc2VdOiBjb2xvciA9PT0gJ2ludmVyc2UnLFxuICAgICAgICAgIH0pfVxuICAgICAgICAgIHJlZj17cmVmfVxuICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgaWQ9e3VuaXF1ZUlkfVxuICAgICAgICAgIGNoZWNrZWQ9e2NoZWNrZWR9XG4gICAgICAgICAgdGFiSW5kZXg9ezB9XG4gICAgICAgICAgey4uLnJvb3RQcm9wc31cbiAgICAgICAgLz5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgIGNsYXNzZXMubGFiZWxDb250YWluZXIsXG4gICAgICAgICAgICBmdWxsV2lkdGggJiYgY2xhc3Nlcy5sYWJlbENvbnRhaW5lckZ1bGxXaWR0aCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgW2NsYXNzZXMubGFiZWxDb250YWluZXJSaWdodF06IHBsYWNlbWVudCA9PT0gJ3JpZ2h0JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAhbGFiZWwgJiYgYXJpYUxhYmVsICYmIGNsYXNzZXMuc3JPbmx5XG4gICAgICAgICAgKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KGNsYXNzZXMubGFiZWwsIGZ1bGxXaWR0aCAmJiBjbGFzc2VzLmxhYmVsRnVsbFdpZHRoKX1cbiAgICAgICAgICAgIGh0bWxGb3I9e3VuaXF1ZUlkfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxUZXh0XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y29sb3IgPT09ICdpbnZlcnNlJyA/IGNsYXNzZXMubGFiZWxJbnZlcnNlIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgICBzaXplPVwic3ViYm9keVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtsYWJlbCB8fCBhcmlhTGFiZWx9XG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICB7aGVscE1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgPEZvcm1IZWxwTWVzc2FnZVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMubWVzc2FnZX1cbiAgICAgICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgICAgICByb290RWxlbWVudElkPXt1bmlxdWVJZH1cbiAgICAgICAgICAgICAgZGVzY3JpYmVkQnlJZD17aGVscEZvcih1bmlxdWVJZCl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtoZWxwTWVzc2FnZX1cbiAgICAgICAgICAgIDwvRm9ybUhlbHBNZXNzYWdlPlxuICAgICAgICAgICl9XG4gICAgICAgICAge2hhc0Vycm9yICYmIChcbiAgICAgICAgICAgIDxGb3JtRXJyb3JNZXNzYWdlXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy5tZXNzYWdlfVxuICAgICAgICAgICAgICBjb2xvcj17Y29sb3J9XG4gICAgICAgICAgICAgIHJvb3RFbGVtZW50SWQ9e3VuaXF1ZUlkfVxuICAgICAgICAgICAgICBkZXNjcmliZWRCeUlkPXtlcnJvckZvcih1bmlxdWVJZCl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtlcnJvck1lc3NhZ2V9XG4gICAgICAgICAgICA8L0Zvcm1FcnJvck1lc3NhZ2U+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG4pO1xuIl19