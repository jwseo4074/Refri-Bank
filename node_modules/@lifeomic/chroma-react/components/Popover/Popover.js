"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
var ConditionalWrapper_1 = require("../_private/ConditionalWrapper");
var styles_1 = require("../../styles");
var framer_motion_1 = require("framer-motion");
var Portal_1 = require("reakit/Portal");
var Text_1 = require("../Text");
var Popover_1 = require("reakit/Popover");
var clsx_1 = __importDefault(require("clsx"));
var React = __importStar(require("react"));
exports.PopoverStylesKey = 'ChromaPopover';
exports.useStyles = styles_1.makeStyles(function (theme) { return ({
    root: {
        background: theme.palette.common.white,
        color: theme.palette.text.primary,
        borderRadius: theme.pxToRem(10),
        boxShadow: theme.boxShadows.popover,
        minWidth: theme.pxToRem(224),
        overflow: 'hidden',
        zIndex: 40,
        '&:focus': {
            outline: 'none',
        },
    },
    title: {
        paddingTop: theme.spacing(2),
        paddingLeft: theme.spacing(2.5),
        paddingRight: theme.spacing(2.5),
    },
}); }, { name: exports.PopoverStylesKey });
exports.Popover = function (_a) {
    var ariaLabel = _a["aria-label"], anchorElement = _a.anchorElement, children = _a.children, className = _a.className, gutter = _a.gutter, _b = _a.placement, placement = _b === void 0 ? 'bottom' : _b, title = _a.title, _c = _a.usePortal, usePortal = _c === void 0 ? false : _c, unstable_offset = _a.unstable_offset, rootProps = __rest(_a, ['aria-label', "anchorElement", "children", "className", "gutter", "placement", "title", "usePortal", "unstable_offset"]);
    var classes = exports.useStyles({});
    var shouldReduceMotion = framer_motion_1.useReducedMotion();
    var popover = Popover_1.usePopoverState({ placement: placement, gutter: gutter, unstable_offset: unstable_offset });
    return (React.createElement(React.Fragment, null,
        React.createElement(Popover_1.PopoverDisclosure, __assign({}, popover, anchorElement.props), function (disclosureProps) {
            return React.cloneElement(React.Children.only(anchorElement), disclosureProps);
        }),
        React.createElement(ConditionalWrapper_1.ConditionalWrapper, { condition: usePortal, wrapper: function (children) { return React.createElement(Portal_1.Portal, null, children); } },
            React.createElement(Popover_1.Popover, __assign({}, popover, { "aria-label": ariaLabel, as: framer_motion_1.motion.div, className: clsx_1.default(classes.root, className), "aria-hidden": popover.visible ? undefined : 'true', animate: popover.visible
                    ? shouldReduceMotion
                        ? { opacity: 1 }
                        : {
                            opacity: 1,
                            transition: { duration: 0.3 },
                        }
                    : shouldReduceMotion
                        ? { opacity: 0 }
                        : {
                            opacity: 0,
                            transition: { duration: 0.1 },
                        } }, rootProps),
                !!title && (React.createElement(Text_1.Text, { className: classes.title, weight: "bold", size: "subbody" }, title)),
                typeof children === 'function'
                    ? children({ popover: popover })
                    : children))));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUG9wb3Zlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1BvcG92ZXIvUG9wb3Zlci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHFFQUFvRTtBQUVwRSx1Q0FBMEM7QUFDMUMsK0NBQXlEO0FBQ3pELHdDQUF1QztBQUN2QyxnQ0FBK0I7QUFDL0IsMENBTXdCO0FBQ3hCLDhDQUF3QjtBQUN4QiwyQ0FBK0I7QUFFbEIsUUFBQSxnQkFBZ0IsR0FBRyxlQUFlLENBQUM7QUFFbkMsUUFBQSxTQUFTLEdBQUcsbUJBQVUsQ0FDakMsVUFBQyxLQUFLLElBQUssT0FBQSxDQUFDO0lBQ1YsSUFBSSxFQUFFO1FBQ0osVUFBVSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUs7UUFDdEMsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU87UUFDakMsWUFBWSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQy9CLFNBQVMsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLE9BQU87UUFDbkMsUUFBUSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO1FBQzVCLFFBQVEsRUFBRSxRQUFRO1FBQ2xCLE1BQU0sRUFBRSxFQUFFO1FBQ1YsU0FBUyxFQUFFO1lBQ1QsT0FBTyxFQUFFLE1BQU07U0FDaEI7S0FDRjtJQUNELEtBQUssRUFBRTtRQUNMLFVBQVUsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUM1QixXQUFXLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7UUFDL0IsWUFBWSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO0tBQ2pDO0NBQ0YsQ0FBQyxFQWxCUyxDQWtCVCxFQUNGLEVBQUUsSUFBSSxFQUFFLHdCQUFnQixFQUFFLENBQzNCLENBQUM7QUFxQlcsUUFBQSxPQUFPLEdBQTJCLFVBQUMsRUFXL0M7SUFWQyxJQUFBLDRCQUF1QixFQUN2QixnQ0FBYSxFQUNiLHNCQUFRLEVBQ1Isd0JBQVMsRUFDVCxrQkFBTSxFQUNOLGlCQUFvQixFQUFwQix5Q0FBb0IsRUFDcEIsZ0JBQUssRUFDTCxpQkFBaUIsRUFBakIsc0NBQWlCLEVBQ2pCLG9DQUFlLEVBQ2YsZ0pBQVk7SUFFWixJQUFNLE9BQU8sR0FBRyxpQkFBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBRTlCLElBQU0sa0JBQWtCLEdBQUcsZ0NBQWdCLEVBQUUsQ0FBQztJQUU5QyxJQUFNLE9BQU8sR0FBRyx5QkFBZSxDQUFDLEVBQUUsU0FBUyxXQUFBLEVBQUUsTUFBTSxRQUFBLEVBQUUsZUFBZSxpQkFBQSxFQUFFLENBQUMsQ0FBQztJQUV4RSxPQUFPLENBQ0w7UUFDRSxvQkFBQywyQkFBaUIsZUFBSyxPQUFPLEVBQU0sYUFBYSxDQUFDLEtBQUssR0FDcEQsVUFBQyxlQUFlO1lBQ2YsT0FBQSxLQUFLLENBQUMsWUFBWSxDQUNoQixLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsRUFDbEMsZUFBZSxDQUNoQjtRQUhELENBR0MsQ0FFZTtRQUNwQixvQkFBQyx1Q0FBa0IsSUFDakIsU0FBUyxFQUFFLFNBQVMsRUFDcEIsT0FBTyxFQUFFLFVBQUMsUUFBeUIsSUFBSyxPQUFBLG9CQUFDLGVBQU0sUUFBRSxRQUFRLENBQVUsRUFBM0IsQ0FBMkI7WUFFbkUsb0JBQUMsaUJBQWEsZUFDUixPQUFPLGtCQUNDLFNBQVMsRUFDckIsRUFBRSxFQUFFLHNCQUFNLENBQUMsR0FBRyxFQUNkLFNBQVMsRUFBRSxjQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsaUJBQzNCLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUNqRCxPQUFPLEVBQ0wsT0FBTyxDQUFDLE9BQU87b0JBQ2IsQ0FBQyxDQUFDLGtCQUFrQjt3QkFDbEIsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRTt3QkFDaEIsQ0FBQyxDQUFDOzRCQUNFLE9BQU8sRUFBRSxDQUFDOzRCQUNWLFVBQVUsRUFBRSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUU7eUJBQzlCO29CQUNMLENBQUMsQ0FBQyxrQkFBa0I7d0JBQ3BCLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUU7d0JBQ2hCLENBQUMsQ0FBQzs0QkFDRSxPQUFPLEVBQUUsQ0FBQzs0QkFDVixVQUFVLEVBQUUsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFO3lCQUM5QixJQUVILFNBQVM7Z0JBRVosQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUNWLG9CQUFDLFdBQUksSUFBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUMsTUFBTSxFQUFDLElBQUksRUFBQyxTQUFTLElBQ3pELEtBQUssQ0FDRCxDQUNSO2dCQUNBLE9BQU8sUUFBUSxLQUFLLFVBQVU7b0JBQzdCLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxPQUFPLFNBQUEsRUFBd0IsQ0FBQztvQkFDN0MsQ0FBQyxDQUFDLFFBQVEsQ0FDRSxDQUNHLENBQ3BCLENBQ0osQ0FBQztBQUNKLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbmRpdGlvbmFsV3JhcHBlciB9IGZyb20gJy4uL19wcml2YXRlL0NvbmRpdGlvbmFsV3JhcHBlcic7XG5pbXBvcnQgeyBHZXRDbGFzc2VzIH0gZnJvbSAnLi4vLi4vdHlwZVV0aWxzJztcbmltcG9ydCB7IG1ha2VTdHlsZXMgfSBmcm9tICcuLi8uLi9zdHlsZXMnO1xuaW1wb3J0IHsgbW90aW9uLCB1c2VSZWR1Y2VkTW90aW9uIH0gZnJvbSAnZnJhbWVyLW1vdGlvbic7XG5pbXBvcnQgeyBQb3J0YWwgfSBmcm9tICdyZWFraXQvUG9ydGFsJztcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi9UZXh0JztcbmltcG9ydCB7XG4gIFBvcG92ZXIgYXMgUmVha2l0UG9wb3ZlcixcbiAgUG9wb3ZlckRpc2Nsb3N1cmUsXG4gIFBvcG92ZXJJbml0aWFsU3RhdGUsXG4gIFBvcG92ZXJTdGF0ZVJldHVybixcbiAgdXNlUG9wb3ZlclN0YXRlLFxufSBmcm9tICdyZWFraXQvUG9wb3Zlcic7XG5pbXBvcnQgY2xzeCBmcm9tICdjbHN4JztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuZXhwb3J0IGNvbnN0IFBvcG92ZXJTdHlsZXNLZXkgPSAnQ2hyb21hUG9wb3Zlcic7XG5cbmV4cG9ydCBjb25zdCB1c2VTdHlsZXMgPSBtYWtlU3R5bGVzKFxuICAodGhlbWUpID0+ICh7XG4gICAgcm9vdDoge1xuICAgICAgYmFja2dyb3VuZDogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS50ZXh0LnByaW1hcnksXG4gICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnB4VG9SZW0oMTApLFxuICAgICAgYm94U2hhZG93OiB0aGVtZS5ib3hTaGFkb3dzLnBvcG92ZXIsXG4gICAgICBtaW5XaWR0aDogdGhlbWUucHhUb1JlbSgyMjQpLFxuICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgekluZGV4OiA0MCxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgdGl0bGU6IHtcbiAgICAgIHBhZGRpbmdUb3A6IHRoZW1lLnNwYWNpbmcoMiksXG4gICAgICBwYWRkaW5nTGVmdDogdGhlbWUuc3BhY2luZygyLjUpLFxuICAgICAgcGFkZGluZ1JpZ2h0OiB0aGVtZS5zcGFjaW5nKDIuNSksXG4gICAgfSxcbiAgfSksXG4gIHsgbmFtZTogUG9wb3ZlclN0eWxlc0tleSB9XG4pO1xuXG5leHBvcnQgdHlwZSBQb3BvdmVyQ2xhc3NlcyA9IEdldENsYXNzZXM8dHlwZW9mIHVzZVN0eWxlcz47XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9wb3ZlclJlbmRlclByb3BzIHtcbiAgcG9wb3ZlcjogUG9wb3ZlclN0YXRlUmV0dXJuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBvcG92ZXJQcm9wc1xuICBleHRlbmRzIFBpY2s8XG4gICAgUG9wb3ZlckluaXRpYWxTdGF0ZSxcbiAgICAncGxhY2VtZW50JyB8ICdndXR0ZXInIHwgJ3Vuc3RhYmxlX29mZnNldCdcbiAgPiB7XG4gIFsnYXJpYS1sYWJlbCddOiBzdHJpbmc7XG4gIGFuY2hvckVsZW1lbnQ/OiBhbnk7XG4gIGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlIHwgYW55O1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIHRpdGxlPzogc3RyaW5nO1xuICB1c2VQb3J0YWw/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgUG9wb3ZlcjogUmVhY3QuRkM8UG9wb3ZlclByb3BzPiA9ICh7XG4gICdhcmlhLWxhYmVsJzogYXJpYUxhYmVsLFxuICBhbmNob3JFbGVtZW50LFxuICBjaGlsZHJlbixcbiAgY2xhc3NOYW1lLFxuICBndXR0ZXIsXG4gIHBsYWNlbWVudCA9ICdib3R0b20nLFxuICB0aXRsZSxcbiAgdXNlUG9ydGFsID0gZmFsc2UsXG4gIHVuc3RhYmxlX29mZnNldCxcbiAgLi4ucm9vdFByb3BzXG59KSA9PiB7XG4gIGNvbnN0IGNsYXNzZXMgPSB1c2VTdHlsZXMoe30pO1xuXG4gIGNvbnN0IHNob3VsZFJlZHVjZU1vdGlvbiA9IHVzZVJlZHVjZWRNb3Rpb24oKTtcblxuICBjb25zdCBwb3BvdmVyID0gdXNlUG9wb3ZlclN0YXRlKHsgcGxhY2VtZW50LCBndXR0ZXIsIHVuc3RhYmxlX29mZnNldCB9KTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8UG9wb3ZlckRpc2Nsb3N1cmUgey4uLnBvcG92ZXJ9IHsuLi5hbmNob3JFbGVtZW50LnByb3BzfT5cbiAgICAgICAgeyhkaXNjbG9zdXJlUHJvcHMpID0+XG4gICAgICAgICAgUmVhY3QuY2xvbmVFbGVtZW50KFxuICAgICAgICAgICAgUmVhY3QuQ2hpbGRyZW4ub25seShhbmNob3JFbGVtZW50KSxcbiAgICAgICAgICAgIGRpc2Nsb3N1cmVQcm9wc1xuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgPC9Qb3BvdmVyRGlzY2xvc3VyZT5cbiAgICAgIDxDb25kaXRpb25hbFdyYXBwZXJcbiAgICAgICAgY29uZGl0aW9uPXt1c2VQb3J0YWx9XG4gICAgICAgIHdyYXBwZXI9eyhjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlKSA9PiA8UG9ydGFsPntjaGlsZHJlbn08L1BvcnRhbD59XG4gICAgICA+XG4gICAgICAgIDxSZWFraXRQb3BvdmVyXG4gICAgICAgICAgey4uLnBvcG92ZXJ9XG4gICAgICAgICAgYXJpYS1sYWJlbD17YXJpYUxhYmVsfVxuICAgICAgICAgIGFzPXttb3Rpb24uZGl2fVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChjbGFzc2VzLnJvb3QsIGNsYXNzTmFtZSl9XG4gICAgICAgICAgYXJpYS1oaWRkZW49e3BvcG92ZXIudmlzaWJsZSA/IHVuZGVmaW5lZCA6ICd0cnVlJ31cbiAgICAgICAgICBhbmltYXRlPXtcbiAgICAgICAgICAgIHBvcG92ZXIudmlzaWJsZVxuICAgICAgICAgICAgICA/IHNob3VsZFJlZHVjZU1vdGlvblxuICAgICAgICAgICAgICAgID8geyBvcGFjaXR5OiAxIH1cbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogeyBkdXJhdGlvbjogMC4zIH0sXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDogc2hvdWxkUmVkdWNlTW90aW9uXG4gICAgICAgICAgICAgID8geyBvcGFjaXR5OiAwIH1cbiAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogeyBkdXJhdGlvbjogMC4xIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB7Li4ucm9vdFByb3BzfVxuICAgICAgICA+XG4gICAgICAgICAgeyEhdGl0bGUgJiYgKFxuICAgICAgICAgICAgPFRleHQgY2xhc3NOYW1lPXtjbGFzc2VzLnRpdGxlfSB3ZWlnaHQ9XCJib2xkXCIgc2l6ZT1cInN1YmJvZHlcIj5cbiAgICAgICAgICAgICAge3RpdGxlfVxuICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICl9XG4gICAgICAgICAge3R5cGVvZiBjaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgPyBjaGlsZHJlbih7IHBvcG92ZXIgfSBhcyBQb3BvdmVyUmVuZGVyUHJvcHMpXG4gICAgICAgICAgICA6IGNoaWxkcmVufVxuICAgICAgICA8L1JlYWtpdFBvcG92ZXI+XG4gICAgICA8L0NvbmRpdGlvbmFsV3JhcHBlcj5cbiAgICA8Lz5cbiAgKTtcbn07XG4iXX0=