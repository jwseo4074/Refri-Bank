"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ButtonFilePicker = exports.useStyles = exports.ButtonFilePickerStylesKey = void 0;
var clsx_1 = __importDefault(require("clsx"));
var React = __importStar(require("react"));
var styles_1 = require("../../styles");
var UniqueId_1 = require("../_private/UniqueId");
require("focus-visible");
exports.ButtonFilePickerStylesKey = 'ChromaButtonFilePicker';
exports.useStyles = (0, styles_1.makeStyles)(function (theme) { return ({
    root: {
        background: theme.palette.primary.main,
        border: "1px solid transparent",
        borderRadius: theme.pxToRem(4),
        color: theme.palette.common.white,
        cursor: 'pointer',
        display: 'inline-block',
        whiteSpace: 'nowrap',
        fontFamily: theme.typography.fontFamily,
        fontSize: theme.typography.button.fontSize,
        fontWeight: theme.typography.fontWeightBold,
        letterSpacing: theme.pxToRem(0.5),
        lineHeight: theme.pxToRem(19),
        margin: 0,
        maxHeight: theme.pxToRem(35),
        minWidth: theme.pxToRem(64),
        outline: 'none',
        overflow: 'hidden',
        paddingBottom: theme.pxToRem(7),
        paddingLeft: theme.pxToRem(11),
        paddingRight: theme.pxToRem(11),
        paddingTop: theme.pxToRem(7),
        position: 'relative',
        textAlign: 'center',
        textOverflow: 'ellipsis',
        transition: 'background-color 0.25s ease, color 0.25s ease, opacity 0.25s ease',
        userSelect: 'none',
        verticalAlign: 'middle',
        '&:hover, &:focus': {
            backgroundColor: theme.palette.primary[900],
            outline: 'none',
        },
        '&.focus.focus-visible, &:focus-within': {
            boxShadow: theme.boxShadows.focusVisible,
        },
    },
    inverse: {
        '&.focus.focus-visible, &:focus-within': {
            boxShadow: theme.boxShadows.focusVisibleInverse,
        },
    },
    rootDisabled: {
        cursor: 'default',
        pointerEvents: 'none',
        backgroundColor: theme.palette.primary.main,
        opacity: 0.44,
    },
    containedInverse: {
        backgroundColor: theme.palette.common.white,
        color: theme.palette.primary.main,
        '&:hover': {
            backgroundColor: theme.palette.common.white,
            color: theme.palette.primary.main,
            opacity: 0.85,
        },
        '&:focus': {
            backgroundColor: theme.palette.common.white,
            color: theme.palette.primary.main,
            opacity: 0.75,
        },
    },
    containedInverseDisabled: {
        backgroundColor: 'rgba(255, 255, 255, 0.45)',
        opacity: 1,
        color: theme.palette.text.secondary,
    },
    outlined: {
        backgroundColor: 'transparent',
        borderColor: theme.palette.primary.main,
        color: theme.palette.primary.main,
        transition: 'border 0.25s ease, color 0.25s ease',
        '&:hover, &:focus': {
            backgroundColor: 'transparent',
            borderColor: theme.palette.primary[900],
            color: theme.palette.primary[900],
        },
    },
    outlinedDisabled: {
        backgroundColor: 'transparent',
        borderColor: theme.palette.primary.main,
        color: theme.palette.primary.main,
        opacity: 0.44,
    },
    outlinedInverse: {
        borderColor: theme.palette.common.white,
        color: theme.palette.common.white,
        '&:hover': {
            color: theme.palette.common.white,
            opacity: 0.85,
            borderColor: 'rgba(255, 255, 255, 0.85)',
        },
        '&:focus': {
            color: theme.palette.common.white,
            opacity: 0.75,
            borderColor: 'rgba(255, 255, 255, 0.75)',
        },
    },
    outlinedInverseDisabled: {
        color: 'rgba(255, 255, 255, 0.45)',
        opacity: 1,
        borderColor: 'rgba(255, 255, 255, 0.45)',
    },
    text: {
        backgroundColor: 'transparent',
        color: theme.palette.primary.main,
        transition: 'color 0.25s ease',
        '&:hover, &:focus': {
            backgroundColor: 'transparent',
            color: theme.palette.primary[900],
        },
    },
    textDisabled: {
        backgroundColor: 'transparent',
        color: theme.palette.primary.main,
        opacity: 0.44,
    },
    textInverse: {
        color: theme.palette.common.white,
        '&:hover': {
            color: theme.palette.common.white,
            opacity: 0.85,
        },
        '&:focus': {
            color: theme.palette.common.white,
            opacity: 0.75,
        },
    },
    textInverseDisabled: {
        color: theme.palette.common.white,
        opacity: 0.44,
    },
    fullWidth: {
        width: '100%',
    },
    icon: {
        height: theme.spacing(2),
        marginRight: theme.spacing(1),
        position: 'relative',
        top: theme.pxToRem(-1),
        verticalAlign: 'middle',
        width: theme.spacing(2),
    },
    input: {
        position: 'absolute',
        top: 0,
        left: 0,
        opacity: 0,
        height: '100%',
        width: '100%',
        cursor: 'pointer',
        '&::-webkit-file-upload-button:hover': {
            cursor: 'pointer',
        },
    },
    disabled: {
        cursor: 'not-allowed',
    },
}); }, { name: exports.ButtonFilePickerStylesKey });
exports.ButtonFilePicker = React.forwardRef(function (_a, ref) {
    var _b, _c, _d;
    var accept = _a.accept, _e = _a.allowMultipleSelection, allowMultipleSelection = _e === void 0 ? false : _e, children = _a.children, className = _a.className, _f = _a.color, color = _f === void 0 ? 'default' : _f, _g = _a.disabled, disabled = _g === void 0 ? false : _g, fullWidth = _a.fullWidth, Icon = _a.icon, providedId = _a.id, onChange = _a.onChange, _h = _a.variant, variant = _h === void 0 ? 'contained' : _h, rootProps = __rest(_a, ["accept", "allowMultipleSelection", "children", "className", "color", "disabled", "fullWidth", "icon", "id", "onChange", "variant"]);
    var classes = (0, exports.useStyles)({});
    var id = React.useState(function () { return providedId || (0, UniqueId_1.generateUniqueId)('filePicker-'); })[0];
    return (React.createElement("label", __assign({ ref: ref, className: (0, clsx_1.default)(classes.root, (_b = {},
            _b[classes.outlined] = variant === 'outlined',
            _b[classes.text] = variant === 'text',
            _b), (_c = {},
            _c[classes.containedInverse] = variant === 'contained' && color === 'inverse',
            _c[classes.outlinedInverse] = variant === 'outlined' && color === 'inverse',
            _c[classes.textInverse] = variant === 'text' && color === 'inverse',
            _c), color === 'inverse' && classes.inverse, 
        // Root disabled class
        disabled && classes.rootDisabled, (_d = {},
            _d[classes.outlinedDisabled] = disabled && variant === 'outlined' && color === 'default',
            _d[classes.outlinedInverseDisabled] = disabled && variant === 'outlined' && color === 'inverse',
            _d[classes.textDisabled] = disabled && variant === 'text' && color === 'default',
            _d[classes.textInverseDisabled] = disabled && variant === 'text' && color === 'inverse',
            _d[classes.containedInverseDisabled] = disabled && variant === 'contained' && color === 'inverse',
            _d), fullWidth && classes.fullWidth, className), htmlFor: id }, rootProps),
        !!Icon && React.createElement(Icon, { role: "img", "aria-hidden": true, className: classes.icon }),
        children,
        React.createElement("input", { id: id, disabled: disabled, tabIndex: 0, className: (0, clsx_1.default)(classes.input, disabled && classes.disabled), type: "file", accept: accept, onChange: onChange, multiple: allowMultipleSelection })));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnV0dG9uRmlsZVBpY2tlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0J1dHRvbkZpbGVQaWNrZXIvQnV0dG9uRmlsZVBpY2tlci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsOENBQXdCO0FBQ3hCLDJDQUErQjtBQUMvQix1Q0FBMEM7QUFFMUMsaURBQXdEO0FBRXhELHlCQUF1QjtBQUVWLFFBQUEseUJBQXlCLEdBQUcsd0JBQXdCLENBQUM7QUFFckQsUUFBQSxTQUFTLEdBQUcsSUFBQSxtQkFBVSxFQUNqQyxVQUFDLEtBQUssSUFBSyxPQUFBLENBQUM7SUFDVixJQUFJLEVBQUU7UUFDSixVQUFVLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSTtRQUN0QyxNQUFNLEVBQUUsdUJBQXVCO1FBQy9CLFlBQVksRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUM5QixLQUFLLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSztRQUNqQyxNQUFNLEVBQUUsU0FBUztRQUNqQixPQUFPLEVBQUUsY0FBYztRQUN2QixVQUFVLEVBQUUsUUFBUTtRQUNwQixVQUFVLEVBQUUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxVQUFVO1FBQ3ZDLFFBQVEsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxRQUFRO1FBQzFDLFVBQVUsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLGNBQWM7UUFDM0MsYUFBYSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO1FBQ2pDLFVBQVUsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUM3QixNQUFNLEVBQUUsQ0FBQztRQUNULFNBQVMsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEVB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Y2xzeCc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtYWtlU3R5bGVzIH0gZnJvbSAnLi4vLi4vc3R5bGVzJztcbmltcG9ydCB7IEdldENsYXNzZXMgfSBmcm9tICcuLi8uLi90eXBlVXRpbHMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVVbmlxdWVJZCB9IGZyb20gJy4uL19wcml2YXRlL1VuaXF1ZUlkJztcbmltcG9ydCB7IEJ1dHRvblByb3BzIH0gZnJvbSAnLi4vQnV0dG9uJztcbmltcG9ydCAnZm9jdXMtdmlzaWJsZSc7XG5cbmV4cG9ydCBjb25zdCBCdXR0b25GaWxlUGlja2VyU3R5bGVzS2V5ID0gJ0Nocm9tYUJ1dHRvbkZpbGVQaWNrZXInO1xuXG5leHBvcnQgY29uc3QgdXNlU3R5bGVzID0gbWFrZVN0eWxlcyhcbiAgKHRoZW1lKSA9PiAoe1xuICAgIHJvb3Q6IHtcbiAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkIHRyYW5zcGFyZW50YCxcbiAgICAgIGJvcmRlclJhZGl1czogdGhlbWUucHhUb1JlbSg0KSxcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgIGZvbnRGYW1pbHk6IHRoZW1lLnR5cG9ncmFwaHkuZm9udEZhbWlseSxcbiAgICAgIGZvbnRTaXplOiB0aGVtZS50eXBvZ3JhcGh5LmJ1dHRvbi5mb250U2l6ZSxcbiAgICAgIGZvbnRXZWlnaHQ6IHRoZW1lLnR5cG9ncmFwaHkuZm9udFdlaWdodEJvbGQsXG4gICAgICBsZXR0ZXJTcGFjaW5nOiB0aGVtZS5weFRvUmVtKDAuNSksXG4gICAgICBsaW5lSGVpZ2h0OiB0aGVtZS5weFRvUmVtKDE5KSxcbiAgICAgIG1hcmdpbjogMCxcbiAgICAgIG1heEhlaWdodDogdGhlbWUucHhUb1JlbSgzNSksXG4gICAgICBtaW5XaWR0aDogdGhlbWUucHhUb1JlbSg2NCksXG4gICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBwYWRkaW5nQm90dG9tOiB0aGVtZS5weFRvUmVtKDcpLFxuICAgICAgcGFkZGluZ0xlZnQ6IHRoZW1lLnB4VG9SZW0oMTEpLFxuICAgICAgcGFkZGluZ1JpZ2h0OiB0aGVtZS5weFRvUmVtKDExKSxcbiAgICAgIHBhZGRpbmdUb3A6IHRoZW1lLnB4VG9SZW0oNyksXG4gICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgICB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsXG4gICAgICB0cmFuc2l0aW9uOlxuICAgICAgICAnYmFja2dyb3VuZC1jb2xvciAwLjI1cyBlYXNlLCBjb2xvciAwLjI1cyBlYXNlLCBvcGFjaXR5IDAuMjVzIGVhc2UnLFxuICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgdmVydGljYWxBbGlnbjogJ21pZGRsZScsXG4gICAgICAnJjpob3ZlciwgJjpmb2N1cyc6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5wYWxldHRlLnByaW1hcnlbOTAwXSxcbiAgICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgfSxcbiAgICAgICcmLmZvY3VzLmZvY3VzLXZpc2libGUsICY6Zm9jdXMtd2l0aGluJzoge1xuICAgICAgICBib3hTaGFkb3c6IHRoZW1lLmJveFNoYWRvd3MuZm9jdXNWaXNpYmxlLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGludmVyc2U6IHtcbiAgICAgICcmLmZvY3VzLmZvY3VzLXZpc2libGUsICY6Zm9jdXMtd2l0aGluJzoge1xuICAgICAgICBib3hTaGFkb3c6IHRoZW1lLmJveFNoYWRvd3MuZm9jdXNWaXNpYmxlSW52ZXJzZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICByb290RGlzYWJsZWQ6IHtcbiAgICAgIGN1cnNvcjogJ2RlZmF1bHQnLFxuICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5wYWxldHRlLnByaW1hcnkubWFpbixcbiAgICAgIG9wYWNpdHk6IDAuNDQsXG4gICAgfSxcbiAgICBjb250YWluZWRJbnZlcnNlOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgICAgJyY6aG92ZXInOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnByaW1hcnkubWFpbixcbiAgICAgICAgb3BhY2l0eTogMC44NSxcbiAgICAgIH0sXG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgICAgICBvcGFjaXR5OiAwLjc1LFxuICAgICAgfSxcbiAgICB9LFxuICAgIGNvbnRhaW5lZEludmVyc2VEaXNhYmxlZDoge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjQ1KScsXG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUudGV4dC5zZWNvbmRhcnksXG4gICAgfSxcbiAgICBvdXRsaW5lZDoge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgYm9yZGVyQ29sb3I6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgICAgdHJhbnNpdGlvbjogJ2JvcmRlciAwLjI1cyBlYXNlLCBjb2xvciAwLjI1cyBlYXNlJyxcbiAgICAgICcmOmhvdmVyLCAmOmZvY3VzJzoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgIGJvcmRlckNvbG9yOiB0aGVtZS5wYWxldHRlLnByaW1hcnlbOTAwXSxcbiAgICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUucHJpbWFyeVs5MDBdLFxuICAgICAgfSxcbiAgICB9LFxuICAgIG91dGxpbmVkRGlzYWJsZWQ6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgIGJvcmRlckNvbG9yOiB0aGVtZS5wYWxldHRlLnByaW1hcnkubWFpbixcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnByaW1hcnkubWFpbixcbiAgICAgIG9wYWNpdHk6IDAuNDQsXG4gICAgfSxcbiAgICBvdXRsaW5lZEludmVyc2U6IHtcbiAgICAgIGJvcmRlckNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgICcmOmhvdmVyJzoge1xuICAgICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICAgIG9wYWNpdHk6IDAuODUsXG4gICAgICAgIGJvcmRlckNvbG9yOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjg1KScsXG4gICAgICB9LFxuICAgICAgJyY6Zm9jdXMnOiB7XG4gICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgICAgb3BhY2l0eTogMC43NSxcbiAgICAgICAgYm9yZGVyQ29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBvdXRsaW5lZEludmVyc2VEaXNhYmxlZDoge1xuICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNDUpJyxcbiAgICAgIG9wYWNpdHk6IDEsXG4gICAgICBib3JkZXJDb2xvcjogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC40NSknLFxuICAgIH0sXG4gICAgdGV4dDoge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgICAgdHJhbnNpdGlvbjogJ2NvbG9yIDAuMjVzIGVhc2UnLFxuICAgICAgJyY6aG92ZXIsICY6Zm9jdXMnOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUucHJpbWFyeVs5MDBdLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHRleHREaXNhYmxlZDoge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgICAgb3BhY2l0eTogMC40NCxcbiAgICB9LFxuICAgIHRleHRJbnZlcnNlOiB7XG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICAnJjpob3Zlcic6IHtcbiAgICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgICBvcGFjaXR5OiAwLjg1LFxuICAgICAgfSxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICAgIG9wYWNpdHk6IDAuNzUsXG4gICAgICB9LFxuICAgIH0sXG4gICAgdGV4dEludmVyc2VEaXNhYmxlZDoge1xuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgb3BhY2l0eTogMC40NCxcbiAgICB9LFxuICAgIGZ1bGxXaWR0aDoge1xuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICB9LFxuICAgIGljb246IHtcbiAgICAgIGhlaWdodDogdGhlbWUuc3BhY2luZygyKSxcbiAgICAgIG1hcmdpblJpZ2h0OiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB0b3A6IHRoZW1lLnB4VG9SZW0oLTEpLFxuICAgICAgdmVydGljYWxBbGlnbjogJ21pZGRsZScsXG4gICAgICB3aWR0aDogdGhlbWUuc3BhY2luZygyKSxcbiAgICB9LFxuICAgIGlucHV0OiB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIHRvcDogMCxcbiAgICAgIGxlZnQ6IDAsXG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAnJjo6LXdlYmtpdC1maWxlLXVwbG9hZC1idXR0b246aG92ZXInOiB7XG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGRpc2FibGVkOiB7XG4gICAgICBjdXJzb3I6ICdub3QtYWxsb3dlZCcsXG4gICAgfSxcbiAgfSksXG4gIHsgbmFtZTogQnV0dG9uRmlsZVBpY2tlclN0eWxlc0tleSB9XG4pO1xuXG5leHBvcnQgdHlwZSBCdXR0b25GaWxlUGlja2VyQ2xhc3NlcyA9IEdldENsYXNzZXM8dHlwZW9mIHVzZVN0eWxlcz47XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnV0dG9uRmlsZVBpY2tlclByb3BzIHtcbiAgYWNjZXB0Pzogc3RyaW5nO1xuICBhbGxvd011bHRpcGxlU2VsZWN0aW9uPzogYm9vbGVhbjtcbiAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGU7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgY29sb3I/OiBCdXR0b25Qcm9wc1snY29sb3InXTtcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICBmdWxsV2lkdGg/OiBCdXR0b25Qcm9wc1snZnVsbFdpZHRoJ107XG4gIGljb24/OiBCdXR0b25Qcm9wc1snaWNvbiddO1xuICBpZD86IHN0cmluZztcbiAgb25DaGFuZ2U/OiAoKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4gdm9pZCkgfCB1bmRlZmluZWQ7XG4gIHZhcmlhbnQ/OiBCdXR0b25Qcm9wc1sndmFyaWFudCddO1xufVxuXG5leHBvcnQgY29uc3QgQnV0dG9uRmlsZVBpY2tlciA9IFJlYWN0LmZvcndhcmRSZWY8XG4gIEhUTUxMYWJlbEVsZW1lbnQsXG4gIEJ1dHRvbkZpbGVQaWNrZXJQcm9wc1xuPihcbiAgKFxuICAgIHtcbiAgICAgIGFjY2VwdCxcbiAgICAgIGFsbG93TXVsdGlwbGVTZWxlY3Rpb24gPSBmYWxzZSxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgY2xhc3NOYW1lLFxuICAgICAgY29sb3IgPSAnZGVmYXVsdCcsXG4gICAgICBkaXNhYmxlZCA9IGZhbHNlLFxuICAgICAgZnVsbFdpZHRoLFxuICAgICAgaWNvbjogSWNvbixcbiAgICAgIGlkOiBwcm92aWRlZElkLFxuICAgICAgb25DaGFuZ2UsXG4gICAgICB2YXJpYW50ID0gJ2NvbnRhaW5lZCcsXG4gICAgICAuLi5yb290UHJvcHNcbiAgICB9LFxuICAgIHJlZlxuICApID0+IHtcbiAgICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKHt9KTtcbiAgICBjb25zdCBbaWRdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihcbiAgICAgICgpID0+IHByb3ZpZGVkSWQgfHwgZ2VuZXJhdGVVbmlxdWVJZCgnZmlsZVBpY2tlci0nKVxuICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGxhYmVsXG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgY2xhc3Nlcy5yb290LFxuICAgICAgICAgIC8vIFZhcmlhbnQgY2xhc3Nlc1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIFtjbGFzc2VzLm91dGxpbmVkXTogdmFyaWFudCA9PT0gJ291dGxpbmVkJyxcbiAgICAgICAgICAgIFtjbGFzc2VzLnRleHRdOiB2YXJpYW50ID09PSAndGV4dCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgICAvLyBWYXJpYW50ICsgQ29sb3IgY29tYmluYXRpb24gY2xhc3Nlc1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIFtjbGFzc2VzLmNvbnRhaW5lZEludmVyc2VdOlxuICAgICAgICAgICAgICB2YXJpYW50ID09PSAnY29udGFpbmVkJyAmJiBjb2xvciA9PT0gJ2ludmVyc2UnLFxuICAgICAgICAgICAgW2NsYXNzZXMub3V0bGluZWRJbnZlcnNlXTpcbiAgICAgICAgICAgICAgdmFyaWFudCA9PT0gJ291dGxpbmVkJyAmJiBjb2xvciA9PT0gJ2ludmVyc2UnLFxuICAgICAgICAgICAgW2NsYXNzZXMudGV4dEludmVyc2VdOiB2YXJpYW50ID09PSAndGV4dCcgJiYgY29sb3IgPT09ICdpbnZlcnNlJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbG9yID09PSAnaW52ZXJzZScgJiYgY2xhc3Nlcy5pbnZlcnNlLFxuICAgICAgICAgIC8vIFJvb3QgZGlzYWJsZWQgY2xhc3NcbiAgICAgICAgICBkaXNhYmxlZCAmJiBjbGFzc2VzLnJvb3REaXNhYmxlZCxcbiAgICAgICAgICAvLyBWYXJpYW50ICsgQ29sb3IgRGlzYWJsZWQgY29tYmluYXRpb24gY2xhc3Nlc1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIFtjbGFzc2VzLm91dGxpbmVkRGlzYWJsZWRdOlxuICAgICAgICAgICAgICBkaXNhYmxlZCAmJiB2YXJpYW50ID09PSAnb3V0bGluZWQnICYmIGNvbG9yID09PSAnZGVmYXVsdCcsXG4gICAgICAgICAgICBbY2xhc3Nlcy5vdXRsaW5lZEludmVyc2VEaXNhYmxlZF06XG4gICAgICAgICAgICAgIGRpc2FibGVkICYmIHZhcmlhbnQgPT09ICdvdXRsaW5lZCcgJiYgY29sb3IgPT09ICdpbnZlcnNlJyxcbiAgICAgICAgICAgIFtjbGFzc2VzLnRleHREaXNhYmxlZF06XG4gICAgICAgICAgICAgIGRpc2FibGVkICYmIHZhcmlhbnQgPT09ICd0ZXh0JyAmJiBjb2xvciA9PT0gJ2RlZmF1bHQnLFxuICAgICAgICAgICAgW2NsYXNzZXMudGV4dEludmVyc2VEaXNhYmxlZF06XG4gICAgICAgICAgICAgIGRpc2FibGVkICYmIHZhcmlhbnQgPT09ICd0ZXh0JyAmJiBjb2xvciA9PT0gJ2ludmVyc2UnLFxuICAgICAgICAgICAgW2NsYXNzZXMuY29udGFpbmVkSW52ZXJzZURpc2FibGVkXTpcbiAgICAgICAgICAgICAgZGlzYWJsZWQgJiYgdmFyaWFudCA9PT0gJ2NvbnRhaW5lZCcgJiYgY29sb3IgPT09ICdpbnZlcnNlJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZ1bGxXaWR0aCAmJiBjbGFzc2VzLmZ1bGxXaWR0aCxcbiAgICAgICAgICBjbGFzc05hbWVcbiAgICAgICAgKX1cbiAgICAgICAgaHRtbEZvcj17aWR9XG4gICAgICAgIHsuLi5yb290UHJvcHN9XG4gICAgICA+XG4gICAgICAgIHshIUljb24gJiYgPEljb24gcm9sZT1cImltZ1wiIGFyaWEtaGlkZGVuIGNsYXNzTmFtZT17Y2xhc3Nlcy5pY29ufSAvPn1cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICBpZD17aWR9XG4gICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgIHRhYkluZGV4PXswfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChjbGFzc2VzLmlucHV0LCBkaXNhYmxlZCAmJiBjbGFzc2VzLmRpc2FibGVkKX1cbiAgICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgICAgYWNjZXB0PXthY2NlcHR9XG4gICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgICAgIG11bHRpcGxlPXthbGxvd011bHRpcGxlU2VsZWN0aW9ufVxuICAgICAgICAvPlxuICAgICAgPC9sYWJlbD5cbiAgICApO1xuICB9XG4pO1xuIl19