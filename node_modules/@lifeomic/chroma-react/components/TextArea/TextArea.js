"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
var clsx_1 = __importDefault(require("clsx"));
var React = __importStar(require("react"));
var styles_1 = require("../../styles");
var forms_1 = require("../_private/forms");
var UniqueId_1 = require("../_private/UniqueId");
var Tooltip_1 = require("../Tooltip");
var screenreaderOnly_1 = require("../../styles/screenreaderOnly");
exports.TextAreaStylesKey = 'ChromaTextArea';
exports.useStyles = styles_1.makeStyles(function (theme) { return ({
    root: {},
    label: {
        alignItems: 'center',
        color: theme.palette.black[800],
        display: 'flex',
        fontSize: theme.pxToRem(14),
        fontWeight: theme.typography.fontWeightBold,
        marginBottom: theme.spacing(1),
        '&:empty': {
            marginBottom: theme.spacing(0),
        },
    },
    labelIcon: {
        marginLeft: theme.spacing(0.75),
        color: theme.palette.primary.main,
    },
    labelIconInverse: {
        mixBlendMode: 'screen',
    },
    labelSecondary: {
        color: theme.palette.text.hint,
        fontSize: theme.pxToRem(11),
        display: 'inline-block',
        margin: theme.spacing(0, 0.75),
    },
    labelInverse: {
        color: theme.palette.common.white,
        '&$labelSecondary': {
            opacity: 0.9,
        },
    },
    textarea: {
        backgroundColor: 'rgba(132, 137, 166, 0.15)',
        border: "1px solid transparent",
        borderRadius: theme.pxToRem(4),
        color: theme.palette.text.primary,
        fontFamily: theme.typography.fontFamily,
        fontSize: theme.pxToRem(14),
        lineHeight: 1.25,
        maxHeight: '6rem',
        maxWidth: '100%',
        minHeight: '2.5rem',
        minWidth: theme.pxToRem(175),
        paddingBottom: theme.spacing(1),
        paddingLeft: theme.spacing(1.25),
        paddingRight: theme.spacing(1.25),
        paddingTop: theme.spacing(1),
        transition: 'border 0.25s ease',
        '&:focus': {
            outline: 'none',
            backgroundColor: 'rgba(255, 255, 255, 0.5)',
            border: "1px solid rgba(132, 137, 166, 0.45)",
        },
        '&:disabled': {
            cursor: 'not-allowed',
            opacity: 0.625,
        },
        '&:read-only': {
            cursor: 'not-allowed',
            opacity: 0.9,
            '&:focus': {
                backgroundColor: 'rgba(132, 137, 166, 0.15)',
                border: "1px solid transparent",
            }
        },
        '&::-webkit-input-placeholder': {
            color: theme.palette.black[400],
        },
        '&::-moz-placeholder': {
            color: theme.palette.black[400],
        },
        '&:-ms-input-placeholder': {
            color: theme.palette.black[400],
        },
        '&:-moz-placeholder': {
            color: theme.palette.black[400],
        },
    },
    textareaInverse: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        color: theme.palette.common.white,
        '&:focus': {
            backgroundColor: 'rgba(230, 231, 237, 0.1)',
            border: "1px solid rgba(230, 231, 237, 0.55)",
        },
        '&:read-only': {
            opacity: 1,
            '&:focus': {
                backgroundColor: 'rgba(230, 231, 237, 0.1)',
            }
        },
        '&::-webkit-input-placeholder': {
            color: 'rgba(255, 255, 255, 0.8)',
        },
        '&::-moz-placeholder': {
            color: 'rgba(255, 255, 255, 0.8)',
        },
        '&:-ms-input-placeholder': {
            color: 'rgba(255, 255, 255, 0.8)',
        },
        '&:-moz-placeholder': {
            color: 'rgba(255, 255, 255, 0.8)',
        },
    },
    textareaError: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        border: "1px solid " + theme.palette.error.main,
        '&:focus': {
            border: "1px solid " + theme.palette.error.main,
        },
    },
    fullWidth: {
        width: '100%',
    },
    message: {
        marginLeft: 0,
    },
    tooltipContainer: {
        display: 'flex',
        outline: 'none',
    },
    srOnly: __assign({}, screenreaderOnly_1.screenreaderOnlyStyles),
}); }, { name: exports.TextAreaStylesKey });
exports.TextArea = React.forwardRef(function (_a, ref) {
    var _b, _c;
    var ariaLabel = _a["aria-label"], className = _a.className, color = _a.color, errorMessage = _a.errorMessage, fullWidth = _a.fullWidth, hasError = _a.hasError, helpMessage = _a.helpMessage, Icon = _a.icon, id = _a.id, label = _a.label, name = _a.name, secondaryLabel = _a.secondaryLabel, textAreaClassName = _a.textAreaClassName, tooltipMessage = _a.tooltipMessage, rootProps = __rest(_a, ['aria-label', "className", "color", "errorMessage", "fullWidth", "hasError", "helpMessage", "icon", "id", "label", "name", "secondaryLabel", "textAreaClassName", "tooltipMessage"]);
    var classes = exports.useStyles({});
    var uniqueId = React.useState(function () { return id || name || UniqueId_1.generateUniqueId('textArea-'); })[0];
    if (!label && !ariaLabel && process.env.NODE_ENV === 'development') {
        throw new Error('If a "label" is not provided to TextArea, please provide "aria-label".');
    }
    return (React.createElement("div", { className: clsx_1.default(classes.root, className) },
        React.createElement("label", { className: clsx_1.default(classes.label, (_b = {},
                _b[classes.labelInverse] = color === 'inverse',
                _b), !label && ariaLabel && classes.srOnly), htmlFor: uniqueId },
            label || ariaLabel,
            !!Icon && tooltipMessage && (React.createElement(Tooltip_1.Tooltip, { title: tooltipMessage },
                React.createElement("span", { className: classes.tooltipContainer },
                    React.createElement(Icon, { className: clsx_1.default(classes.labelIcon, color === 'inverse' && classes.labelIconInverse), width: 16, height: 16, role: "img", "aria-hidden": true })))),
            secondaryLabel && (React.createElement("span", { className: clsx_1.default(classes.labelSecondary, color === 'inverse' && classes.labelInverse) }, secondaryLabel))),
        React.createElement("textarea", __assign({ "aria-describedby": forms_1.buildDescribedBy({
                hasError: hasError,
                hasHelpMessage: !!helpMessage,
                uniqueId: uniqueId,
            }), className: clsx_1.default(classes.textarea, (_c = {}, _c[classes.textareaInverse] = color === 'inverse', _c), fullWidth && classes.fullWidth, hasError && classes.textareaError, textAreaClassName), cols: 1, id: uniqueId, ref: ref, name: name }, rootProps)),
        helpMessage && (React.createElement(forms_1.FormHelpMessage, { color: color, className: classes.message, rootElementId: uniqueId, describedById: forms_1.helpFor(uniqueId) }, helpMessage)),
        hasError && errorMessage && (React.createElement(forms_1.FormErrorMessage, { color: color, className: classes.message, rootElementId: uniqueId, describedById: forms_1.errorFor(uniqueId) }, errorMessage))));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGV4dEFyZWEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9UZXh0QXJlYS9UZXh0QXJlYS50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDhDQUF3QjtBQUN4QiwyQ0FBK0I7QUFDL0IsdUNBQTBDO0FBRTFDLDJDQU8yQjtBQUMzQixpREFBd0Q7QUFDeEQsc0NBQXFDO0FBQ3JDLGtFQUF1RTtBQUUxRCxRQUFBLGlCQUFpQixHQUFHLGdCQUFnQixDQUFDO0FBRXJDLFFBQUEsU0FBUyxHQUFHLG1CQUFVLENBQ2pDLFVBQUMsS0FBSyxJQUFLLE9BQUEsQ0FBQztJQUNWLElBQUksRUFBRSxFQUFFO0lBQ1IsS0FBSyxFQUFFO1FBQ0wsVUFBVSxFQUFFLFFBQVE7UUFDcEIsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztRQUMvQixPQUFPLEVBQUUsTUFBTTtRQUNmLFFBQVEsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUMzQixVQUFVLEVBQUUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxjQUFjO1FBQzNDLFlBQVksRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUM5QixTQUFTLEVBQUU7WUFDVCxZQUFZLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7U0FDL0I7S0FDRjtJQUNELFNBQVMsRUFBRTtRQUNULFVBQVUsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztRQUMvQixLQUFLLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSTtLQUNsQztJQUNELGdCQUFnQixFQUFFO1FBQ2hCLFlBQVksRUFBRSxRQUFRO0tBQ3ZCO0lBQ0QsY0FBYyxFQUFFO1FBQ2QsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFB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LE9BQU8sQ0FBQyxTQUFTLEVBQzlCLFFBQVEsSUFBSSxPQUFPLENBQUMsYUFBYSxFQUNqQyxpQkFBaUIsQ0FDbEIsRUFDRCxJQUFJLEVBQUUsQ0FBQyxFQUNQLEVBQUUsRUFBRSxRQUFRLEVBQ1osR0FBRyxFQUFFLEdBQUcsRUFDUixJQUFJLEVBQUUsSUFBSSxJQUNOLFNBQVMsRUFDYjtRQUNELFdBQVcsSUFBSSxDQUNkLG9CQUFDLHVCQUFlLElBQ2QsS0FBSyxFQUFFLEtBQUssRUFDWixTQUFTLEVBQUUsT0FBTyxDQUFDLE9BQU8sRUFDMUIsYUFBYSxFQUFFLFFBQVEsRUFDdkIsYUFBYSxFQUFFLGVBQU8sQ0FBQyxRQUFRLENBQUMsSUFFL0IsV0FBVyxDQUNJLENBQ25CO1FBQ0EsUUFBUSxJQUFJLFlBQVksSUFBSSxDQUMzQixvQkFBQyx3QkFBZ0IsSUFDZixLQUFLLEVBQUUsS0FBSyxFQUNaLFNBQVMsRUFBRSxPQUFPLENBQUMsT0FBTyxFQUMxQixhQUFhLEVBQUUsUUFBUSxFQUN2QixhQUFhLEVBQUUsZ0JBQVEsQ0FBQyxRQUFRLENBQUMsSUFFaEMsWUFBWSxDQUNJLENBQ3BCLENBQ0csQ0FDUCxDQUFDO0FBQ0osQ0FBQyxDQUNGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2xzeCBmcm9tICdjbHN4JztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG1ha2VTdHlsZXMgfSBmcm9tICcuLi8uLi9zdHlsZXMnO1xuaW1wb3J0IHsgR2V0Q2xhc3NlcyB9IGZyb20gJy4uLy4uL3R5cGVVdGlscyc7XG5pbXBvcnQge1xuICBCYXNlRm9ybUVsZW1lbnQsXG4gIGJ1aWxkRGVzY3JpYmVkQnksXG4gIGVycm9yRm9yLFxuICBGb3JtRXJyb3JNZXNzYWdlLFxuICBGb3JtSGVscE1lc3NhZ2UsXG4gIGhlbHBGb3IsXG59IGZyb20gJy4uL19wcml2YXRlL2Zvcm1zJztcbmltcG9ydCB7IGdlbmVyYXRlVW5pcXVlSWQgfSBmcm9tICcuLi9fcHJpdmF0ZS9VbmlxdWVJZCc7XG5pbXBvcnQgeyBUb29sdGlwIH0gZnJvbSAnLi4vVG9vbHRpcCc7XG5pbXBvcnQgeyBzY3JlZW5yZWFkZXJPbmx5U3R5bGVzIH0gZnJvbSAnLi4vLi4vc3R5bGVzL3NjcmVlbnJlYWRlck9ubHknO1xuXG5leHBvcnQgY29uc3QgVGV4dEFyZWFTdHlsZXNLZXkgPSAnQ2hyb21hVGV4dEFyZWEnO1xuXG5leHBvcnQgY29uc3QgdXNlU3R5bGVzID0gbWFrZVN0eWxlcyhcbiAgKHRoZW1lKSA9PiAoe1xuICAgIHJvb3Q6IHt9LFxuICAgIGxhYmVsOiB7XG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmJsYWNrWzgwMF0sXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBmb250U2l6ZTogdGhlbWUucHhUb1JlbSgxNCksXG4gICAgICBmb250V2VpZ2h0OiB0aGVtZS50eXBvZ3JhcGh5LmZvbnRXZWlnaHRCb2xkLFxuICAgICAgbWFyZ2luQm90dG9tOiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgJyY6ZW1wdHknOiB7XG4gICAgICAgIG1hcmdpbkJvdHRvbTogdGhlbWUuc3BhY2luZygwKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsYWJlbEljb246IHtcbiAgICAgIG1hcmdpbkxlZnQ6IHRoZW1lLnNwYWNpbmcoMC43NSksXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5wcmltYXJ5Lm1haW4sXG4gICAgfSxcbiAgICBsYWJlbEljb25JbnZlcnNlOiB7XG4gICAgICBtaXhCbGVuZE1vZGU6ICdzY3JlZW4nLFxuICAgIH0sXG4gICAgbGFiZWxTZWNvbmRhcnk6IHtcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnRleHQuaGludCxcbiAgICAgIGZvbnRTaXplOiB0aGVtZS5weFRvUmVtKDExKSxcbiAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgbWFyZ2luOiB0aGVtZS5zcGFjaW5nKDAsIDAuNzUpLFxuICAgIH0sXG4gICAgbGFiZWxJbnZlcnNlOiB7XG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICAnJiRsYWJlbFNlY29uZGFyeSc6IHtcbiAgICAgICAgb3BhY2l0eTogMC45LFxuICAgICAgfSxcbiAgICB9LFxuICAgIHRleHRhcmVhOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDEzMiwgMTM3LCAxNjYsIDAuMTUpJyxcbiAgICAgIGJvcmRlcjogYDFweCBzb2xpZCB0cmFuc3BhcmVudGAsXG4gICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnB4VG9SZW0oNCksXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS50ZXh0LnByaW1hcnksXG4gICAgICBmb250RmFtaWx5OiB0aGVtZS50eXBvZ3JhcGh5LmZvbnRGYW1pbHksXG4gICAgICBmb250U2l6ZTogdGhlbWUucHhUb1JlbSgxNCksXG4gICAgICBsaW5lSGVpZ2h0OiAxLjI1LFxuICAgICAgbWF4SGVpZ2h0OiAnNnJlbScsXG4gICAgICBtYXhXaWR0aDogJzEwMCUnLFxuICAgICAgbWluSGVpZ2h0OiAnMi41cmVtJyxcbiAgICAgIG1pbldpZHRoOiB0aGVtZS5weFRvUmVtKDE3NSksXG4gICAgICBwYWRkaW5nQm90dG9tOiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgcGFkZGluZ0xlZnQ6IHRoZW1lLnNwYWNpbmcoMS4yNSksXG4gICAgICBwYWRkaW5nUmlnaHQ6IHRoZW1lLnNwYWNpbmcoMS4yNSksXG4gICAgICBwYWRkaW5nVG9wOiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgdHJhbnNpdGlvbjogJ2JvcmRlciAwLjI1cyBlYXNlJyxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC41KScsXG4gICAgICAgIGJvcmRlcjogYDFweCBzb2xpZCByZ2JhKDEzMiwgMTM3LCAxNjYsIDAuNDUpYCxcbiAgICAgIH0sXG4gICAgICAnJjpkaXNhYmxlZCc6IHtcbiAgICAgICAgY3Vyc29yOiAnbm90LWFsbG93ZWQnLFxuICAgICAgICBvcGFjaXR5OiAwLjYyNSxcbiAgICAgIH0sXG4gICAgICAnJjpyZWFkLW9ubHknOiB7XG4gICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJyxcbiAgICAgICAgb3BhY2l0eTogMC45LFxuICAgICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDEzMiwgMTM3LCAxNjYsIDAuMTUpJyxcbiAgICAgICAgICBib3JkZXI6IGAxcHggc29saWQgdHJhbnNwYXJlbnRgLFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJyY6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXInOiB7XG4gICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmJsYWNrWzQwMF0sXG4gICAgICB9LFxuICAgICAgJyY6Oi1tb3otcGxhY2Vob2xkZXInOiB7XG4gICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmJsYWNrWzQwMF0sXG4gICAgICB9LFxuICAgICAgJyY6LW1zLWlucHV0LXBsYWNlaG9sZGVyJzoge1xuICAgICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5ibGFja1s0MDBdLFxuICAgICAgfSxcbiAgICAgICcmOi1tb3otcGxhY2Vob2xkZXInOiB7XG4gICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmJsYWNrWzQwMF0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgdGV4dGFyZWFJbnZlcnNlOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDIzMCwgMjMxLCAyMzcsIDAuMSknLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgJyY6Zm9jdXMnOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjMwLCAyMzEsIDIzNywgMC4xKScsXG4gICAgICAgIGJvcmRlcjogYDFweCBzb2xpZCByZ2JhKDIzMCwgMjMxLCAyMzcsIDAuNTUpYCxcbiAgICAgIH0sXG4gICAgICAnJjpyZWFkLW9ubHknOiB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjMwLCAyMzEsIDIzNywgMC4xKScsXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnJjo6LXdlYmtpdC1pbnB1dC1wbGFjZWhvbGRlcic6IHtcbiAgICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCknLFxuICAgICAgfSxcbiAgICAgICcmOjotbW96LXBsYWNlaG9sZGVyJzoge1xuICAgICAgICBjb2xvcjogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC44KScsXG4gICAgICB9LFxuICAgICAgJyY6LW1zLWlucHV0LXBsYWNlaG9sZGVyJzoge1xuICAgICAgICBjb2xvcjogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC44KScsXG4gICAgICB9LFxuICAgICAgJyY6LW1vei1wbGFjZWhvbGRlcic6IHtcbiAgICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCknLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHRleHRhcmVhRXJyb3I6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjMwLCAyMzEsIDIzNywgMC4xKScsXG4gICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5wYWxldHRlLmVycm9yLm1haW59YCxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5wYWxldHRlLmVycm9yLm1haW59YCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBmdWxsV2lkdGg6IHtcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgfSxcbiAgICBtZXNzYWdlOiB7XG4gICAgICBtYXJnaW5MZWZ0OiAwLFxuICAgIH0sXG4gICAgdG9vbHRpcENvbnRhaW5lcjoge1xuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgIH0sXG4gICAgc3JPbmx5OiB7XG4gICAgICAuLi5zY3JlZW5yZWFkZXJPbmx5U3R5bGVzLFxuICAgIH0sXG4gIH0pLFxuICB7IG5hbWU6IFRleHRBcmVhU3R5bGVzS2V5IH1cbik7XG5cbmV4cG9ydCB0eXBlIFRleHRBcmVhQ2xhc3NlcyA9IEdldENsYXNzZXM8dHlwZW9mIHVzZVN0eWxlcz47XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dEFyZWFQcm9wc1xuICBleHRlbmRzIFJlYWN0LkNvbXBvbmVudFByb3BzV2l0aG91dFJlZjwndGV4dGFyZWEnPiB7XG4gIGNvbG9yPzogQmFzZUZvcm1FbGVtZW50Wydjb2xvciddO1xuICBoYXNFcnJvcj86IEJhc2VGb3JtRWxlbWVudFsnaGFzRXJyb3InXTtcbiAgZXJyb3JNZXNzYWdlPzogQmFzZUZvcm1FbGVtZW50WydlcnJvck1lc3NhZ2UnXTtcbiAgaGVscE1lc3NhZ2U/OiBCYXNlRm9ybUVsZW1lbnRbJ2hlbHBNZXNzYWdlJ107XG4gIGxhYmVsPzogQmFzZUZvcm1FbGVtZW50WydsYWJlbCddO1xuICBmdWxsV2lkdGg/OiBib29sZWFuO1xuICBzZWNvbmRhcnlMYWJlbD86IHN0cmluZztcbiAgaWNvbj86IFJlYWN0LkNvbXBvbmVudFR5cGU8UmVhY3QuU1ZHUHJvcHM8U1ZHU1ZHRWxlbWVudD4+O1xuICB0b29sdGlwTWVzc2FnZT86IHN0cmluZztcbiAgdGV4dEFyZWFDbGFzc05hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBUZXh0QXJlYSA9IFJlYWN0LmZvcndhcmRSZWY8SFRNTFRleHRBcmVhRWxlbWVudCwgVGV4dEFyZWFQcm9wcz4oXG4gIChcbiAgICB7XG4gICAgICBbJ2FyaWEtbGFiZWwnXTogYXJpYUxhYmVsLFxuICAgICAgY2xhc3NOYW1lLFxuICAgICAgY29sb3IsXG4gICAgICBlcnJvck1lc3NhZ2UsXG4gICAgICBmdWxsV2lkdGgsXG4gICAgICBoYXNFcnJvcixcbiAgICAgIGhlbHBNZXNzYWdlLFxuICAgICAgaWNvbjogSWNvbixcbiAgICAgIGlkLFxuICAgICAgbGFiZWwsXG4gICAgICBuYW1lLFxuICAgICAgc2Vjb25kYXJ5TGFiZWwsXG4gICAgICB0ZXh0QXJlYUNsYXNzTmFtZSxcbiAgICAgIHRvb2x0aXBNZXNzYWdlLFxuICAgICAgLi4ucm9vdFByb3BzXG4gICAgfSxcbiAgICByZWZcbiAgKSA9PiB7XG4gICAgY29uc3QgY2xhc3NlcyA9IHVzZVN0eWxlcyh7fSk7XG5cbiAgICBjb25zdCBbdW5pcXVlSWRdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihcbiAgICAgICgpID0+IGlkIHx8IG5hbWUgfHwgZ2VuZXJhdGVVbmlxdWVJZCgndGV4dEFyZWEtJylcbiAgICApO1xuXG4gICAgaWYgKCFsYWJlbCAmJiAhYXJpYUxhYmVsICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJZiBhIFwibGFiZWxcIiBpcyBub3QgcHJvdmlkZWQgdG8gVGV4dEFyZWEsIHBsZWFzZSBwcm92aWRlIFwiYXJpYS1sYWJlbFwiLidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbHN4KGNsYXNzZXMucm9vdCwgY2xhc3NOYW1lKX0+XG4gICAgICAgIDxsYWJlbFxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgIGNsYXNzZXMubGFiZWwsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFtjbGFzc2VzLmxhYmVsSW52ZXJzZV06IGNvbG9yID09PSAnaW52ZXJzZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgIWxhYmVsICYmIGFyaWFMYWJlbCAmJiBjbGFzc2VzLnNyT25seVxuICAgICAgICAgICl9XG4gICAgICAgICAgaHRtbEZvcj17dW5pcXVlSWR9XG4gICAgICAgID5cbiAgICAgICAgICB7bGFiZWwgfHwgYXJpYUxhYmVsfVxuICAgICAgICAgIHshIUljb24gJiYgdG9vbHRpcE1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e3Rvb2x0aXBNZXNzYWdlfT5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtjbGFzc2VzLnRvb2x0aXBDb250YWluZXJ9PlxuICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzZXMubGFiZWxJY29uLFxuICAgICAgICAgICAgICAgICAgICBjb2xvciA9PT0gJ2ludmVyc2UnICYmIGNsYXNzZXMubGFiZWxJY29uSW52ZXJzZVxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHdpZHRoPXsxNn1cbiAgICAgICAgICAgICAgICAgIGhlaWdodD17MTZ9XG4gICAgICAgICAgICAgICAgICByb2xlPVwiaW1nXCJcbiAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICl9XG4gICAgICAgICAge3NlY29uZGFyeUxhYmVsICYmIChcbiAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgICAgICBjbGFzc2VzLmxhYmVsU2Vjb25kYXJ5LFxuICAgICAgICAgICAgICAgIGNvbG9yID09PSAnaW52ZXJzZScgJiYgY2xhc3Nlcy5sYWJlbEludmVyc2VcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3NlY29uZGFyeUxhYmVsfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvbGFiZWw+XG4gICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgIGFyaWEtZGVzY3JpYmVkYnk9e2J1aWxkRGVzY3JpYmVkQnkoe1xuICAgICAgICAgICAgaGFzRXJyb3IsXG4gICAgICAgICAgICBoYXNIZWxwTWVzc2FnZTogISFoZWxwTWVzc2FnZSxcbiAgICAgICAgICAgIHVuaXF1ZUlkLFxuICAgICAgICAgIH0pfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgIGNsYXNzZXMudGV4dGFyZWEsXG4gICAgICAgICAgICB7IFtjbGFzc2VzLnRleHRhcmVhSW52ZXJzZV06IGNvbG9yID09PSAnaW52ZXJzZScgfSxcbiAgICAgICAgICAgIGZ1bGxXaWR0aCAmJiBjbGFzc2VzLmZ1bGxXaWR0aCxcbiAgICAgICAgICAgIGhhc0Vycm9yICYmIGNsYXNzZXMudGV4dGFyZWFFcnJvcixcbiAgICAgICAgICAgIHRleHRBcmVhQ2xhc3NOYW1lXG4gICAgICAgICAgKX1cbiAgICAgICAgICBjb2xzPXsxfVxuICAgICAgICAgIGlkPXt1bmlxdWVJZH1cbiAgICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgICBuYW1lPXtuYW1lfVxuICAgICAgICAgIHsuLi5yb290UHJvcHN9XG4gICAgICAgIC8+XG4gICAgICAgIHtoZWxwTWVzc2FnZSAmJiAoXG4gICAgICAgICAgPEZvcm1IZWxwTWVzc2FnZVxuICAgICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc2VzLm1lc3NhZ2V9XG4gICAgICAgICAgICByb290RWxlbWVudElkPXt1bmlxdWVJZH1cbiAgICAgICAgICAgIGRlc2NyaWJlZEJ5SWQ9e2hlbHBGb3IodW5pcXVlSWQpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtoZWxwTWVzc2FnZX1cbiAgICAgICAgICA8L0Zvcm1IZWxwTWVzc2FnZT5cbiAgICAgICAgKX1cbiAgICAgICAge2hhc0Vycm9yICYmIGVycm9yTWVzc2FnZSAmJiAoXG4gICAgICAgICAgPEZvcm1FcnJvck1lc3NhZ2VcbiAgICAgICAgICAgIGNvbG9yPXtjb2xvcn1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy5tZXNzYWdlfVxuICAgICAgICAgICAgcm9vdEVsZW1lbnRJZD17dW5pcXVlSWR9XG4gICAgICAgICAgICBkZXNjcmliZWRCeUlkPXtlcnJvckZvcih1bmlxdWVJZCl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2Vycm9yTWVzc2FnZX1cbiAgICAgICAgICA8L0Zvcm1FcnJvck1lc3NhZ2U+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG4pO1xuIl19