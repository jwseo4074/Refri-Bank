"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Select = exports.useStyles = exports.SelectStylesKey = exports.testIds = void 0;
var clsx_1 = __importDefault(require("clsx"));
var React = __importStar(require("react"));
var react_focus_lock_1 = __importDefault(require("react-focus-lock"));
var Popover_1 = require("reakit/Popover");
var Portal_1 = require("reakit/Portal");
var chromicons_1 = require("@lifeomic/chromicons");
var styles_1 = require("../../styles");
var forms_1 = require("../_private/forms");
var UniqueId_1 = require("../_private/UniqueId");
var Text_1 = require("../Text");
var framer_motion_1 = require("framer-motion");
var RoverOption_1 = require("./RoverOption");
var Rover_1 = require("reakit/Rover");
var getTestProps_1 = require("../../testUtils/getTestProps");
var screenreaderOnly_1 = require("../../styles/screenreaderOnly");
var Tooltip_1 = require("../Tooltip");
exports.testIds = {
    placeholderText: 'select-placeholderText',
};
exports.SelectStylesKey = 'ChromaSelect';
exports.useStyles = (0, styles_1.makeStyles)(function (theme) { return ({
    root: {},
    popover: {
        background: theme.palette.common.white,
        borderRadius: theme.pxToRem(10),
        boxShadow: theme.boxShadows.popover,
        minWidth: theme.pxToRem(224),
        overflow: 'hidden',
        zIndex: 1300,
        '&:focus': {
            outline: 'none',
        },
    },
    label: {
        alignItems: 'center',
        color: theme.palette.black[800],
        display: 'flex',
        fontSize: theme.pxToRem(14),
        fontWeight: theme.typography.fontWeightBold,
        marginBottom: theme.spacing(1),
        '&:empty': {
            marginBottom: theme.spacing(0),
        },
    },
    labelSecondary: {
        fontSize: theme.pxToRem(11),
        display: 'inline-block',
        margin: theme.spacing(0, 0.75),
        color: theme.palette.text.hint,
    },
    labelInverse: {
        color: theme.palette.common.white,
        '&$labelSecondary': {
            opacity: 0.9,
        },
    },
    labelIcon: {
        marginLeft: theme.spacing(0.75),
        color: theme.palette.primary.main,
    },
    labelIconInverse: {
        mixBlendMode: 'screen',
    },
    tooltipContainer: {
        display: 'flex',
        outline: 'none',
    },
    button: {
        alignItems: 'center',
        backgroundColor: 'rgba(132, 137, 166, 0.15)',
        border: 'solid 1px transparent',
        borderRadius: theme.pxToRem(4),
        color: theme.palette.text.primary,
        cursor: 'pointer',
        display: 'block',
        fontFamily: theme.typography.fontFamily,
        fontSize: theme.pxToRem(14),
        maxHeight: theme.pxToRem(84),
        minHeight: theme.pxToRem(35),
        margin: 0,
        minWidth: theme.pxToRem(175),
        outline: 'none',
        overflow: 'hidden',
        padding: theme.spacing(0.5, 3.75, 0.5, 1.25),
        position: 'relative',
        transition: 'border 0.5s ease',
        '&:disabled': {
            cursor: 'not-allowed',
            opacity: 0.625,
        },
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(0, 150, 225, .3)',
            outline: 'none',
        },
        '&::-moz-focus-inner': {
            border: 'none',
        },
    },
    buttonInverse: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        color: theme.palette.common.white,
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(255, 255, 255, .3)',
        },
        '& $chip': {
            background: 'rgba(255, 255, 255, 0.5)',
            color: theme.palette.text.primary,
        },
        '& $buttonText$placeholderText': {
            color: theme.palette.common.white,
        },
    },
    buttonError: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        border: "1px solid ".concat(theme.palette.error.main),
        '&:focus': {
            border: "1px solid ".concat(theme.palette.error.main),
        },
    },
    buttonArrowContainer: {
        alignItems: 'center',
        display: 'flex',
        flexFlow: 'column',
        minHeight: theme.pxToRem(32),
        height: theme.pxToRem(32),
        justifyContent: 'center',
        position: 'absolute',
        right: theme.pxToRem(-6),
        textAlign: 'center',
        top: theme.pxToRem(1),
        width: '2rem',
    },
    buttonText: {
        color: 'inherit',
        marginTop: theme.spacing(0.125),
        overflow: 'hidden',
        textAlign: 'left',
        textOverflow: 'ellipsis',
        whiteSpace: 'nowrap',
        width: '100%',
        '&$placeholderText': {
            color: theme.palette.text.hint,
        },
    },
    placeholderText: {},
    comboBoxPlaceholder: {
        marginTop: theme.spacing(0.25),
    },
    comboxBoxOverflow: {
        overflowY: 'auto',
    },
    buttonFullWidth: {
        width: '100%',
    },
    arrowIcon: {
        alignSelf: 'flex-start',
        position: 'sticky',
        transition: 'transform 0.25s ease',
        strokeOpacity: 0.6,
        top: theme.spacing(0.5),
    },
    rotate: {
        transform: 'rotate(180deg)',
        top: theme.spacing(0.375),
    },
    ul: {
        display: 'block',
        listStyle: 'none',
        margin: 0,
        maxHeight: theme.pxToRem(328),
        overflowY: 'auto',
        padding: theme.spacing(1, 0),
    },
    option: {
        alignItems: 'center',
        backgroundColor: theme.palette.common.white,
        cursor: 'pointer',
        display: 'flex',
        minHeight: theme.pxToRem(26),
        outline: 'none',
        paddingLeft: theme.spacing(2),
        paddingRight: theme.spacing(2),
        transition: 'background-color 0.25s ease',
        '&:hover, &:focus': {
            backgroundColor: 'rgba(222,244,252, 0.6)',
        },
    },
    chipList: {
        display: 'flex',
        flexFlow: 'wrap',
        margin: theme.spacing(-0.5, -0.5, 0),
    },
    chip: {
        alignItems: 'center',
        background: theme.palette.primary.main,
        borderRadius: theme.pxToRem(3),
        color: theme.palette.common.white,
        display: 'inline-block',
        height: theme.pxToRem(22),
        fontSize: theme.pxToRem(12),
        margin: theme.spacing(0.5, 0.25, 0),
        overflow: 'hidden',
        paddingLeft: theme.spacing(1),
        paddingRight: theme.spacing(1),
        textOverflow: 'ellipsis',
        whiteSpace: 'nowrap',
    },
    message: {
        marginTop: theme.spacing(0.875),
        marginLeft: 0,
    },
    srOnly: __assign({}, screenreaderOnly_1.screenreaderOnlyStyles),
}); }, { name: exports.SelectStylesKey });
var popoverVariants = {
    open: {
        opacity: 1,
        offsetTop: -2,
        transition: {
            duration: 0.25,
            ease: 'easeOut',
        },
    },
    closed: {
        opacity: 0,
        offsetTop: -18,
    },
};
var popoverVariantsReduced = {
    open: {
        opacity: 1,
        transition: {
            duration: 0.2,
            ease: 'easeOut',
        },
    },
    closed: {
        opacity: 0,
    },
};
var listMotionVariants = {
    open: {
        transition: {
            delayChildren: 0.025,
            staggerChildren: 0.045,
            duration: 0.2,
        },
    },
    closed: {},
};
var listMotionVariantsReduced = {
    open: {},
    closed: {},
};
var listItemMotionVariants = {
    open: {
        y: 0,
        opacity: 1,
        transition: {
            y: { stiffness: 1000, velocity: -100 },
        },
    },
    closed: {
        y: -16,
        opacity: 0,
    },
};
var listItemMotionVariantsReduced = {
    open: {
        opacity: 1,
    },
    closed: {
        opacity: 0,
    },
};
var isHeadingElement = function (element) {
    return element.props['data-select-role'] === 'heading';
};
var Select = function (_a) {
    var _b;
    var ariaLabel = _a["aria-label"], children = _a.children, className = _a.className, _c = _a.color, color = _c === void 0 ? 'default' : _c, errorMessage = _a.errorMessage, fullWidth = _a.fullWidth, hasError = _a.hasError, helpMessage = _a.helpMessage, Icon = _a.icon, id = _a.id, label = _a.label, secondaryLabel = _a.secondaryLabel, onChange = _a.onChange, placeholder = _a.placeholder, placement = _a.placement, popoverAriaLabel = _a.popoverAriaLabel, selectedOptionDisplay = _a.selectedOptionDisplay, tooltipMessage = _a.tooltipMessage, value = _a.value, rootProps = __rest(_a, ['aria-label', "children", "className", "color", "errorMessage", "fullWidth", "hasError", "helpMessage", "icon", "id", "label", "secondaryLabel", "onChange", "placeholder", "placement", "popoverAriaLabel", "selectedOptionDisplay", "tooltipMessage", "value"]);
    var classes = (0, exports.useStyles)({});
    var popover = (0, Popover_1.usePopoverState)({ placement: placement });
    var shouldReduceMotion = (0, framer_motion_1.useReducedMotion)();
    var buttonRef = React.useRef(); // TODO: Need to type this properly...
    var _d = React.useState(50), width = _d[0], setWidth = _d[1];
    var _e = React.useState(null), internalSelection = _e[0], setInternalSelection = _e[1];
    var uniqueId = React.useState(function () { return id || name || (0, UniqueId_1.generateUniqueId)('select-'); })[0];
    var rover = (0, Rover_1.useRoverState)({ loop: true, orientation: 'vertical' });
    // Update the opened popover width any time the button width changes
    // TODO: Review the best way to handle this without breaking
    // eslint-disable-next-line react-hooks/exhaustive-deps
    React.useEffect(function () {
        setWidth(buttonRef.current.getBoundingClientRect().width);
    });
    React.useEffect(function () {
        // TODO: Need to type this properly as well...
        var match = React.Children.toArray(children).find(function (child) {
            if (!React.isValidElement(child)) {
                return null;
            }
            if (isHeadingElement(child)) {
                return null;
            }
            return child.props.value === value;
        });
        // If there is no match, set internalSelection to null so placeholder will be shown
        setInternalSelection(match ? match.props : null);
    }, [children, value]);
    var hidePopover = popover.hide;
    var handleOptionSelected = React.useCallback(function (optionValue, meta) {
        hidePopover();
        onChange === null || onChange === void 0 ? void 0 : onChange(optionValue, meta);
    }, [hidePopover, onChange]);
    if (!label && !ariaLabel && process.env.NODE_ENV === 'development') {
        throw new Error('If a "label" is not provided to Select, please provide "aria-label".');
    }
    return (React.createElement("div", { className: (0, clsx_1.default)(classes.root, className) },
        React.createElement("label", { "aria-hidden": "true", className: (0, clsx_1.default)(classes.label, color === 'inverse' && classes.labelInverse, !label && ariaLabel && classes.srOnly), htmlFor: uniqueId },
            label || ariaLabel,
            !!Icon && tooltipMessage && (React.createElement(Tooltip_1.Tooltip, { title: tooltipMessage },
                React.createElement("span", { className: classes.tooltipContainer },
                    React.createElement(Icon, { className: (0, clsx_1.default)(classes.labelIcon, color === 'inverse' && classes.labelIconInverse), width: 16, height: 16, role: "img", "aria-hidden": true })))),
            secondaryLabel ? (React.createElement("span", { className: (0, clsx_1.default)(classes.labelSecondary, color === 'inverse' && classes.labelInverse) }, secondaryLabel)) : null),
        React.createElement(Popover_1.PopoverDisclosure, __assign({ className: (0, clsx_1.default)(classes.button, hasError && classes.buttonError, fullWidth && classes.buttonFullWidth, (_b = {},
                _b[classes.buttonInverse] = color === 'inverse',
                _b)), ref: buttonRef, "aria-describedby": (0, forms_1.buildDescribedBy)({
                hasError: hasError,
                hasHelpMessage: !!helpMessage,
                uniqueId: uniqueId,
            }), id: uniqueId }, popover, rootProps),
            React.createElement(React.Fragment, null,
                !internalSelection && (React.createElement(Text_1.Text, __assign({ className: (0, clsx_1.default)(classes.placeholderText, classes.buttonText), size: "subbody" }, (0, getTestProps_1.getTestProps)(exports.testIds.placeholderText)), placeholder)),
                internalSelection && !selectedOptionDisplay && (React.createElement(Text_1.Text, { className: classes.buttonText, size: "subbody" }, internalSelection.title)),
                internalSelection && selectedOptionDisplay && (React.createElement(Text_1.Text, { className: classes.buttonText, size: "subbody" }, selectedOptionDisplay(internalSelection))),
                React.createElement("div", { className: classes.buttonArrowContainer, role: "presentation" },
                    React.createElement(chromicons_1.ChevronDown, { className: (0, clsx_1.default)(classes.arrowIcon, popover.visible && classes.rotate), "aria-hidden": true, role: "img", width: 18, height: 18 })))),
        helpMessage && (React.createElement(forms_1.FormHelpMessage, { className: classes.message, color: color, rootElementId: uniqueId, describedById: (0, forms_1.helpFor)(uniqueId) }, helpMessage)),
        hasError && (React.createElement(forms_1.FormErrorMessage, { className: classes.message, color: color, rootElementId: uniqueId, describedById: (0, forms_1.errorFor)(uniqueId) }, errorMessage)),
        React.createElement(Portal_1.Portal, null,
            React.createElement(react_focus_lock_1.default, null,
                React.createElement(Popover_1.Popover, __assign({ "aria-label": label || ariaLabel || popoverAriaLabel, className: classes.popover }, popover, { style: { width: width }, as: framer_motion_1.motion.div, animate: popover.visible ? 'open' : 'closed', variants: shouldReduceMotion ? popoverVariantsReduced : popoverVariants }),
                    React.createElement(framer_motion_1.motion.ul, { className: classes.ul, role: "listbox", variants: shouldReduceMotion
                            ? listMotionVariantsReduced
                            : listMotionVariants }, popover.visible &&
                        React.Children.map(children, function (child) {
                            var _a;
                            if (!React.isValidElement(child)) {
                                return null;
                            }
                            if (isHeadingElement(child)) {
                                return child;
                            }
                            var option = child;
                            return (React.createElement(RoverOption_1.RoverOption, { rover: rover, value: value, option: option, handleOptionSelect: handleOptionSelected, variants: shouldReduceMotion
                                    ? listItemMotionVariantsReduced
                                    : listItemMotionVariants, disabled: (_a = child === null || child === void 0 ? void 0 : child.props) === null || _a === void 0 ? void 0 : _a.disabled }));
                        })))))));
};
exports.Select = Select;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvU2VsZWN0L1NlbGVjdC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsOENBQXdCO0FBQ3hCLDJDQUErQjtBQUMvQixzRUFBeUM7QUFDekMsMENBSXdCO0FBQ3hCLHdDQUF1QztBQUN2QyxtREFBbUQ7QUFDbkQsdUNBQTBDO0FBRTFDLDJDQU8yQjtBQUMzQixpREFBd0Q7QUFDeEQsZ0NBQStCO0FBRS9CLCtDQUF5RDtBQUN6RCw2Q0FBNEM7QUFDNUMsc0NBQTZDO0FBQzdDLDZEQUE0RDtBQUM1RCxrRUFBdUU7QUFDdkUsc0NBQXFDO0FBRXhCLFFBQUEsT0FBTyxHQUFHO0lBQ3JCLGVBQWUsRUFBRSx3QkFBd0I7Q0FDMUMsQ0FBQztBQUVXLFFBQUEsZUFBZSxHQUFHLGNBQWMsQ0FBQztBQUVqQyxRQUFBLFNBQVMsR0FBRyxJQUFBLG1CQUFVLEVBQ2pDLFVBQUMsS0FBSyxJQUFLLE9BQUEsQ0FBQztJQUNWLElBQUksRUFBRSxFQUFFO0lBQ1IsT0FBTyxFQUFFO1FBQ1AsVUFBVSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUs7UUFDdEMsWUFBWSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQy9CLFNBQVMsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLE9BQU87UUFDbkMsUUFBUSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO1FBQzVCLFFBQVEsRUFBRSxRQUFRO1FBQ2xCLE1BQU0sRUFBRSxJQUFJO1FBQ1osU0FBUyxFQUFFO1lBQ1QsT0FBTyxFQUFFLE1BQU07U0FDaEI7S0FDRjtJQUNELEtBQUssRUFBRTtRQUNMLFVBQVUsRUFBRSxRQUFRO1FBQ3BCLEtBQUssRUFBRSxLQUFLLENBQUMs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LENBQ0wsQ0FDUCxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBalFXLFFBQUEsTUFBTSxVQWlRakIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2xzeCBmcm9tICdjbHN4JztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBGb2N1c0xvY2sgZnJvbSAncmVhY3QtZm9jdXMtbG9jayc7XG5pbXBvcnQge1xuICBQb3BvdmVyIGFzIFJlYWtpdFBvcG92ZXIsXG4gIFBvcG92ZXJEaXNjbG9zdXJlLFxuICB1c2VQb3BvdmVyU3RhdGUsXG59IGZyb20gJ3JlYWtpdC9Qb3BvdmVyJztcbmltcG9ydCB7IFBvcnRhbCB9IGZyb20gJ3JlYWtpdC9Qb3J0YWwnO1xuaW1wb3J0IHsgQ2hldnJvbkRvd24gfSBmcm9tICdAbGlmZW9taWMvY2hyb21pY29ucyc7XG5pbXBvcnQgeyBtYWtlU3R5bGVzIH0gZnJvbSAnLi4vLi4vc3R5bGVzJztcbmltcG9ydCB7IEdldENsYXNzZXMgfSBmcm9tICcuLi8uLi90eXBlVXRpbHMnO1xuaW1wb3J0IHtcbiAgQmFzZUZvcm1FbGVtZW50LFxuICBidWlsZERlc2NyaWJlZEJ5LFxuICBlcnJvckZvcixcbiAgRm9ybUVycm9yTWVzc2FnZSxcbiAgRm9ybUhlbHBNZXNzYWdlLFxuICBoZWxwRm9yLFxufSBmcm9tICcuLi9fcHJpdmF0ZS9mb3Jtcyc7XG5pbXBvcnQgeyBnZW5lcmF0ZVVuaXF1ZUlkIH0gZnJvbSAnLi4vX3ByaXZhdGUvVW5pcXVlSWQnO1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL1RleHQnO1xuaW1wb3J0IHsgU2VsZWN0T3B0aW9uUHJvcHMgfSBmcm9tICcuL1NlbGVjdE9wdGlvbic7XG5pbXBvcnQgeyBtb3Rpb24sIHVzZVJlZHVjZWRNb3Rpb24gfSBmcm9tICdmcmFtZXItbW90aW9uJztcbmltcG9ydCB7IFJvdmVyT3B0aW9uIH0gZnJvbSAnLi9Sb3Zlck9wdGlvbic7XG5pbXBvcnQgeyB1c2VSb3ZlclN0YXRlIH0gZnJvbSAncmVha2l0L1JvdmVyJztcbmltcG9ydCB7IGdldFRlc3RQcm9wcyB9IGZyb20gJy4uLy4uL3Rlc3RVdGlscy9nZXRUZXN0UHJvcHMnO1xuaW1wb3J0IHsgc2NyZWVucmVhZGVyT25seVN0eWxlcyB9IGZyb20gJy4uLy4uL3N0eWxlcy9zY3JlZW5yZWFkZXJPbmx5JztcbmltcG9ydCB7IFRvb2x0aXAgfSBmcm9tICcuLi9Ub29sdGlwJztcblxuZXhwb3J0IGNvbnN0IHRlc3RJZHMgPSB7XG4gIHBsYWNlaG9sZGVyVGV4dDogJ3NlbGVjdC1wbGFjZWhvbGRlclRleHQnLFxufTtcblxuZXhwb3J0IGNvbnN0IFNlbGVjdFN0eWxlc0tleSA9ICdDaHJvbWFTZWxlY3QnO1xuXG5leHBvcnQgY29uc3QgdXNlU3R5bGVzID0gbWFrZVN0eWxlcyhcbiAgKHRoZW1lKSA9PiAoe1xuICAgIHJvb3Q6IHt9LFxuICAgIHBvcG92ZXI6IHtcbiAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGVtZS5weFRvUmVtKDEwKSxcbiAgICAgIGJveFNoYWRvdzogdGhlbWUuYm94U2hhZG93cy5wb3BvdmVyLFxuICAgICAgbWluV2lkdGg6IHRoZW1lLnB4VG9SZW0oMjI0KSxcbiAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgIHpJbmRleDogMTMwMCwgLy8gSGFzIHRvIGdvIGFib3ZlIHRoZSBNb2RhbCB6LWluZGV4XG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmJsYWNrWzgwMF0sXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBmb250U2l6ZTogdGhlbWUucHhUb1JlbSgxNCksXG4gICAgICBmb250V2VpZ2h0OiB0aGVtZS50eXBvZ3JhcGh5LmZvbnRXZWlnaHRCb2xkLFxuICAgICAgbWFyZ2luQm90dG9tOiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgJyY6ZW1wdHknOiB7XG4gICAgICAgIG1hcmdpbkJvdHRvbTogdGhlbWUuc3BhY2luZygwKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsYWJlbFNlY29uZGFyeToge1xuICAgICAgZm9udFNpemU6IHRoZW1lLnB4VG9SZW0oMTEpLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBtYXJnaW46IHRoZW1lLnNwYWNpbmcoMCwgMC43NSksXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS50ZXh0LmhpbnQsXG4gICAgfSxcbiAgICBsYWJlbEludmVyc2U6IHtcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgICcmJGxhYmVsU2Vjb25kYXJ5Jzoge1xuICAgICAgICBvcGFjaXR5OiAwLjksXG4gICAgICB9LFxuICAgIH0sXG4gICAgbGFiZWxJY29uOiB7XG4gICAgICBtYXJnaW5MZWZ0OiB0aGVtZS5zcGFjaW5nKDAuNzUpLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgIH0sXG4gICAgbGFiZWxJY29uSW52ZXJzZToge1xuICAgICAgbWl4QmxlbmRNb2RlOiAnc2NyZWVuJyxcbiAgICB9LFxuICAgIHRvb2x0aXBDb250YWluZXI6IHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICB9LFxuICAgIGJ1dHRvbjoge1xuICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDEzMiwgMTM3LCAxNjYsIDAuMTUpJyxcbiAgICAgIGJvcmRlcjogJ3NvbGlkIDFweCB0cmFuc3BhcmVudCcsXG4gICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnB4VG9SZW0oNCksXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS50ZXh0LnByaW1hcnksXG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICBmb250RmFtaWx5OiB0aGVtZS50eXBvZ3JhcGh5LmZvbnRGYW1pbHksXG4gICAgICBmb250U2l6ZTogdGhlbWUucHhUb1JlbSgxNCksXG4gICAgICBtYXhIZWlnaHQ6IHRoZW1lLnB4VG9SZW0oODQpLFxuICAgICAgbWluSGVpZ2h0OiB0aGVtZS5weFRvUmVtKDM1KSxcbiAgICAgIG1hcmdpbjogMCxcbiAgICAgIG1pbldpZHRoOiB0aGVtZS5weFRvUmVtKDE3NSksXG4gICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBwYWRkaW5nOiB0aGVtZS5zcGFjaW5nKDAuNSwgMy43NSwgMC41LCAxLjI1KSxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgdHJhbnNpdGlvbjogJ2JvcmRlciAwLjVzIGVhc2UnLFxuICAgICAgJyY6ZGlzYWJsZWQnOiB7XG4gICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJyxcbiAgICAgICAgb3BhY2l0eTogMC42MjUsXG4gICAgICB9LFxuICAgICAgJyY6Zm9jdXMnOiB7XG4gICAgICAgIGJveFNoYWRvdzogJzAgMCAwIDJweCByZ2JhKDAsIDE1MCwgMjI1LCAuMyknLFxuICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICB9LFxuICAgICAgJyY6Oi1tb3otZm9jdXMtaW5uZXInOiB7XG4gICAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGJ1dHRvbkludmVyc2U6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjMwLCAyMzEsIDIzNywgMC4xKScsXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgYm94U2hhZG93OiAnMCAwIDAgMnB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgLjMpJyxcbiAgICAgIH0sXG4gICAgICAnJiAkY2hpcCc6IHtcbiAgICAgICAgYmFja2dyb3VuZDogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC41KScsXG4gICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnRleHQucHJpbWFyeSxcbiAgICAgIH0sXG4gICAgICAnJiAkYnV0dG9uVGV4dCRwbGFjZWhvbGRlclRleHQnOiB7XG4gICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBidXR0b25FcnJvcjoge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyMzAsIDIzMSwgMjM3LCAwLjEpJyxcbiAgICAgIGJvcmRlcjogYDFweCBzb2xpZCAke3RoZW1lLnBhbGV0dGUuZXJyb3IubWFpbn1gLFxuICAgICAgJyY6Zm9jdXMnOiB7XG4gICAgICAgIGJvcmRlcjogYDFweCBzb2xpZCAke3RoZW1lLnBhbGV0dGUuZXJyb3IubWFpbn1gLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGJ1dHRvbkFycm93Q29udGFpbmVyOiB7XG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGZsZXhGbG93OiAnY29sdW1uJyxcbiAgICAgIG1pbkhlaWdodDogdGhlbWUucHhUb1JlbSgzMiksXG4gICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMzIpLFxuICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICByaWdodDogdGhlbWUucHhUb1JlbSgtNiksXG4gICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgICAgdG9wOiB0aGVtZS5weFRvUmVtKDEpLFxuICAgICAgd2lkdGg6ICcycmVtJyxcbiAgICB9LFxuICAgIGJ1dHRvblRleHQ6IHtcbiAgICAgIGNvbG9yOiAnaW5oZXJpdCcsXG4gICAgICBtYXJnaW5Ub3A6IHRoZW1lLnNwYWNpbmcoMC4xMjUpLFxuICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgdGV4dEFsaWduOiAnbGVmdCcsXG4gICAgICB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsXG4gICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAnJiRwbGFjZWhvbGRlclRleHQnOiB7XG4gICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnRleHQuaGludCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBwbGFjZWhvbGRlclRleHQ6IHt9LFxuICAgIGNvbWJvQm94UGxhY2Vob2xkZXI6IHtcbiAgICAgIG1hcmdpblRvcDogdGhlbWUuc3BhY2luZygwLjI1KSxcbiAgICB9LFxuICAgIGNvbWJveEJveE92ZXJmbG93OiB7XG4gICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICB9LFxuICAgIGJ1dHRvbkZ1bGxXaWR0aDoge1xuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICB9LFxuICAgIGFycm93SWNvbjoge1xuICAgICAgYWxpZ25TZWxmOiAnZmxleC1zdGFydCcsXG4gICAgICBwb3NpdGlvbjogJ3N0aWNreScsXG4gICAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMjVzIGVhc2UnLFxuICAgICAgc3Ryb2tlT3BhY2l0eTogMC42LFxuICAgICAgdG9wOiB0aGVtZS5zcGFjaW5nKDAuNSksXG4gICAgfSxcbiAgICByb3RhdGU6IHtcbiAgICAgIHRyYW5zZm9ybTogJ3JvdGF0ZSgxODBkZWcpJyxcbiAgICAgIHRvcDogdGhlbWUuc3BhY2luZygwLjM3NSksXG4gICAgfSxcbiAgICB1bDoge1xuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIGxpc3RTdHlsZTogJ25vbmUnLFxuICAgICAgbWFyZ2luOiAwLFxuICAgICAgbWF4SGVpZ2h0OiB0aGVtZS5weFRvUmVtKDMyOCksXG4gICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgIHBhZGRpbmc6IHRoZW1lLnNwYWNpbmcoMSwgMCksXG4gICAgfSxcbiAgICBvcHRpb246IHtcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgbWluSGVpZ2h0OiB0aGVtZS5weFRvUmVtKDI2KSxcbiAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgIHBhZGRpbmdMZWZ0OiB0aGVtZS5zcGFjaW5nKDIpLFxuICAgICAgcGFkZGluZ1JpZ2h0OiB0aGVtZS5zcGFjaW5nKDIpLFxuICAgICAgdHJhbnNpdGlvbjogJ2JhY2tncm91bmQtY29sb3IgMC4yNXMgZWFzZScsXG4gICAgICAnJjpob3ZlciwgJjpmb2N1cyc6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyMjIsMjQ0LDI1MiwgMC42KScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgY2hpcExpc3Q6IHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGZsZXhGbG93OiAnd3JhcCcsXG4gICAgICBtYXJnaW46IHRoZW1lLnNwYWNpbmcoLTAuNSwgLTAuNSwgMCksXG4gICAgfSxcbiAgICBjaGlwOiB7XG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGVtZS5weFRvUmVtKDMpLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMjIpLFxuICAgICAgZm9udFNpemU6IHRoZW1lLnB4VG9SZW0oMTIpLFxuICAgICAgbWFyZ2luOiB0aGVtZS5zcGFjaW5nKDAuNSwgMC4yNSwgMCksXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBwYWRkaW5nTGVmdDogdGhlbWUuc3BhY2luZygxKSxcbiAgICAgIHBhZGRpbmdSaWdodDogdGhlbWUuc3BhY2luZygxKSxcbiAgICAgIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJyxcbiAgICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnLFxuICAgIH0sXG4gICAgbWVzc2FnZToge1xuICAgICAgbWFyZ2luVG9wOiB0aGVtZS5zcGFjaW5nKDAuODc1KSxcbiAgICAgIG1hcmdpbkxlZnQ6IDAsXG4gICAgfSxcbiAgICBzck9ubHk6IHtcbiAgICAgIC4uLnNjcmVlbnJlYWRlck9ubHlTdHlsZXMsXG4gICAgfSxcbiAgfSksXG4gIHsgbmFtZTogU2VsZWN0U3R5bGVzS2V5IH1cbik7XG5cbmNvbnN0IHBvcG92ZXJWYXJpYW50cyA9IHtcbiAgb3Blbjoge1xuICAgIG9wYWNpdHk6IDEsXG4gICAgb2Zmc2V0VG9wOiAtMiwgLy8gUG9wcGVyLmpzICh1bmRlcmx5aW5nIFBvcG92ZXIpIHJlcXVpcmVzIGBvZmZTZXRUb3BgIG92ZXIgYG1hcmdpblRvcGBcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMC4yNSxcbiAgICAgIGVhc2U6ICdlYXNlT3V0JyxcbiAgICB9LFxuICB9LFxuICBjbG9zZWQ6IHtcbiAgICBvcGFjaXR5OiAwLFxuICAgIG9mZnNldFRvcDogLTE4LFxuICB9LFxufTtcblxuY29uc3QgcG9wb3ZlclZhcmlhbnRzUmVkdWNlZCA9IHtcbiAgb3Blbjoge1xuICAgIG9wYWNpdHk6IDEsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDAuMixcbiAgICAgIGVhc2U6ICdlYXNlT3V0JyxcbiAgICB9LFxuICB9LFxuICBjbG9zZWQ6IHtcbiAgICBvcGFjaXR5OiAwLFxuICB9LFxufTtcblxuY29uc3QgbGlzdE1vdGlvblZhcmlhbnRzID0ge1xuICBvcGVuOiB7XG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZGVsYXlDaGlsZHJlbjogMC4wMjUsXG4gICAgICBzdGFnZ2VyQ2hpbGRyZW46IDAuMDQ1LFxuICAgICAgZHVyYXRpb246IDAuMixcbiAgICB9LFxuICB9LFxuICBjbG9zZWQ6IHt9LFxufTtcblxuY29uc3QgbGlzdE1vdGlvblZhcmlhbnRzUmVkdWNlZCA9IHtcbiAgb3Blbjoge30sXG4gIGNsb3NlZDoge30sXG59O1xuXG5jb25zdCBsaXN0SXRlbU1vdGlvblZhcmlhbnRzID0ge1xuICBvcGVuOiB7XG4gICAgeTogMCxcbiAgICBvcGFjaXR5OiAxLFxuICAgIHRyYW5zaXRpb246IHtcbiAgICAgIHk6IHsgc3RpZmZuZXNzOiAxMDAwLCB2ZWxvY2l0eTogLTEwMCB9LFxuICAgIH0sXG4gIH0sXG4gIGNsb3NlZDoge1xuICAgIHk6IC0xNixcbiAgICBvcGFjaXR5OiAwLFxuICB9LFxufTtcblxuY29uc3QgbGlzdEl0ZW1Nb3Rpb25WYXJpYW50c1JlZHVjZWQgPSB7XG4gIG9wZW46IHtcbiAgICBvcGFjaXR5OiAxLFxuICB9LFxuICBjbG9zZWQ6IHtcbiAgICBvcGFjaXR5OiAwLFxuICB9LFxufTtcblxuZXhwb3J0IHR5cGUgU2VsZWN0Q2xhc3NlcyA9IEdldENsYXNzZXM8dHlwZW9mIHVzZVN0eWxlcz47XG5cbmNvbnN0IGlzSGVhZGluZ0VsZW1lbnQgPSAoZWxlbWVudDogUmVhY3QuUmVhY3RFbGVtZW50KSA9PiB7XG4gIHJldHVybiBlbGVtZW50LnByb3BzWydkYXRhLXNlbGVjdC1yb2xlJ10gPT09ICdoZWFkaW5nJztcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0UHJvcHNcbiAgZXh0ZW5kcyBQaWNrPFxuICAgICAgQmFzZUZvcm1FbGVtZW50LFxuICAgICAgJ2NvbG9yJyB8ICdoYXNFcnJvcicgfCAnZXJyb3JNZXNzYWdlJyB8ICdoZWxwTWVzc2FnZScgfCAnbGFiZWwnXG4gICAgPixcbiAgICBQaWNrPFJlYWN0LkNvbXBvbmVudFByb3BzV2l0aG91dFJlZjwnaW5wdXQnPiwgJ2Rpc2FibGVkJz4sXG4gICAgUGljazxcbiAgICAgIFJlYWN0LkNvbXBvbmVudFByb3BzV2l0aG91dFJlZjwnc2VsZWN0Jz4sXG4gICAgICAnY2xhc3NOYW1lJyB8ICdpZCcgfCAndmFsdWUnXG4gICAgPiB7XG4gIFsnYXJpYS1sYWJlbCddPzogc3RyaW5nO1xuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZTtcbiAgc2Vjb25kYXJ5TGFiZWw/OiBzdHJpbmc7XG4gIGZ1bGxXaWR0aD86IGJvb2xlYW47XG4gIGljb24/OiBSZWFjdC5Db21wb25lbnRUeXBlPFJlYWN0LlNWR1Byb3BzPFNWR1NWR0VsZW1lbnQ+PjtcbiAgb25DaGFuZ2U/OiAodmFsdWU6IHN0cmluZywgbWV0YTogYW55KSA9PiB2b2lkO1xuICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgcGxhY2VtZW50PzpcbiAgICB8ICd0b3Atc3RhcnQnXG4gICAgfCAndG9wJ1xuICAgIHwgJ3RvcC1lbmQnXG4gICAgfCAncmlnaHQtc3RhcnQnXG4gICAgfCAncmlnaHQnXG4gICAgfCAncmlnaHQtZW5kJ1xuICAgIHwgJ2JvdHRvbS1lbmQnXG4gICAgfCAnYm90dG9tJ1xuICAgIHwgJ2JvdHRvbS1zdGFydCdcbiAgICB8ICdsZWZ0LWVuZCdcbiAgICB8ICdsZWZ0J1xuICAgIHwgJ2xlZnQtc3RhcnQnO1xuICBwb3BvdmVyQXJpYUxhYmVsPzogc3RyaW5nO1xuICBzZWxlY3RlZE9wdGlvbkRpc3BsYXk/OiAoXG4gICAgb3B0aW9uOiBTZWxlY3RPcHRpb25Qcm9wc1xuICApID0+IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQgfCBSZWFjdC5SZWFjdE5vZGU7XG4gIHRvb2x0aXBNZXNzYWdlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgU2VsZWN0OiBSZWFjdC5GQzxTZWxlY3RQcm9wcz4gPSAoe1xuICBbJ2FyaWEtbGFiZWwnXTogYXJpYUxhYmVsLFxuICBjaGlsZHJlbixcbiAgY2xhc3NOYW1lLFxuICBjb2xvciA9ICdkZWZhdWx0JyxcbiAgZXJyb3JNZXNzYWdlLFxuICBmdWxsV2lkdGgsXG4gIGhhc0Vycm9yLFxuICBoZWxwTWVzc2FnZSxcbiAgaWNvbjogSWNvbixcbiAgaWQsXG4gIGxhYmVsLFxuICBzZWNvbmRhcnlMYWJlbCxcbiAgb25DaGFuZ2UsXG4gIHBsYWNlaG9sZGVyLFxuICBwbGFjZW1lbnQsXG4gIHBvcG92ZXJBcmlhTGFiZWwsXG4gIHNlbGVjdGVkT3B0aW9uRGlzcGxheSxcbiAgdG9vbHRpcE1lc3NhZ2UsXG4gIHZhbHVlLFxuICAuLi5yb290UHJvcHNcbn0pID0+IHtcbiAgY29uc3QgY2xhc3NlcyA9IHVzZVN0eWxlcyh7fSk7XG4gIGNvbnN0IHBvcG92ZXIgPSB1c2VQb3BvdmVyU3RhdGUoeyBwbGFjZW1lbnQgfSk7XG4gIGNvbnN0IHNob3VsZFJlZHVjZU1vdGlvbiA9IHVzZVJlZHVjZWRNb3Rpb24oKTtcblxuICBjb25zdCBidXR0b25SZWYgPSBSZWFjdC51c2VSZWY8YW55PigpOyAvLyBUT0RPOiBOZWVkIHRvIHR5cGUgdGhpcyBwcm9wZXJseS4uLlxuICBjb25zdCBbd2lkdGgsIHNldFdpZHRoXSA9IFJlYWN0LnVzZVN0YXRlPG51bWJlcj4oNTApO1xuXG4gIGNvbnN0IFtcbiAgICBpbnRlcm5hbFNlbGVjdGlvbixcbiAgICBzZXRJbnRlcm5hbFNlbGVjdGlvbixcbiAgXSA9IFJlYWN0LnVzZVN0YXRlPFNlbGVjdE9wdGlvblByb3BzIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgW3VuaXF1ZUlkXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4oXG4gICAgKCkgPT4gaWQgfHwgbmFtZSB8fCBnZW5lcmF0ZVVuaXF1ZUlkKCdzZWxlY3QtJylcbiAgKTtcblxuICBjb25zdCByb3ZlciA9IHVzZVJvdmVyU3RhdGUoeyBsb29wOiB0cnVlLCBvcmllbnRhdGlvbjogJ3ZlcnRpY2FsJyB9KTtcblxuICAvLyBVcGRhdGUgdGhlIG9wZW5lZCBwb3BvdmVyIHdpZHRoIGFueSB0aW1lIHRoZSBidXR0b24gd2lkdGggY2hhbmdlc1xuICAvLyBUT0RPOiBSZXZpZXcgdGhlIGJlc3Qgd2F5IHRvIGhhbmRsZSB0aGlzIHdpdGhvdXQgYnJlYWtpbmdcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldFdpZHRoKGJ1dHRvblJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKTtcbiAgfSk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBUT0RPOiBOZWVkIHRvIHR5cGUgdGhpcyBwcm9wZXJseSBhcyB3ZWxsLi4uXG4gICAgY29uc3QgbWF0Y2g6IGFueSA9IFJlYWN0LkNoaWxkcmVuLnRvQXJyYXkoY2hpbGRyZW4pLmZpbmQoKGNoaWxkKSA9PiB7XG4gICAgICBpZiAoIVJlYWN0LmlzVmFsaWRFbGVtZW50KGNoaWxkKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzSGVhZGluZ0VsZW1lbnQoY2hpbGQpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2hpbGQucHJvcHMudmFsdWUgPT09IHZhbHVlO1xuICAgIH0pO1xuXG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gbWF0Y2gsIHNldCBpbnRlcm5hbFNlbGVjdGlvbiB0byBudWxsIHNvIHBsYWNlaG9sZGVyIHdpbGwgYmUgc2hvd25cbiAgICBzZXRJbnRlcm5hbFNlbGVjdGlvbihtYXRjaCA/IG1hdGNoLnByb3BzIDogbnVsbCk7XG4gIH0sIFtjaGlsZHJlbiwgdmFsdWVdKTtcblxuICBjb25zdCBoaWRlUG9wb3ZlciA9IHBvcG92ZXIuaGlkZTtcbiAgY29uc3QgaGFuZGxlT3B0aW9uU2VsZWN0ZWQgPSBSZWFjdC51c2VDYWxsYmFjayhcbiAgICAob3B0aW9uVmFsdWU6IHN0cmluZywgbWV0YTogYW55KSA9PiB7XG4gICAgICBoaWRlUG9wb3ZlcigpO1xuICAgICAgb25DaGFuZ2U/LihvcHRpb25WYWx1ZSwgbWV0YSk7XG4gICAgfSxcbiAgICBbaGlkZVBvcG92ZXIsIG9uQ2hhbmdlXVxuICApO1xuXG4gIGlmICghbGFiZWwgJiYgIWFyaWFMYWJlbCAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdJZiBhIFwibGFiZWxcIiBpcyBub3QgcHJvdmlkZWQgdG8gU2VsZWN0LCBwbGVhc2UgcHJvdmlkZSBcImFyaWEtbGFiZWxcIi4nXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2Nsc3goY2xhc3Nlcy5yb290LCBjbGFzc05hbWUpfT5cbiAgICAgIDxsYWJlbFxuICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxuICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgY2xhc3Nlcy5sYWJlbCxcbiAgICAgICAgICBjb2xvciA9PT0gJ2ludmVyc2UnICYmIGNsYXNzZXMubGFiZWxJbnZlcnNlLFxuICAgICAgICAgICFsYWJlbCAmJiBhcmlhTGFiZWwgJiYgY2xhc3Nlcy5zck9ubHlcbiAgICAgICAgKX1cbiAgICAgICAgaHRtbEZvcj17dW5pcXVlSWR9XG4gICAgICA+XG4gICAgICAgIHtsYWJlbCB8fCBhcmlhTGFiZWx9XG4gICAgICAgIHshIUljb24gJiYgdG9vbHRpcE1lc3NhZ2UgJiYgKFxuICAgICAgICAgIDxUb29sdGlwIHRpdGxlPXt0b29sdGlwTWVzc2FnZX0+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2NsYXNzZXMudG9vbHRpcENvbnRhaW5lcn0+XG4gICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KFxuICAgICAgICAgICAgICAgICAgY2xhc3Nlcy5sYWJlbEljb24sXG4gICAgICAgICAgICAgICAgICBjb2xvciA9PT0gJ2ludmVyc2UnICYmIGNsYXNzZXMubGFiZWxJY29uSW52ZXJzZVxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgd2lkdGg9ezE2fVxuICAgICAgICAgICAgICAgIGhlaWdodD17MTZ9XG4gICAgICAgICAgICAgICAgcm9sZT1cImltZ1wiXG4gICAgICAgICAgICAgICAgYXJpYS1oaWRkZW5cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICl9XG4gICAgICAgIHtzZWNvbmRhcnlMYWJlbCA/IChcbiAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KFxuICAgICAgICAgICAgICBjbGFzc2VzLmxhYmVsU2Vjb25kYXJ5LFxuICAgICAgICAgICAgICBjb2xvciA9PT0gJ2ludmVyc2UnICYmIGNsYXNzZXMubGFiZWxJbnZlcnNlXG4gICAgICAgICAgICApfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtzZWNvbmRhcnlMYWJlbH1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgPC9sYWJlbD5cbiAgICAgIDxQb3BvdmVyRGlzY2xvc3VyZVxuICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgY2xhc3Nlcy5idXR0b24sXG4gICAgICAgICAgaGFzRXJyb3IgJiYgY2xhc3Nlcy5idXR0b25FcnJvcixcbiAgICAgICAgICBmdWxsV2lkdGggJiYgY2xhc3Nlcy5idXR0b25GdWxsV2lkdGgsXG4gICAgICAgICAge1xuICAgICAgICAgICAgW2NsYXNzZXMuYnV0dG9uSW52ZXJzZV06IGNvbG9yID09PSAnaW52ZXJzZScsXG4gICAgICAgICAgfVxuICAgICAgICApfVxuICAgICAgICByZWY9e2J1dHRvblJlZn1cbiAgICAgICAgYXJpYS1kZXNjcmliZWRieT17YnVpbGREZXNjcmliZWRCeSh7XG4gICAgICAgICAgaGFzRXJyb3IsXG4gICAgICAgICAgaGFzSGVscE1lc3NhZ2U6ICEhaGVscE1lc3NhZ2UsXG4gICAgICAgICAgdW5pcXVlSWQsXG4gICAgICAgIH0pfVxuICAgICAgICBpZD17dW5pcXVlSWR9XG4gICAgICAgIHsuLi5wb3BvdmVyfVxuICAgICAgICB7Li4ucm9vdFByb3BzfVxuICAgICAgPlxuICAgICAgICA8PlxuICAgICAgICAgIHshaW50ZXJuYWxTZWxlY3Rpb24gJiYgKFxuICAgICAgICAgICAgPFRleHRcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KGNsYXNzZXMucGxhY2Vob2xkZXJUZXh0LCBjbGFzc2VzLmJ1dHRvblRleHQpfVxuICAgICAgICAgICAgICBzaXplPVwic3ViYm9keVwiXG4gICAgICAgICAgICAgIHsuLi5nZXRUZXN0UHJvcHModGVzdElkcy5wbGFjZWhvbGRlclRleHQpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7cGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7aW50ZXJuYWxTZWxlY3Rpb24gJiYgIXNlbGVjdGVkT3B0aW9uRGlzcGxheSAmJiAoXG4gICAgICAgICAgICA8VGV4dCBjbGFzc05hbWU9e2NsYXNzZXMuYnV0dG9uVGV4dH0gc2l6ZT1cInN1YmJvZHlcIj5cbiAgICAgICAgICAgICAge2ludGVybmFsU2VsZWN0aW9uLnRpdGxlfVxuICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICl9XG4gICAgICAgICAge2ludGVybmFsU2VsZWN0aW9uICYmIHNlbGVjdGVkT3B0aW9uRGlzcGxheSAmJiAoXG4gICAgICAgICAgICA8VGV4dCBjbGFzc05hbWU9e2NsYXNzZXMuYnV0dG9uVGV4dH0gc2l6ZT1cInN1YmJvZHlcIj5cbiAgICAgICAgICAgICAge3NlbGVjdGVkT3B0aW9uRGlzcGxheShpbnRlcm5hbFNlbGVjdGlvbil9XG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgKX1cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5idXR0b25BcnJvd0NvbnRhaW5lcn0gcm9sZT1cInByZXNlbnRhdGlvblwiPlxuICAgICAgICAgICAgPENoZXZyb25Eb3duXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgICAgICBjbGFzc2VzLmFycm93SWNvbixcbiAgICAgICAgICAgICAgICBwb3BvdmVyLnZpc2libGUgJiYgY2xhc3Nlcy5yb3RhdGVcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgYXJpYS1oaWRkZW5cbiAgICAgICAgICAgICAgcm9sZT1cImltZ1wiXG4gICAgICAgICAgICAgIHdpZHRoPXsxOH1cbiAgICAgICAgICAgICAgaGVpZ2h0PXsxOH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvPlxuICAgICAgPC9Qb3BvdmVyRGlzY2xvc3VyZT5cbiAgICAgIHtoZWxwTWVzc2FnZSAmJiAoXG4gICAgICAgIDxGb3JtSGVscE1lc3NhZ2VcbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMubWVzc2FnZX1cbiAgICAgICAgICBjb2xvcj17Y29sb3J9XG4gICAgICAgICAgcm9vdEVsZW1lbnRJZD17dW5pcXVlSWR9XG4gICAgICAgICAgZGVzY3JpYmVkQnlJZD17aGVscEZvcih1bmlxdWVJZCl9XG4gICAgICAgID5cbiAgICAgICAgICB7aGVscE1lc3NhZ2V9XG4gICAgICAgIDwvRm9ybUhlbHBNZXNzYWdlPlxuICAgICAgKX1cbiAgICAgIHtoYXNFcnJvciAmJiAoXG4gICAgICAgIDxGb3JtRXJyb3JNZXNzYWdlXG4gICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc2VzLm1lc3NhZ2V9XG4gICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgIHJvb3RFbGVtZW50SWQ9e3VuaXF1ZUlkfVxuICAgICAgICAgIGRlc2NyaWJlZEJ5SWQ9e2Vycm9yRm9yKHVuaXF1ZUlkKX1cbiAgICAgICAgPlxuICAgICAgICAgIHtlcnJvck1lc3NhZ2V9XG4gICAgICAgIDwvRm9ybUVycm9yTWVzc2FnZT5cbiAgICAgICl9XG4gICAgICB7LypcbiAgICAgICAgQSBmZXcgdGhpbmdzIGhlcmU6XG5cbiAgICAgICAgMSkgV2Ugd2FudCB0byBhbHdheXMgcG9ydGFsIG91ciBzZWxlY3QgbWVudSByZXN1bHRzIHNvIHdlIGRvbid0XG4gICAgICAgICAgIHJ1biBpbnRvIHdlaXJkIGxheW91dCBpc3N1ZXMgKHJlbmRlcmluZyBpbnNpZGUgUG9wb3ZlciBvciBNb2RhbClcbiAgICAgICAgMikgV2UgbmVlZCB0byB0cmFwIGZvY3VzIGluc2lkZSBvZiB0aGUgbWVudSB3aGVuIGl0IGlzIG9wZW4gLSA8Rm9jdXNMb2NrIC8+IGhhbmRsZXMgdGhpcyBmb3IgdXNcbiAgICAgICAgMykgV2UgbmVlZCBrZXlib2FyZCBzdXBwb3J0IHZpYSA8Um92ZXIgLz5cblxuICAgICAgICBSZWZlcmVuY2UgZm9yICMxICYgIzI6IGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFraXQvcmVha2l0L2lzc3Vlcy81NjZcbiAgICAgICovfVxuICAgICAgPFBvcnRhbD5cbiAgICAgICAgPEZvY3VzTG9jaz5cbiAgICAgICAgICA8UmVha2l0UG9wb3ZlclxuICAgICAgICAgICAgYXJpYS1sYWJlbD17bGFiZWwgfHwgYXJpYUxhYmVsIHx8IHBvcG92ZXJBcmlhTGFiZWx9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMucG9wb3Zlcn1cbiAgICAgICAgICAgIHsuLi5wb3BvdmVyfVxuICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGggfX1cbiAgICAgICAgICAgIGFzPXttb3Rpb24uZGl2fVxuICAgICAgICAgICAgYW5pbWF0ZT17cG9wb3Zlci52aXNpYmxlID8gJ29wZW4nIDogJ2Nsb3NlZCd9XG4gICAgICAgICAgICB2YXJpYW50cz17XG4gICAgICAgICAgICAgIHNob3VsZFJlZHVjZU1vdGlvbiA/IHBvcG92ZXJWYXJpYW50c1JlZHVjZWQgOiBwb3BvdmVyVmFyaWFudHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8bW90aW9uLnVsXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy51bH1cbiAgICAgICAgICAgICAgcm9sZT1cImxpc3Rib3hcIlxuICAgICAgICAgICAgICB2YXJpYW50cz17XG4gICAgICAgICAgICAgICAgc2hvdWxkUmVkdWNlTW90aW9uXG4gICAgICAgICAgICAgICAgICA/IGxpc3RNb3Rpb25WYXJpYW50c1JlZHVjZWRcbiAgICAgICAgICAgICAgICAgIDogbGlzdE1vdGlvblZhcmlhbnRzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3BvcG92ZXIudmlzaWJsZSAmJlxuICAgICAgICAgICAgICAgIFJlYWN0LkNoaWxkcmVuLm1hcChjaGlsZHJlbiwgKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoIVJlYWN0LmlzVmFsaWRFbGVtZW50KGNoaWxkKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYgKGlzSGVhZGluZ0VsZW1lbnQoY2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uOiBSZWFjdC5SZWFjdEVsZW1lbnQ8U2VsZWN0T3B0aW9uUHJvcHM+ID0gY2hpbGQ7XG5cbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxSb3Zlck9wdGlvblxuICAgICAgICAgICAgICAgICAgICAgIHJvdmVyPXtyb3Zlcn1cbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9uPXtvcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgaGFuZGxlT3B0aW9uU2VsZWN0PXtoYW5kbGVPcHRpb25TZWxlY3RlZH1cbiAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50cz17XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRSZWR1Y2VNb3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBsaXN0SXRlbU1vdGlvblZhcmlhbnRzUmVkdWNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGxpc3RJdGVtTW90aW9uVmFyaWFudHNcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2NoaWxkPy5wcm9wcz8uZGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9tb3Rpb24udWw+XG4gICAgICAgICAgPC9SZWFraXRQb3BvdmVyPlxuICAgICAgICA8L0ZvY3VzTG9jaz5cbiAgICAgIDwvUG9ydGFsPlxuICAgIDwvZGl2PlxuICApO1xufTtcbiJdfQ==