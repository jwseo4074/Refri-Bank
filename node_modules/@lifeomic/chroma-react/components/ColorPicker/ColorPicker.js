"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ColorPicker = exports.isValidHexColor = exports.useStyles = exports.ColorPickerStylesKey = void 0;
var clsx_1 = __importDefault(require("clsx"));
var React = __importStar(require("react"));
var forms_1 = require("../_private/forms");
var ButtonUnstyled_1 = require("../ButtonUnstyled");
var UniqueId_1 = require("../_private/UniqueId");
var styles_1 = require("../../styles");
var Popover_1 = require("../Popover");
var Tooltip_1 = require("../Tooltip");
var colorManipulator_1 = require("@material-ui/core/styles/colorManipulator");
require("focus-visible");
exports.ColorPickerStylesKey = 'ChromaColorPicker';
exports.useStyles = (0, styles_1.makeStyles)(function (theme) { return ({
    root: {},
    label: {
        alignItems: 'center',
        color: theme.palette.black[800],
        display: 'flex',
        fontSize: theme.pxToRem(14),
        fontWeight: theme.typography.fontWeightBold,
        marginBottom: theme.spacing(1),
        '&:empty': {
            marginBottom: theme.spacing(0),
        },
    },
    labelIcon: {
        marginLeft: theme.spacing(0.75),
        color: theme.palette.primary.main,
    },
    labelIconInverse: {
        mixBlendMode: 'screen',
    },
    labelSecondary: {
        color: theme.palette.text.hint,
        fontSize: theme.pxToRem(11),
        display: 'inline-block',
        margin: theme.spacing(0, 0.75),
    },
    labelInverse: {
        color: theme.palette.common.white,
        '&$labelSecondary': {
            opacity: 0.9,
        },
    },
    input: {
        backgroundColor: 'rgba(132, 137, 166, 0.15)',
        border: "1px solid transparent",
        borderRadius: theme.pxToRem(4),
        color: theme.palette.text.primary,
        fontFamily: theme.typography.fontFamily,
        fontSize: theme.pxToRem(14),
        minWidth: theme.pxToRem(175),
        lineHeight: 1.25,
        paddingBottom: theme.spacing(1),
        paddingLeft: theme.spacing(1.25),
        paddingRight: theme.spacing(1.25),
        paddingTop: theme.spacing(1),
        transition: 'border 0.25s ease',
        '&:focus': {
            outline: 'none',
            backgroundColor: 'rgba(255, 255, 255, 0.5)',
            border: "1px solid rgba(132, 137, 166, 0.45)",
        },
        '&:disabled': {
            cursor: 'not-allowed',
            opacity: 0.625,
        },
        '&:read-only': {
            cursor: 'not-allowed',
            opacity: 0.9,
            '&:focus': {
                backgroundColor: 'rgba(132, 137, 166, 0.15)',
                border: "1px solid transparent",
            },
        },
        '&::-webkit-input-placeholder': {
            color: theme.palette.black[400],
        },
        '&::-moz-placeholder': {
            color: theme.palette.black[400],
        },
        '&:-ms-input-placeholder': {
            color: theme.palette.black[400],
        },
        '&:-moz-placeholder': {
            color: theme.palette.black[400],
        },
    },
    inputInverse: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        color: theme.palette.common.white,
        '&:focus': {
            backgroundColor: 'rgba(230, 231, 237, 0.1)',
            border: "1px solid rgba(230, 231, 237, 0.55)",
        },
        '&:read-only': {
            opacity: 1,
            '&:focus': {
                backgroundColor: 'rgba(230, 231, 237, 0.1)',
            },
        },
        '&::-webkit-input-placeholder': {
            color: 'rgba(255, 255, 255, 0.8)',
        },
        '&::-moz-placeholder': {
            color: 'rgba(255, 255, 255, 0.8)',
        },
        '&:-ms-input-placeholder': {
            color: 'rgba(255, 255, 255, 0.8)',
        },
        '&:-moz-placeholder': {
            color: 'rgba(255, 255, 255, 0.8)',
        },
    },
    hasTrailer: {
        marginBottom: theme.spacing(0.5),
    },
    inputContainer: {
        position: 'relative',
        width: 'fit-content',
    },
    inputError: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        border: "1px solid ".concat(theme.palette.error.main),
        '&:focus': {
            border: "1px solid ".concat(theme.palette.error.main),
        },
    },
    inputErrorInverse: {
        border: "1px solid ".concat(theme.palette.error[700]),
    },
    inputFullWidth: {
        width: '100%',
    },
    trailerMessage: {
        marginTop: theme.spacing(0.875),
        marginLeft: 0,
    },
    errorMessage: {
        color: theme.palette.error.main,
        fontSize: theme.typography.caption.fontSize,
        fontWeight: theme.typography.fontWeightBold,
    },
    errorMessageInverse: {
        mixBlendMode: 'color-dodge',
    },
    helpMessage: {
        fontSize: theme.typography.caption.fontSize,
        color: theme.palette.text.hint,
    },
    helpMessageInverse: {
        color: theme.palette.common.white,
    },
    tooltipContainer: {
        display: 'flex',
        outline: 'none',
    },
    valueDisplay: {
        alignItems: 'center',
        display: 'flex',
        height: theme.pxToRem(50),
        justifyContent: 'center',
        position: 'relative',
        '&::after': {
            background: (0, colorManipulator_1.fade)(theme.palette.common.black, 0.25),
            bottom: 0,
            content: "''",
            height: theme.pxToRem(1),
            position: 'absolute',
            width: '100%',
        },
    },
    swatchButton: {
        height: theme.pxToRem(20),
        width: theme.pxToRem(20),
        position: 'absolute',
        right: theme.spacing(1),
        top: theme.spacing(1),
    },
    popover: {
        minWidth: 'unset',
    },
    popoverList: {
        display: 'grid',
        gridGap: theme.spacing(1.5),
        gridTemplateColumns: "repeat(6, ".concat(theme.pxToRem(20), ")"),
        margin: theme.spacing(2),
        padding: 0,
        '& $color': {
            margin: 0,
        },
        '&:focus': {
            outline: 'none',
        },
        // We use this + a polyfill for older browser
        // to get accessible buttons for keyboard-users.
        // Users will not see these styles unless they use their keyboard
        // to focus the element
        '&:focus.focus-visible': {
            outline: "solid 2px ".concat(theme.palette.primary.main),
            outlineOffset: theme.spacing(1),
        },
    },
    popoverItem: {
        padding: 0,
    },
    colorButton: {
        transition: 'transform 0.25s ease-in-out',
        transform: 'scale(1)',
        '&:hover,&:focus': {
            transform: 'scale(1.2)',
        },
    },
    color: {
        boxShadow: 'inset 0 0 3px rgb(38 44 50 / 20%)',
        display: 'block',
        height: theme.pxToRem(20),
        width: theme.pxToRem(20),
    },
    colorCircle: {
        borderRadius: theme.pxToRem(10),
    },
    colorSquare: {
        borderRadius: theme.pxToRem(4),
    },
}); }, { name: exports.ColorPickerStylesKey });
var isValidHexColor = function (color) {
    var hexRegex = new RegExp(/^#[0-9A-F]{6}$/i);
    var shortHandHexRegex = new RegExp(/^#([0-9A-F]{3}){1,2}$/i);
    return hexRegex.test(color) || shortHandHexRegex.test(color);
};
exports.isValidHexColor = isValidHexColor;
exports.ColorPicker = React.forwardRef(function (_a, ref) {
    var _b;
    var ariaLabel = _a["aria-label"], className = _a.className, _c = _a.color, color = _c === void 0 ? 'default' : _c, colorSuggestions = _a.colorSuggestions, disabled = _a.disabled, errorMessage = _a.errorMessage, fullWidth = _a.fullWidth, hasError = _a.hasError, helpMessage = _a.helpMessage, Icon = _a.icon, id = _a.id, _d = _a.invalidColorText, invalidColorText = _d === void 0 ? 'Invalid Color' : _d, label = _a.label, name = _a.name, onChange = _a.onChange, readOnly = _a.readOnly, secondaryLabel = _a.secondaryLabel, tooltipMessage = _a.tooltipMessage, _e = _a.value, value = _e === void 0 ? '' : _e, _f = _a.variant, variant = _f === void 0 ? 'square' : _f, rootProps = __rest(_a, ['aria-label', "className", "color", "colorSuggestions", "disabled", "errorMessage", "fullWidth", "hasError", "helpMessage", "icon", "id", "invalidColorText", "label", "name", "onChange", "readOnly", "secondaryLabel", "tooltipMessage", "value", "variant"]);
    var _g = React.useState(value), colorValue = _g[0], setColorValue = _g[1];
    var classes = (0, exports.useStyles)({});
    var palette = (0, styles_1.useTheme)().palette;
    var colors = (colorSuggestions === null || colorSuggestions === void 0 ? void 0 : colorSuggestions.length)
        ? colorSuggestions
        : [
            palette.red.main,
            palette.red.light,
            palette.orange.main,
            palette.orange.light,
            palette.yellow.main,
            palette.yellow.light,
            palette.green.main,
            palette.green.light,
            palette.blue.main,
            palette.blue.light,
            palette.purple.main,
            palette.purple.light,
            palette.black.main,
            palette.black.light,
            palette.common.white,
        ];
    var isValidColor = (0, exports.isValidHexColor)(colorValue);
    var uniqueId = React.useState(function () { return id || name || (0, UniqueId_1.generateUniqueId)('ColorPicker-'); })[0];
    // istanbul ignore if - not testing dev errors
    if (!label && !ariaLabel && process.env.NODE_ENV === 'development') {
        throw new Error('If a "label" is not provided to ColorPicker, please provide "aria-label".');
    }
    var Color = function (_a) {
        var className = _a.className, color = _a.color;
        return (React.createElement("span", { className: (0, clsx_1.default)(className, classes.color, variant === 'circle' && classes.colorCircle, variant === 'square' && classes.colorSquare), style: {
                backgroundColor: (0, exports.isValidHexColor)(color) ? color : '#000000',
            } }));
    };
    var handleChange = function (color) {
        setColorValue(color);
        // istanbul ignore next - not a great way to test not calling onChange
        onChange === null || onChange === void 0 ? void 0 : onChange(color);
    };
    return (React.createElement("div", { className: (0, clsx_1.default)(classes.root, className) },
        label && (React.createElement("label", { className: (0, clsx_1.default)(classes.label, color === 'inverse' && classes.labelInverse), htmlFor: uniqueId },
            label,
            !!Icon && tooltipMessage && (React.createElement(Tooltip_1.Tooltip, { title: tooltipMessage },
                React.createElement("span", { className: classes.tooltipContainer },
                    React.createElement(Icon, { "aria-hidden": true, className: (0, clsx_1.default)(classes.labelIcon, color === 'inverse' && classes.labelIconInverse), height: 16, width: 16, role: "img" })))),
            secondaryLabel && (React.createElement("span", { className: (0, clsx_1.default)(classes.labelSecondary, color === 'inverse' && classes.labelInverse) }, secondaryLabel)))),
        React.createElement("div", { className: (0, clsx_1.default)(classes.inputContainer, fullWidth && classes.inputFullWidth) },
            React.createElement("input", __assign({ "aria-describedby": (0, forms_1.buildDescribedBy)({
                    hasError: hasError,
                    hasHelpMessage: !!helpMessage,
                    uniqueId: uniqueId,
                }), "aria-label": ariaLabel, className: (0, clsx_1.default)(classes.input, fullWidth && classes.inputFullWidth, hasError && classes.inputError, hasError && color === 'inverse' && classes.inputErrorInverse, (_b = {}, _b[classes.inputInverse] = color === 'inverse', _b)), disabled: disabled, id: uniqueId, name: name, onChange: function (e) { return handleChange(e.target.value); }, readOnly: readOnly, ref: ref, type: "text", value: colorValue }, rootProps)),
            React.createElement(Popover_1.Popover, { anchorElement: React.createElement(ButtonUnstyled_1.ButtonUnstyled, { className: classes.swatchButton, "aria-label": "Pick color", disabled: disabled || readOnly },
                    React.createElement(Color, { color: colorValue })), "aria-label": "Color Picker", className: classes.popover }, function (_a) {
                var popover = _a.popover;
                return (React.createElement(React.Fragment, null,
                    React.createElement("div", { className: classes.valueDisplay, style: {
                            backgroundColor: isValidColor
                                ? value
                                : palette.common.black,
                            color: (0, exports.isValidHexColor)(value)
                                ? palette.getContrastText(value)
                                : palette.common.white,
                        } }, isValidColor ? value : invalidColorText),
                    React.createElement(Popover_1.PopoverList, { className: classes.popoverList }, colors.map(function (color, index) { return (React.createElement(Popover_1.PopoverItem, { className: classes.popoverItem, key: index },
                        React.createElement(ButtonUnstyled_1.ButtonUnstyled, { "aria-label": "Pick ".concat(color), className: classes.colorButton, onClick: function () {
                                // istanbul ignore next - not a great way to test not calling onChange
                                handleChange === null || handleChange === void 0 ? void 0 : handleChange(color);
                                popover.hide();
                            } },
                            React.createElement(Color, { color: color })))); }))));
            })),
        helpMessage && (React.createElement(forms_1.FormHelpMessage, { color: color, className: (0, clsx_1.default)(classes.trailerMessage, classes.helpMessage, color === 'inverse' && classes.helpMessageInverse), describedById: (0, forms_1.helpFor)(uniqueId), rootElementId: uniqueId }, helpMessage)),
        hasError && errorMessage && (React.createElement(forms_1.FormErrorMessage, { className: (0, clsx_1.default)(classes.trailerMessage), color: color, describedById: (0, forms_1.errorFor)(uniqueId), rootElementId: uniqueId }, errorMessage))));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29sb3JQaWNrZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9Db2xvclBpY2tlci9Db2xvclBpY2tlci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsOENBQXdCO0FBQ3hCLDJDQUErQjtBQUMvQiwyQ0FPMkI7QUFDM0Isb0RBQW1EO0FBQ25ELGlEQUF3RDtBQUV4RCx1Q0FBb0Q7QUFDcEQsc0NBS29CO0FBQ3BCLHNDQUFxQztBQUNyQyw4RUFBaUU7QUFDakUseUJBQXVCO0FBRVYsUUFBQSxvQkFBb0IsR0FBRyxtQkFBbUIsQ0FBQztBQUUzQyxRQUFBLFNBQVMsR0FBRyxJQUFBLG1CQUFVLEVBQ2pDLFVBQUMsS0FBSyxJQUFLLE9BQUEsQ0FBQztJQUNWLElBQUksRUFBRSxFQUFFO0lBQ1IsS0FBSyxFQUFFO1FBQ0wsVUFBVSxFQUFFLFFBQVE7UUFDcEIsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztRQUMvQixPQUFPLEVBQUUsTUFBTTtRQUNmLFFBQVEsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUMzQixVQUFVLEVBQUUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxjQUFjO1FBQzNDLFlBQVksRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUM5QixTQUFTLEVBQUU7WUFDVCxZQUFZLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7U0FDL0I7S0FDRjtJQUNELFNBQVMsRUFBRTtRQUNULFVBQVUsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztRQUMvQixLQUFLLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSTtLQUNsQztJQUNELGdCQUFnQixFQUFFO1FBQ2hCLFlBQVksRUFBRSxRQUFRO0tBQ3ZCO0lBQ0QsY0FBYyxFQUFFO1FBQ2QsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUk7UUFDOUIsUUFBUSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQzNCLE9BQU8sRUFBRSxjQUFjO1FBQ3ZCLE1BQU0sRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUM7S0FDL0I7SUFDRCxZQUFZLEVBQUU7UUFDWixLQUFLLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSztRQUNqQyxrQkFBa0IsRUFBRTtZQUNsQixPQUFPLEVBQUUsR0FBRztTQUNiO0tBQ0Y7SUFDRCxLQUFLLEVBQUU7UUFDTCxlQUFlLEVBQUUsMkJBQTJCO1FBQzVDLE1BQU0sRUFBRSx1QkFBdUI7UUFDL0IsWUFBWSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQzlCLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPO1FBQ2pDLFVBQVUsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLFVBQVU7UUFDdkMsUUFBUSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQzNCLFFBQVEsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztRQUM1QixVQUFVLEVBQUUsSUFBSTtRQUNoQixhQUFhLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDL0IsV0FBVyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1FBQ2hDLFlBQVksRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztRQUNqQyxVQUFVLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDNUIsVUFBVSxFQUFFLG1CQUFtQjtRQUMvQixTQUFTLEVBQUU7WUFDVCxPQUFPLEVBQUUsTUFBTTtZQUNmLGVBQWUsRUFBRSwwQkFBMEI7WUFDM0MsTUFBTSxFQUFFLHFDQUFxQztTQUM5QztRQUNELFlBQVksRUFBRTtZQUNaLE1BQU0sRUFBRSxhQUFhO1lBQ3JCLE9BQU8sRUFBRSxLQUFLO1NBQ2Y7UUFDRCxhQUFhLEVBQUU7WUFDYixNQUFNLEVBQUUsYUFBYTtZQUNyQixPQUFPLEVBQUUsR0FBRztZQUNaLFNBQVMsRUFBRTtnQkFDVCxlQUFlLEVBQUUsMkJBQTJCO2dCQUM1QyxNQUFNLEVBQUUsdUJBQXVCO2FBQ2hDO1NBQ0Y7UUFDRCw4QkFBOEIsRUFBRTtZQUM5QixLQUFLLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1NBQ2hDO1FBQ0QscUJBQXFCLEVBQUU7WUFDckIsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztTQUNoQztRQUNELHlCQUF5QixFQUFFO1lBQ3pCLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7U0FDaEM7UUFDRCxvQkFBb0IsRUFBRTtZQUNwQixLQUFLLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1NBQ2hDO0tBQ0Y7SUFDRCxZQUFZLEVBQUU7UUFDWixlQUFlLEVBQUUsMEJBQTBCO1FBQzNDLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLO1FBQ2pDLFNBQVMsRUFBRTtZQUNULGVBQWUsRUFBRSwwQkFBMEI7WUFDM0MsTUFBTSxFQUFFLHFDQUFxQztTQUM5QztRQUNELGFBQWEsRUFBRTtZQUNiLE9BQU8sRUFBRSxDQUFDO1lBQ1YsU0FBUyxFQUFFO2dCQUNULGVBQWUsRUFBRSwwQkFBMEI7YUFDNUM7U0FDRjtRQUNELDhCQUE4QixFQUFFO1lBQzlCLEtBQUssRUFBRSwwQkFBMEI7U0FDbEM7UUFDRCxxQkFBcUIsRUFBRTtZQUNyQixLQUFLLEVBQUUsMEJBQTBCO1NBQ2xDO1FBQ0QseUJBQXlCLEVBQUU7WUFDekIsS0FBSyxFQUFFLDBCQUEwQjtTQUNsQztRQUNELG9CQUFvQixFQUFFO1lBQ3BCLEtBQUssRUFBRSwwQkFBMEI7U0FDbEM7S0FDRjtJQUNELFVBQVUsRUFBRTtRQUNWLFlBQVksRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztLQUNqQztJQUNELGNBQWMsRUFBRTtRQUNkLFFBQVEsRUFBRSxVQUFVO1FBQ3BCLEtBQUssRUFBRSxhQUFhO0tBQ3JCO0lBQ0QsVUFBVSxFQUFFO1FBQ1YsZUFBZSxFQUFFLDBCQUEwQjtRQUMzQyxNQUFNLEVBQUUsb0JBQWEsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFFO1FBQy9DLFNBQVMsRUFBRTtZQUNULE1BQU0sRUFBRSxvQkFBYSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUU7U0FDaEQ7S0FDRjtJQUNELGlCQUFpQixFQUFFO1FBQ2pCLE1BQU0sRUFBRSxvQkFBYSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBRTtLQUNoRDtJQUNELGNBQWMsRUFBRTtRQUNkLEtBQUssRUFBRSxNQUFNO0tBQ2Q7SUFDRCxjQUFjLEVBQUU7UUFDZCxTQUFTLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7UUFDL0IsVUFBVSxFQUFFLENBQUM7S0FDZDtJQUNELFlBQVksRUFBRTtRQUNaLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJO1FBQy9CLFFBQVEsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRO1FBQzNDLFVBQVUsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLGNBQWM7S0FDNUM7SUFDRCxtQkFBbUIsRUFBRTtRQUNuQixZQUFZLEVBQUUsYUFBYTtLQUM1QjtJQUNELFdBQVcsRUFBRTtRQUNYLFFBQVEsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRO1FBQzNDLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJO0tBQy9CO0lBQ0Qsa0JBQWtCLEVBQUU7UUFDbEIsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUs7S0FDbEM7SUFDRCxnQkFBZ0IsRUFBRTtRQUNoQixPQUFPLEVBQUUsTUFBTTtRQUNmLE9BQU8sRUFBRSxNQUFNO0tBQ2hCO0lBQ0QsWUFBWSxFQUFFO1FBQ1osVUFBVSxFQUFFLFFBQVE7UUFDcEIsT0FBTyxFQUFFLE1BQU07UUFDZixNQUFNLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDekIsY0FBYyxFQUFFLFFBQVE7UUFDeEIsUUFBUSxFQUFFLFVBQVU7UUFDcEIsVUFBVSxFQUFFO1lBQ1YsVUFBVSxFQUFFLElBQUEsdUJBQUksRUFBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDO1lBQ2xELE1BQU0sRUFBRSxDQUFDO1lBQ1QsT0FBTyxFQUFFLElBQUk7WUFDYixNQUFNLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDeEIsUUFBUSxFQUFFLFVBQVU7WUFDcEIsS0FBSyxFQUFFLE1BQU07U0FDZDtLQUNGO0lBQ0QsWUFBWSxFQUFFO1FBQ1osTUFBTSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ3pCLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUN4QixRQUFRLEVBQUUsVUFBVTtRQUNwQixLQUFLLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDdkIsR0FBRyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0tBQ3RCO0lBQ0QsT0FBTyxFQUFFO1FBQ1AsUUFBUSxFQUFFLE9BQU87S0FDbEI7SUFDRCxXQUFXLEVBQUU7UUFDWCxPQUFPLEVBQUUsTUFBTTtRQUNmLE9BQU8sRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztRQUMzQixtQkFBbUIsRUFBRSxvQkFBYSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxNQUFHO1FBQ3RELE1BQU0sRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUN4QixPQUFPLEVBQUUsQ0FBQztRQUNWLFVBQVUsRUFBRTtZQUNWLE1BQU0sRUFBRSxDQUFDO1NBQ1Y7UUFDRCxTQUFTLEVBQUU7WUFDVCxPQUFPLEVBQUUsTUFBTTtTQUNoQjtRQUNELDZDQUE2QztRQUM3QyxnREFBZ0Q7UUFDaEQsaUVBQWlFO1FBQ2pFLHVCQUF1QjtRQUN2Qix1QkFBdUIsRUFBRTtZQUN2QixPQUFPLEVBQUUsb0JBQWEsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFFO1lBQ2xELGFBQWEsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztTQUNoQztLQUNGO0lBQ0QsV0FBVyxFQUFFO1FBQ1gsT0FBTyxFQUFFLENBQUM7S0FDWDtJQUNELFdBQVcsRUFBRTtRQUNYLFVBQVUsRUFBRSw2QkFBNkI7UUFDekMsU0FBUyxFQUFFLFVBQVU7UUFDckIsaUJBQWlCLEVBQUU7WUFDakIsU0FBUyxFQUFFLFlBQVk7U0FDeEI7S0FDRjtJQUNELEtBQUssRUFBRTtRQUNMLFNBQVMsRUFBRSxtQ0FBbUM7UUFDOUMsT0FBTyxFQUFFLE9BQU87UUFDaEIsTUFBTSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ3pCLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztLQUN6QjtJQUNELFdBQVcsRUFBRTtRQUNYLFlBQVksRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztLQUNoQztJQUNELFdBQVcsRUFBRTtRQUNYLFlBQVksRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztLQUMvQjtDQUNGLENBQUMsRUFyTlMsQ0FxTlQsRUFDRixFQUFFLElBQUksRUFBRSw0QkFBb0IsRUFBRSxDQUMvQixDQUFDO0FBRUssSUFBTSxlQUFlLEdBQUcsVUFBQyxLQUFhO0lBQzNDLElBQU0sUUFBUSxHQUFHLElBQUksTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDL0MsSUFBTSxpQkFBaUIsR0FBRyxJQUFJLE1BQU0sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0lBQy9ELE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDL0QsQ0FBQyxDQUFDO0FBSlcsUUFBQSxlQUFlLG1CQUkxQjtBQXNCVyxRQUFBLFdBQVcsR0FBRyxLQUFLLENBQUMsVUFBVSxDQUN6QyxVQUNFLEVBc0JDLEVBQ0QsR0FBRzs7SUF0QkQsSUFBZ0IsU0FBUyxtQkFBQSxFQUN6QixTQUFTLGVBQUEsRUFDVCxhQUFpQixFQUFqQixLQUFLLG1CQUFHLFNBQVMsS0FBQSxFQUNqQixnQkFBZ0Isc0JBQUEsRUFDaEIsUUFBUSxjQUFBLEVBQ1IsWUFBWSxrQkFBQSxFQUNaLFNBQVMsZUFBQSxFQUNULFFBQVEsY0FBQSxFQUNSLFdBQVcsaUJBQUEsRUFDTCxJQUFJLFVBQUEsRUFDVixFQUFFLFFBQUEsRUFDRix3QkFBa0MsRUFBbEMsZ0JBQWdCLG1CQUFHLGVBQWUsS0FBQSxFQUNsQyxLQUFLLFdBQUEsRUFDTCxJQUFJLFVBQUEsRUFDSixRQUFRLGNBQUEsRUFDUixRQUFRLGNBQUEsRUFDUixjQUFjLG9CQUFBLEVBQ2QsY0FBYyxvQkFBQSxFQUNkLGFBQVUsRUFBVixLQUFLLG1CQUFHLEVBQUUsS0FBQSxFQUNWLGVBQWtCLEVBQWxCLE9BQU8sbUJBQUcsUUFBUSxLQUFBLEVBQ2YsU0FBUyxjQXJCZCwrUEFzQkMsQ0FEYTtJQUlSLElBQUEsS0FBOEIsS0FBSyxDQUFDLFFBQVEsQ0FBUyxLQUFLLENBQUMsRUFBMUQsVUFBVSxRQUFBLEVBQUUsYUFBYSxRQUFpQyxDQUFDO0lBRWxFLElBQU0sT0FBTyxHQUFHLElBQUEsaUJBQVMsRUFBQyxFQUFFLENBQUMsQ0FBQztJQUN0QixJQUFBLE9BQU8sR0FBSyxJQUFBLGlCQUFRLEdBQUUsUUFBZixDQUFnQjtJQUUvQixJQUFNLE1BQU0sR0FBRyxDQUFBLGdCQUFnQixhQUFoQixnQkFBZ0IsdUJBQWhCLGdCQUFnQixDQUFFLE1BQU07UUFDckMsQ0FBQyxDQUFDLGdCQUFnQjtRQUNsQixDQUFDLENBQUU7WUFDQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUk7WUFDaEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLO1lBQ2pCLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSTtZQUNuQixPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUs7WUFDcEIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJO1lBQ25CLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSztZQUNwQixPQUFPLENBQUMsS0FBSyxDQUFDLElBQUk7WUFDbEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLO1lBQ25CLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSTtZQUNqQixPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUs7WUFDbEIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJO1lBQ25CLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSztZQUNwQixPQUFPLENBQUMsS0FBSyxDQUFDLElBQUk7WUFDbEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLO1lBQ25CLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSztTQUNILENBQUM7SUFFeEIsSUFBTSxZQUFZLEdBQUcsSUFBQSx1QkFBZSxFQUFDLFVBQVUsQ0FBQyxDQUFDO0lBRTFDLElBQUEsUUFBUSxHQUFJLEtBQUssQ0FBQyxRQUFRLENBQy9CLGNBQU0sT0FBQSxFQUFFLElBQUksSUFBSSxJQUFJLElBQUEsMkJBQWdCLEVBQUMsY0FBYyxDQUFDLEVBQTlDLENBQThDLENBQ3JELEdBRmMsQ0FFYjtJQUVGLDhDQUE4QztJQUM5QyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsU0FBUyxJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxLQUFLLGFBQWEsRUFBRTtRQUNsRSxNQUFNLElBQUksS0FBSyxDQUNiLDJFQUEyRSxDQUM1RSxDQUFDO0tBQ0g7SUFFRCxJQUFNLEtBQUssR0FBRyxVQUFDLEVBTWQ7WUFMQyxTQUFTLGVBQUEsRUFDVCxLQUFLLFdBQUE7UUFJRCxPQUFBLENBQ0osOEJBQ0UsU0FBUyxFQUFFLElBQUEsY0FBSSxFQUNiLFNBQVMsRUFDVCxPQUFPLENBQUMsS0FBSyxFQUNiLE9BQU8sS0FBSyxRQUFRLElBQUksT0FBTyxDQUFDLFdBQVcsRUFDM0MsT0FBTyxLQUFLLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUM1QyxFQUNELEtBQUssRUFBRTtnQkFDTCxlQUFlLEVBQUUsSUFBQSx1QkFBZSxFQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVM7YUFDNUQsR0FDRCxDQUNIO0lBWkssQ0FZTCxDQUFDO0lBRUYsSUFBTSxZQUFZLEdBQUcsVUFBQyxLQUFhO1FBQ2pDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNyQixzRUFBc0U7UUFDdEUsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFHLEtBQUssQ0FBQyxDQUFDO0lBQ3BCLENBQUMsQ0FBQztJQUVGLE9BQU8sQ0FDTCw2QkFBSyxTQUFTLEVBQUUsSUFBQSxjQUFJLEVBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxTQUFTLENBQUM7UUFDMUMsS0FBSyxJQUFJLENBQ1IsK0JBQ0UsU0FBUyxFQUFFLElBQUEsY0FBSSxFQUNiLE9BQU8sQ0FBQyxLQUFLLEVBQ2IsS0FBSyxLQUFLLFNBQVMsSUFBSSxPQUFPLENBQUMsWUFBWSxDQUM1QyxFQUNELE9BQU8sRUFBRSxRQUFRO1lBRWhCLEtBQUs7WUFDTCxDQUFDLENBQUMsSUFBSSxJQUFJLGNBQWMsSUFBSSxDQUMzQixvQkFBQyxpQkFBTyxJQUFDLEtBQUssRUFBRSxjQUFjO2dCQUM1Qiw4QkFBTSxTQUFTLEVBQUUsT0FBTyxDQUFDLGdCQUFnQjtvQkFDdkMsb0JBQUMsSUFBSSx5QkFFSCxTQUFTLEVBQUUsSUFBQSxjQUFJLEVBQ2IsT0FBTyxDQUFDLFNBQVMsRUFDakIsS0FBSyxLQUFLLFNBQVMsSUFBSSxPQUFPLENBQUMsZ0JBQWdCLENBQ2hELEVBQ0QsTUFBTSxFQUFFLEVBQUUsRUFDVixLQUFLLEVBQUUsRUFBRSxFQUNULElBQUksRUFBQyxLQUFLLEdBQ1YsQ0FDRyxDQUNDLENBQ1g7WUFDQSxjQUFjLElBQUksQ0FDakIsOEJBQ0UsU0FBUyxFQUFFLElBQUEsY0FBSSxFQUNiLE9BQU8sQ0FBQyxjQUFjLEVBQ3RCLEtBQUssS0FBSyxTQUFTLElBQUksT0FBTyxDQUFDLFlBQVksQ0FDNUMsSUFFQSxjQUFjLENBQ1YsQ0FDUixDQUNLLENBQ1Q7UUFDRCw2QkFDRSxTQUFTLEVBQUUsSUFBQSxjQUFJLEVBQ2IsT0FBTyxDQUFDLGNBQWMsRUFDdEIsU0FBUyxJQUFJLE9BQU8sQ0FBQyxjQUFjLENBQ3BDO1lBRUQsNERBQ29CLElBQUEsd0JBQWdCLEVBQUM7b0JBQ2pDLFFBQVEsVUFBQTtvQkFDUixjQUFjLEVBQUUsQ0FBQyxDQUFDLFdBQVc7b0JBQzdCLFFBQVEsVUFBQTtpQkFDVCxDQUFDLGdCQUNVLFNBQVMsRUFDckIsU0FBUyxFQUFFLElBQUEsY0FBSSxFQUNiLE9BQU8sQ0FBQyxLQUFLLEVBQ2IsU0FBUyxJQUFJLE9BQU8sQ0FBQyxjQUFjLEVBQ25DLFFBQVEsSUFBSSxPQUFPLENBQUMsVUFBVSxFQUM5QixRQUFRLElBQUksS0FBSyxLQUFLLFNBQVMsSUFBSSxPQUFPLENBQUMsaUJBQWlCLFlBQzFELEdBQUMsT0FBTyxDQUFDLFlBQVksSUFBRyxLQUFLLEtBQUssU0FBUyxNQUM5QyxFQUNELFFBQVEsRUFBRSxRQUFRLEVBQ2xCLEVBQUUsRUFBRSxRQUFRLEVBQ1osSUFBSSxFQUFFLElBQUksRUFDVixRQUFRLEVBQUUsVUFBQyxDQUFDLElBQUssT0FBQSxZQUFZLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBNUIsQ0FBNEIsRUFDN0MsUUFBUSxFQUFFLFFBQVEsRUFDbEIsR0FBRyxFQUFFLEdBQUcsRUFDUixJQUFJLEVBQUMsTUFBTSxFQUNYLEtBQUssRUFBRSxVQUFVLElBQ2IsU0FBUyxFQUNiO1lBRUYsb0JBQUMsaUJBQU8sSUFDTixhQUFhLEVBQ1gsb0JBQUMsK0JBQWMsSUFDYixTQUFTLEVBQUUsT0FBTyxDQUFDLFlBQVksZ0JBQ3BCLFlBQVksRUFDdkIsUUFBUSxFQUFFLFFBQVEsSUFBSSxRQUFRO29CQUU5QixvQkFBQyxLQUFLLElBQUMsS0FBSyxFQUFFLFVBQVUsR0FBSSxDQUNiLGdCQUVSLGNBQWMsRUFDekIsU0FBUyxFQUFFLE9BQU8sQ0FBQyxPQUFPLElBRXpCLFVBQUMsRUFBK0I7b0JBQTdCLE9BQU8sYUFBQTtnQkFBMkIsT0FBQSxDQUNwQztvQkFDRSw2QkFDRSxTQUFTLEVBQUUsT0FBTyxDQUFDLFlBQVksRUFDL0IsS0FBSyxFQUFFOzRCQUNMLGVBQWUsRUFBRSxZQUFZO2dDQUMzQixDQUFDLENBQUMsS0FBSztnQ0FDUCxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLOzRCQUN4QixLQUFLLEVBQUUsSUFBQSx1QkFBZSxFQUFDLEtBQUssQ0FBQztnQ0FDM0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDO2dDQUNoQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLO3lCQUN6QixJQUVBLFlBQVksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FDcEM7b0JBRU4sb0JBQUMscUJBQVcsSUFBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLFdBQVcsSUFDeEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFDLEtBQWEsRUFBRSxLQUFhLElBQUssT0FBQSxDQUM1QyxvQkFBQyxxQkFBVyxJQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsV0FBVyxFQUFFLEdBQUcsRUFBRSxLQUFLO3dCQUNyRCxvQkFBQywrQkFBYyxrQkFDRCxlQUFRLEtBQUssQ0FBRSxFQUMzQixTQUFTLEVBQUUsT0FBTyxDQUFDLFdBQVcsRUFDOUIsT0FBTyxFQUFFO2dDQUNQLHNFQUFzRTtnQ0FDdEUsWUFBWSxhQUFaLFlBQVksdUJBQVosWUFBWSxDQUFHLEtBQUssQ0FBQyxDQUFDO2dDQUN0QixPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7NEJBQ2pCLENBQUM7NEJBRUQsb0JBQUMsS0FBSyxJQUFDLEtBQUssRUFBRSxLQUFLLEdBQUksQ0FDUixDQUNMLENBQ2YsRUFkNkMsQ0FjN0MsQ0FBQyxDQUNVLENBQ2IsQ0FDSjtZQWxDcUMsQ0FrQ3JDLENBQ08sQ0FDTjtRQUVMLFdBQVcsSUFBSSxDQUNkLG9CQUFDLHVCQUFlLElBQ2QsS0FBSyxFQUFFLEtBQUssRUFDWixTQUFTLEVBQUUsSUFBQSxjQUFJLEVBQ2IsT0FBTyxDQUFDLGNBQWMsRUFDdEIsT0FBTyxDQUFDLFdBQVcsRUFDbkIsS0FBSyxLQUFLLFNBQVMsSUFBSSxPQUFPLENBQUMsa0JBQWtCLENBQ2xELEVBQ0QsYUFBYSxFQUFFLElBQUEsZUFBTyxFQUFDLFFBQVEsQ0FBQyxFQUNoQyxhQUFhLEVBQUUsUUFBUSxJQUV0QixXQUFXLENBQ0ksQ0FDbkI7UUFDQSxRQUFRLElBQUksWUFBWSxJQUFJLENBQzNCLG9CQUFDLHdCQUFnQixJQUNmLFNBQVMsRUFBRSxJQUFBLGNBQUksRUFBQyxPQUFPLENBQUMsY0FBYyxDQUFDLEVBQ3ZDLEtBQUssRUFBRSxLQUFLLEVBQ1osYUFBYSxFQUFFLElBQUEsZ0JBQVEsRUFBQyxRQUFRLENBQUMsRUFDakMsYUFBYSxFQUFFLFFBQVEsSUFFdEIsWUFBWSxDQUNJLENBQ3BCLENBQ0csQ0FDUCxDQUFDO0FBQ0osQ0FBQyxDQUNGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2xzeCBmcm9tICdjbHN4JztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7XG4gIEJhc2VGb3JtRWxlbWVudCxcbiAgYnVpbGREZXNjcmliZWRCeSxcbiAgZXJyb3JGb3IsXG4gIEZvcm1FcnJvck1lc3NhZ2UsXG4gIEZvcm1IZWxwTWVzc2FnZSxcbiAgaGVscEZvcixcbn0gZnJvbSAnLi4vX3ByaXZhdGUvZm9ybXMnO1xuaW1wb3J0IHsgQnV0dG9uVW5zdHlsZWQgfSBmcm9tICcuLi9CdXR0b25VbnN0eWxlZCc7XG5pbXBvcnQgeyBnZW5lcmF0ZVVuaXF1ZUlkIH0gZnJvbSAnLi4vX3ByaXZhdGUvVW5pcXVlSWQnO1xuaW1wb3J0IHsgR2V0Q2xhc3NlcyB9IGZyb20gJy4uLy4uL3R5cGVVdGlscyc7XG5pbXBvcnQgeyBtYWtlU3R5bGVzLCB1c2VUaGVtZSB9IGZyb20gJy4uLy4uL3N0eWxlcyc7XG5pbXBvcnQge1xuICBQb3BvdmVyLFxuICBQb3BvdmVySXRlbSxcbiAgUG9wb3Zlckxpc3QsXG4gIFBvcG92ZXJSZW5kZXJQcm9wcyxcbn0gZnJvbSAnLi4vUG9wb3Zlcic7XG5pbXBvcnQgeyBUb29sdGlwIH0gZnJvbSAnLi4vVG9vbHRpcCc7XG5pbXBvcnQgeyBmYWRlIH0gZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvc3R5bGVzL2NvbG9yTWFuaXB1bGF0b3InO1xuaW1wb3J0ICdmb2N1cy12aXNpYmxlJztcblxuZXhwb3J0IGNvbnN0IENvbG9yUGlja2VyU3R5bGVzS2V5ID0gJ0Nocm9tYUNvbG9yUGlja2VyJztcblxuZXhwb3J0IGNvbnN0IHVzZVN0eWxlcyA9IG1ha2VTdHlsZXMoXG4gICh0aGVtZSkgPT4gKHtcbiAgICByb290OiB7fSxcbiAgICBsYWJlbDoge1xuICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5ibGFja1s4MDBdLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgZm9udFNpemU6IHRoZW1lLnB4VG9SZW0oMTQpLFxuICAgICAgZm9udFdlaWdodDogdGhlbWUudHlwb2dyYXBoeS5mb250V2VpZ2h0Qm9sZCxcbiAgICAgIG1hcmdpbkJvdHRvbTogdGhlbWUuc3BhY2luZygxKSxcbiAgICAgICcmOmVtcHR5Jzoge1xuICAgICAgICBtYXJnaW5Cb3R0b206IHRoZW1lLnNwYWNpbmcoMCksXG4gICAgICB9LFxuICAgIH0sXG4gICAgbGFiZWxJY29uOiB7XG4gICAgICBtYXJnaW5MZWZ0OiB0aGVtZS5zcGFjaW5nKDAuNzUpLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgIH0sXG4gICAgbGFiZWxJY29uSW52ZXJzZToge1xuICAgICAgbWl4QmxlbmRNb2RlOiAnc2NyZWVuJyxcbiAgICB9LFxuICAgIGxhYmVsU2Vjb25kYXJ5OiB7XG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS50ZXh0LmhpbnQsXG4gICAgICBmb250U2l6ZTogdGhlbWUucHhUb1JlbSgxMSksXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIG1hcmdpbjogdGhlbWUuc3BhY2luZygwLCAwLjc1KSxcbiAgICB9LFxuICAgIGxhYmVsSW52ZXJzZToge1xuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgJyYkbGFiZWxTZWNvbmRhcnknOiB7XG4gICAgICAgIG9wYWNpdHk6IDAuOSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBpbnB1dDoge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgxMzIsIDEzNywgMTY2LCAwLjE1KScsXG4gICAgICBib3JkZXI6IGAxcHggc29saWQgdHJhbnNwYXJlbnRgLFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGVtZS5weFRvUmVtKDQpLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUudGV4dC5wcmltYXJ5LFxuICAgICAgZm9udEZhbWlseTogdGhlbWUudHlwb2dyYXBoeS5mb250RmFtaWx5LFxuICAgICAgZm9udFNpemU6IHRoZW1lLnB4VG9SZW0oMTQpLFxuICAgICAgbWluV2lkdGg6IHRoZW1lLnB4VG9SZW0oMTc1KSxcbiAgICAgIGxpbmVIZWlnaHQ6IDEuMjUsXG4gICAgICBwYWRkaW5nQm90dG9tOiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgcGFkZGluZ0xlZnQ6IHRoZW1lLnNwYWNpbmcoMS4yNSksXG4gICAgICBwYWRkaW5nUmlnaHQ6IHRoZW1lLnNwYWNpbmcoMS4yNSksXG4gICAgICBwYWRkaW5nVG9wOiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgdHJhbnNpdGlvbjogJ2JvcmRlciAwLjI1cyBlYXNlJyxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC41KScsXG4gICAgICAgIGJvcmRlcjogYDFweCBzb2xpZCByZ2JhKDEzMiwgMTM3LCAxNjYsIDAuNDUpYCxcbiAgICAgIH0sXG4gICAgICAnJjpkaXNhYmxlZCc6IHtcbiAgICAgICAgY3Vyc29yOiAnbm90LWFsbG93ZWQnLFxuICAgICAgICBvcGFjaXR5OiAwLjYyNSxcbiAgICAgIH0sXG4gICAgICAnJjpyZWFkLW9ubHknOiB7XG4gICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJyxcbiAgICAgICAgb3BhY2l0eTogMC45LFxuICAgICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDEzMiwgMTM3LCAxNjYsIDAuMTUpJyxcbiAgICAgICAgICBib3JkZXI6IGAxcHggc29saWQgdHJhbnNwYXJlbnRgLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgICcmOjotd2Via2l0LWlucHV0LXBsYWNlaG9sZGVyJzoge1xuICAgICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5ibGFja1s0MDBdLFxuICAgICAgfSxcbiAgICAgICcmOjotbW96LXBsYWNlaG9sZGVyJzoge1xuICAgICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5ibGFja1s0MDBdLFxuICAgICAgfSxcbiAgICAgICcmOi1tcy1pbnB1dC1wbGFjZWhvbGRlcic6IHtcbiAgICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuYmxhY2tbNDAwXSxcbiAgICAgIH0sXG4gICAgICAnJjotbW96LXBsYWNlaG9sZGVyJzoge1xuICAgICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5ibGFja1s0MDBdLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGlucHV0SW52ZXJzZToge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyMzAsIDIzMSwgMjM3LCAwLjEpJyxcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDIzMCwgMjMxLCAyMzcsIDAuMSknLFxuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgcmdiYSgyMzAsIDIzMSwgMjM3LCAwLjU1KWAsXG4gICAgICB9LFxuICAgICAgJyY6cmVhZC1vbmx5Jzoge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDIzMCwgMjMxLCAyMzcsIDAuMSknLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgICcmOjotd2Via2l0LWlucHV0LXBsYWNlaG9sZGVyJzoge1xuICAgICAgICBjb2xvcjogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC44KScsXG4gICAgICB9LFxuICAgICAgJyY6Oi1tb3otcGxhY2Vob2xkZXInOiB7XG4gICAgICAgIGNvbG9yOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpJyxcbiAgICAgIH0sXG4gICAgICAnJjotbXMtaW5wdXQtcGxhY2Vob2xkZXInOiB7XG4gICAgICAgIGNvbG9yOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpJyxcbiAgICAgIH0sXG4gICAgICAnJjotbW96LXBsYWNlaG9sZGVyJzoge1xuICAgICAgICBjb2xvcjogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC44KScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgaGFzVHJhaWxlcjoge1xuICAgICAgbWFyZ2luQm90dG9tOiB0aGVtZS5zcGFjaW5nKDAuNSksXG4gICAgfSxcbiAgICBpbnB1dENvbnRhaW5lcjoge1xuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB3aWR0aDogJ2ZpdC1jb250ZW50JyxcbiAgICB9LFxuICAgIGlucHV0RXJyb3I6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjMwLCAyMzEsIDIzNywgMC4xKScsXG4gICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5wYWxldHRlLmVycm9yLm1haW59YCxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5wYWxldHRlLmVycm9yLm1haW59YCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBpbnB1dEVycm9ySW52ZXJzZToge1xuICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5lcnJvcls3MDBdfWAsXG4gICAgfSxcbiAgICBpbnB1dEZ1bGxXaWR0aDoge1xuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICB9LFxuICAgIHRyYWlsZXJNZXNzYWdlOiB7XG4gICAgICBtYXJnaW5Ub3A6IHRoZW1lLnNwYWNpbmcoMC44NzUpLFxuICAgICAgbWFyZ2luTGVmdDogMCxcbiAgICB9LFxuICAgIGVycm9yTWVzc2FnZToge1xuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuZXJyb3IubWFpbixcbiAgICAgIGZvbnRTaXplOiB0aGVtZS50eXBvZ3JhcGh5LmNhcHRpb24uZm9udFNpemUsXG4gICAgICBmb250V2VpZ2h0OiB0aGVtZS50eXBvZ3JhcGh5LmZvbnRXZWlnaHRCb2xkLFxuICAgIH0sXG4gICAgZXJyb3JNZXNzYWdlSW52ZXJzZToge1xuICAgICAgbWl4QmxlbmRNb2RlOiAnY29sb3ItZG9kZ2UnLFxuICAgIH0sXG4gICAgaGVscE1lc3NhZ2U6IHtcbiAgICAgIGZvbnRTaXplOiB0aGVtZS50eXBvZ3JhcGh5LmNhcHRpb24uZm9udFNpemUsXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS50ZXh0LmhpbnQsXG4gICAgfSxcbiAgICBoZWxwTWVzc2FnZUludmVyc2U6IHtcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICB9LFxuICAgIHRvb2x0aXBDb250YWluZXI6IHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICB9LFxuICAgIHZhbHVlRGlzcGxheToge1xuICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oNTApLFxuICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAnJjo6YWZ0ZXInOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IGZhZGUodGhlbWUucGFsZXR0ZS5jb21tb24uYmxhY2ssIDAuMjUpLFxuICAgICAgICBib3R0b206IDAsXG4gICAgICAgIGNvbnRlbnQ6IGAnJ2AsXG4gICAgICAgIGhlaWdodDogdGhlbWUucHhUb1JlbSgxKSxcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgc3dhdGNoQnV0dG9uOiB7XG4gICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMjApLFxuICAgICAgd2lkdGg6IHRoZW1lLnB4VG9SZW0oMjApLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICByaWdodDogdGhlbWUuc3BhY2luZygxKSxcbiAgICAgIHRvcDogdGhlbWUuc3BhY2luZygxKSxcbiAgICB9LFxuICAgIHBvcG92ZXI6IHtcbiAgICAgIG1pbldpZHRoOiAndW5zZXQnLFxuICAgIH0sXG4gICAgcG9wb3Zlckxpc3Q6IHtcbiAgICAgIGRpc3BsYXk6ICdncmlkJyxcbiAgICAgIGdyaWRHYXA6IHRoZW1lLnNwYWNpbmcoMS41KSxcbiAgICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnM6IGByZXBlYXQoNiwgJHt0aGVtZS5weFRvUmVtKDIwKX0pYCxcbiAgICAgIG1hcmdpbjogdGhlbWUuc3BhY2luZygyKSxcbiAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAnJiAkY29sb3InOiB7XG4gICAgICAgIG1hcmdpbjogMCxcbiAgICAgIH0sXG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgfSxcbiAgICAgIC8vIFdlIHVzZSB0aGlzICsgYSBwb2x5ZmlsbCBmb3Igb2xkZXIgYnJvd3NlclxuICAgICAgLy8gdG8gZ2V0IGFjY2Vzc2libGUgYnV0dG9ucyBmb3Iga2V5Ym9hcmQtdXNlcnMuXG4gICAgICAvLyBVc2VycyB3aWxsIG5vdCBzZWUgdGhlc2Ugc3R5bGVzIHVubGVzcyB0aGV5IHVzZSB0aGVpciBrZXlib2FyZFxuICAgICAgLy8gdG8gZm9jdXMgdGhlIGVsZW1lbnRcbiAgICAgICcmOmZvY3VzLmZvY3VzLXZpc2libGUnOiB7XG4gICAgICAgIG91dGxpbmU6IGBzb2xpZCAycHggJHt0aGVtZS5wYWxldHRlLnByaW1hcnkubWFpbn1gLFxuICAgICAgICBvdXRsaW5lT2Zmc2V0OiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHBvcG92ZXJJdGVtOiB7XG4gICAgICBwYWRkaW5nOiAwLFxuICAgIH0sXG4gICAgY29sb3JCdXR0b246IHtcbiAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4yNXMgZWFzZS1pbi1vdXQnLFxuICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoMSknLFxuICAgICAgJyY6aG92ZXIsJjpmb2N1cyc6IHtcbiAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoMS4yKScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgY29sb3I6IHtcbiAgICAgIGJveFNoYWRvdzogJ2luc2V0IDAgMCAzcHggcmdiKDM4IDQ0IDUwIC8gMjAlKScsXG4gICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgaGVpZ2h0OiB0aGVtZS5weFRvUmVtKDIwKSxcbiAgICAgIHdpZHRoOiB0aGVtZS5weFRvUmVtKDIwKSxcbiAgICB9LFxuICAgIGNvbG9yQ2lyY2xlOiB7XG4gICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnB4VG9SZW0oMTApLFxuICAgIH0sXG4gICAgY29sb3JTcXVhcmU6IHtcbiAgICAgIGJvcmRlclJhZGl1czogdGhlbWUucHhUb1JlbSg0KSxcbiAgICB9LFxuICB9KSxcbiAgeyBuYW1lOiBDb2xvclBpY2tlclN0eWxlc0tleSB9XG4pO1xuXG5leHBvcnQgY29uc3QgaXNWYWxpZEhleENvbG9yID0gKGNvbG9yOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgaGV4UmVnZXggPSBuZXcgUmVnRXhwKC9eI1swLTlBLUZdezZ9JC9pKTtcbiAgY29uc3Qgc2hvcnRIYW5kSGV4UmVnZXggPSBuZXcgUmVnRXhwKC9eIyhbMC05QS1GXXszfSl7MSwyfSQvaSk7XG4gIHJldHVybiBoZXhSZWdleC50ZXN0KGNvbG9yKSB8fCBzaG9ydEhhbmRIZXhSZWdleC50ZXN0KGNvbG9yKTtcbn07XG5cbmV4cG9ydCB0eXBlIENvbG9yUGlja2VyQ2xhc3NlcyA9IEdldENsYXNzZXM8dHlwZW9mIHVzZVN0eWxlcz47XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29sb3JQaWNrZXJQcm9wc1xuICBleHRlbmRzIE9taXQ8UmVhY3QuQ29tcG9uZW50UHJvcHNXaXRob3V0UmVmPCdpbnB1dCc+LCAnb25DaGFuZ2UnPiB7XG4gIGNvbG9yPzogQmFzZUZvcm1FbGVtZW50Wydjb2xvciddO1xuICBjb2xvclN1Z2dlc3Rpb25zPzogQXJyYXk8c3RyaW5nPjtcbiAgZXJyb3JNZXNzYWdlPzogQmFzZUZvcm1FbGVtZW50WydlcnJvck1lc3NhZ2UnXTtcbiAgZnVsbFdpZHRoPzogYm9vbGVhbjtcbiAgaGFzRXJyb3I/OiBCYXNlRm9ybUVsZW1lbnRbJ2hhc0Vycm9yJ107XG4gIGhlbHBNZXNzYWdlPzogQmFzZUZvcm1FbGVtZW50WydoZWxwTWVzc2FnZSddO1xuICBpY29uPzogUmVhY3QuQ29tcG9uZW50VHlwZTxSZWFjdC5TVkdQcm9wczxTVkdTVkdFbGVtZW50Pj47XG4gIGludmFsaWRDb2xvclRleHQ/OiBzdHJpbmc7XG4gIGxhYmVsPzogQmFzZUZvcm1FbGVtZW50WydsYWJlbCddO1xuICBvbkNoYW5nZT86IChjb2xvcjogc3RyaW5nKSA9PiB2b2lkO1xuICBzZWNvbmRhcnlMYWJlbD86IHN0cmluZztcbiAgdG9vbHRpcE1lc3NhZ2U/OiBzdHJpbmc7XG4gIHZhbHVlPzogc3RyaW5nO1xuICB2YXJpYW50PzogJ3NxdWFyZScgfCAnY2lyY2xlJztcbn1cblxuZXhwb3J0IGNvbnN0IENvbG9yUGlja2VyID0gUmVhY3QuZm9yd2FyZFJlZjxIVE1MSW5wdXRFbGVtZW50LCBDb2xvclBpY2tlclByb3BzPihcbiAgKFxuICAgIHtcbiAgICAgIFsnYXJpYS1sYWJlbCddOiBhcmlhTGFiZWwsXG4gICAgICBjbGFzc05hbWUsXG4gICAgICBjb2xvciA9ICdkZWZhdWx0JyxcbiAgICAgIGNvbG9yU3VnZ2VzdGlvbnMsXG4gICAgICBkaXNhYmxlZCxcbiAgICAgIGVycm9yTWVzc2FnZSxcbiAgICAgIGZ1bGxXaWR0aCxcbiAgICAgIGhhc0Vycm9yLFxuICAgICAgaGVscE1lc3NhZ2UsXG4gICAgICBpY29uOiBJY29uLFxuICAgICAgaWQsXG4gICAgICBpbnZhbGlkQ29sb3JUZXh0ID0gJ0ludmFsaWQgQ29sb3InLFxuICAgICAgbGFiZWwsXG4gICAgICBuYW1lLFxuICAgICAgb25DaGFuZ2UsXG4gICAgICByZWFkT25seSxcbiAgICAgIHNlY29uZGFyeUxhYmVsLFxuICAgICAgdG9vbHRpcE1lc3NhZ2UsXG4gICAgICB2YWx1ZSA9ICcnLFxuICAgICAgdmFyaWFudCA9ICdzcXVhcmUnLFxuICAgICAgLi4ucm9vdFByb3BzXG4gICAgfSxcbiAgICByZWZcbiAgKSA9PiB7XG4gICAgY29uc3QgW2NvbG9yVmFsdWUsIHNldENvbG9yVmFsdWVdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPih2YWx1ZSk7XG5cbiAgICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKHt9KTtcbiAgICBjb25zdCB7IHBhbGV0dGUgfSA9IHVzZVRoZW1lKCk7XG5cbiAgICBjb25zdCBjb2xvcnMgPSBjb2xvclN1Z2dlc3Rpb25zPy5sZW5ndGhcbiAgICAgID8gY29sb3JTdWdnZXN0aW9uc1xuICAgICAgOiAoW1xuICAgICAgICAgIHBhbGV0dGUucmVkLm1haW4sXG4gICAgICAgICAgcGFsZXR0ZS5yZWQubGlnaHQsXG4gICAgICAgICAgcGFsZXR0ZS5vcmFuZ2UubWFpbixcbiAgICAgICAgICBwYWxldHRlLm9yYW5nZS5saWdodCxcbiAgICAgICAgICBwYWxldHRlLnllbGxvdy5tYWluLFxuICAgICAgICAgIHBhbGV0dGUueWVsbG93LmxpZ2h0LFxuICAgICAgICAgIHBhbGV0dGUuZ3JlZW4ubWFpbixcbiAgICAgICAgICBwYWxldHRlLmdyZWVuLmxpZ2h0LFxuICAgICAgICAgIHBhbGV0dGUuYmx1ZS5tYWluLFxuICAgICAgICAgIHBhbGV0dGUuYmx1ZS5saWdodCxcbiAgICAgICAgICBwYWxldHRlLnB1cnBsZS5tYWluLFxuICAgICAgICAgIHBhbGV0dGUucHVycGxlLmxpZ2h0LFxuICAgICAgICAgIHBhbGV0dGUuYmxhY2subWFpbixcbiAgICAgICAgICBwYWxldHRlLmJsYWNrLmxpZ2h0LFxuICAgICAgICAgIHBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgICBdIGFzIEFycmF5PHN0cmluZz4pO1xuXG4gICAgY29uc3QgaXNWYWxpZENvbG9yID0gaXNWYWxpZEhleENvbG9yKGNvbG9yVmFsdWUpO1xuXG4gICAgY29uc3QgW3VuaXF1ZUlkXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4oXG4gICAgICAoKSA9PiBpZCB8fCBuYW1lIHx8IGdlbmVyYXRlVW5pcXVlSWQoJ0NvbG9yUGlja2VyLScpXG4gICAgKTtcblxuICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBpZiAtIG5vdCB0ZXN0aW5nIGRldiBlcnJvcnNcbiAgICBpZiAoIWxhYmVsICYmICFhcmlhTGFiZWwgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0lmIGEgXCJsYWJlbFwiIGlzIG5vdCBwcm92aWRlZCB0byBDb2xvclBpY2tlciwgcGxlYXNlIHByb3ZpZGUgXCJhcmlhLWxhYmVsXCIuJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBDb2xvciA9ICh7XG4gICAgICBjbGFzc05hbWUsXG4gICAgICBjb2xvcixcbiAgICB9OiB7XG4gICAgICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gICAgICBjb2xvcjogc3RyaW5nO1xuICAgIH0pID0+IChcbiAgICAgIDxzcGFuXG4gICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgICAgY2xhc3Nlcy5jb2xvcixcbiAgICAgICAgICB2YXJpYW50ID09PSAnY2lyY2xlJyAmJiBjbGFzc2VzLmNvbG9yQ2lyY2xlLFxuICAgICAgICAgIHZhcmlhbnQgPT09ICdzcXVhcmUnICYmIGNsYXNzZXMuY29sb3JTcXVhcmVcbiAgICAgICAgKX1cbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGlzVmFsaWRIZXhDb2xvcihjb2xvcikgPyBjb2xvciA6ICcjMDAwMDAwJyxcbiAgICAgICAgfX1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGNvbnN0IGhhbmRsZUNoYW5nZSA9IChjb2xvcjogc3RyaW5nKSA9PiB7XG4gICAgICBzZXRDb2xvclZhbHVlKGNvbG9yKTtcbiAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0IC0gbm90IGEgZ3JlYXQgd2F5IHRvIHRlc3Qgbm90IGNhbGxpbmcgb25DaGFuZ2VcbiAgICAgIG9uQ2hhbmdlPy4oY29sb3IpO1xuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Nsc3goY2xhc3Nlcy5yb290LCBjbGFzc05hbWUpfT5cbiAgICAgICAge2xhYmVsICYmIChcbiAgICAgICAgICA8bGFiZWxcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgICAgY2xhc3Nlcy5sYWJlbCxcbiAgICAgICAgICAgICAgY29sb3IgPT09ICdpbnZlcnNlJyAmJiBjbGFzc2VzLmxhYmVsSW52ZXJzZVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGh0bWxGb3I9e3VuaXF1ZUlkfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtsYWJlbH1cbiAgICAgICAgICAgIHshIUljb24gJiYgdG9vbHRpcE1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17dG9vbHRpcE1lc3NhZ2V9PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17Y2xhc3Nlcy50b29sdGlwQ29udGFpbmVyfT5cbiAgICAgICAgICAgICAgICAgIDxJY29uXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzLmxhYmVsSWNvbixcbiAgICAgICAgICAgICAgICAgICAgICBjb2xvciA9PT0gJ2ludmVyc2UnICYmIGNsYXNzZXMubGFiZWxJY29uSW52ZXJzZVxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezE2fVxuICAgICAgICAgICAgICAgICAgICB3aWR0aD17MTZ9XG4gICAgICAgICAgICAgICAgICAgIHJvbGU9XCJpbWdcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7c2Vjb25kYXJ5TGFiZWwgJiYgKFxuICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgICAgICAgIGNsYXNzZXMubGFiZWxTZWNvbmRhcnksXG4gICAgICAgICAgICAgICAgICBjb2xvciA9PT0gJ2ludmVyc2UnICYmIGNsYXNzZXMubGFiZWxJbnZlcnNlXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtzZWNvbmRhcnlMYWJlbH1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICApfVxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KFxuICAgICAgICAgICAgY2xhc3Nlcy5pbnB1dENvbnRhaW5lcixcbiAgICAgICAgICAgIGZ1bGxXaWR0aCAmJiBjbGFzc2VzLmlucHV0RnVsbFdpZHRoXG4gICAgICAgICAgKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgYXJpYS1kZXNjcmliZWRieT17YnVpbGREZXNjcmliZWRCeSh7XG4gICAgICAgICAgICAgIGhhc0Vycm9yLFxuICAgICAgICAgICAgICBoYXNIZWxwTWVzc2FnZTogISFoZWxwTWVzc2FnZSxcbiAgICAgICAgICAgICAgdW5pcXVlSWQsXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIGFyaWEtbGFiZWw9e2FyaWFMYWJlbH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgICAgY2xhc3Nlcy5pbnB1dCxcbiAgICAgICAgICAgICAgZnVsbFdpZHRoICYmIGNsYXNzZXMuaW5wdXRGdWxsV2lkdGgsXG4gICAgICAgICAgICAgIGhhc0Vycm9yICYmIGNsYXNzZXMuaW5wdXRFcnJvcixcbiAgICAgICAgICAgICAgaGFzRXJyb3IgJiYgY29sb3IgPT09ICdpbnZlcnNlJyAmJiBjbGFzc2VzLmlucHV0RXJyb3JJbnZlcnNlLFxuICAgICAgICAgICAgICB7IFtjbGFzc2VzLmlucHV0SW52ZXJzZV06IGNvbG9yID09PSAnaW52ZXJzZScgfVxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgIGlkPXt1bmlxdWVJZH1cbiAgICAgICAgICAgIG5hbWU9e25hbWV9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUNoYW5nZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICByZWFkT25seT17cmVhZE9ubHl9XG4gICAgICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIHZhbHVlPXtjb2xvclZhbHVlfVxuICAgICAgICAgICAgey4uLnJvb3RQcm9wc31cbiAgICAgICAgICAvPlxuXG4gICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgIGFuY2hvckVsZW1lbnQ9e1xuICAgICAgICAgICAgICA8QnV0dG9uVW5zdHlsZWRcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMuc3dhdGNoQnV0dG9ufVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJQaWNrIGNvbG9yXCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWQgfHwgcmVhZE9ubHl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8Q29sb3IgY29sb3I9e2NvbG9yVmFsdWV9IC8+XG4gICAgICAgICAgICAgIDwvQnV0dG9uVW5zdHlsZWQ+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiQ29sb3IgUGlja2VyXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy5wb3BvdmVyfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHsoeyBwb3BvdmVyIH06IFBvcG92ZXJSZW5kZXJQcm9wcykgPT4gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy52YWx1ZURpc3BsYXl9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGlzVmFsaWRDb2xvclxuICAgICAgICAgICAgICAgICAgICAgID8gdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICA6IHBhbGV0dGUuY29tbW9uLmJsYWNrLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogaXNWYWxpZEhleENvbG9yKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgID8gcGFsZXR0ZS5nZXRDb250cmFzdFRleHQodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgOiBwYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2lzVmFsaWRDb2xvciA/IHZhbHVlIDogaW52YWxpZENvbG9yVGV4dH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxQb3BvdmVyTGlzdCBjbGFzc05hbWU9e2NsYXNzZXMucG9wb3Zlckxpc3R9PlxuICAgICAgICAgICAgICAgICAge2NvbG9ycy5tYXAoKGNvbG9yOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPFBvcG92ZXJJdGVtIGNsYXNzTmFtZT17Y2xhc3Nlcy5wb3BvdmVySXRlbX0ga2V5PXtpbmRleH0+XG4gICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblVuc3R5bGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtgUGljayAke2NvbG9yfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMuY29sb3JCdXR0b259XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0IC0gbm90IGEgZ3JlYXQgd2F5IHRvIHRlc3Qgbm90IGNhbGxpbmcgb25DaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ2hhbmdlPy4oY29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwb3BvdmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENvbG9yIGNvbG9yPXtjb2xvcn0gLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvblVuc3R5bGVkPlxuICAgICAgICAgICAgICAgICAgICA8L1BvcG92ZXJJdGVtPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9Qb3BvdmVyTGlzdD5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvUG9wb3Zlcj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAge2hlbHBNZXNzYWdlICYmIChcbiAgICAgICAgICA8Rm9ybUhlbHBNZXNzYWdlXG4gICAgICAgICAgICBjb2xvcj17Y29sb3J9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgICAgIGNsYXNzZXMudHJhaWxlck1lc3NhZ2UsXG4gICAgICAgICAgICAgIGNsYXNzZXMuaGVscE1lc3NhZ2UsXG4gICAgICAgICAgICAgIGNvbG9yID09PSAnaW52ZXJzZScgJiYgY2xhc3Nlcy5oZWxwTWVzc2FnZUludmVyc2VcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBkZXNjcmliZWRCeUlkPXtoZWxwRm9yKHVuaXF1ZUlkKX1cbiAgICAgICAgICAgIHJvb3RFbGVtZW50SWQ9e3VuaXF1ZUlkfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtoZWxwTWVzc2FnZX1cbiAgICAgICAgICA8L0Zvcm1IZWxwTWVzc2FnZT5cbiAgICAgICAgKX1cbiAgICAgICAge2hhc0Vycm9yICYmIGVycm9yTWVzc2FnZSAmJiAoXG4gICAgICAgICAgPEZvcm1FcnJvck1lc3NhZ2VcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChjbGFzc2VzLnRyYWlsZXJNZXNzYWdlKX1cbiAgICAgICAgICAgIGNvbG9yPXtjb2xvcn1cbiAgICAgICAgICAgIGRlc2NyaWJlZEJ5SWQ9e2Vycm9yRm9yKHVuaXF1ZUlkKX1cbiAgICAgICAgICAgIHJvb3RFbGVtZW50SWQ9e3VuaXF1ZUlkfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtlcnJvck1lc3NhZ2V9XG4gICAgICAgICAgPC9Gb3JtRXJyb3JNZXNzYWdlPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuKTtcbiJdfQ==