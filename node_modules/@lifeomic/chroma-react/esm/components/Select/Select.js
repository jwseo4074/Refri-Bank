var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
import clsx from 'clsx';
import * as React from 'react';
import FocusLock from 'react-focus-lock';
import { Popover as ReakitPopover, PopoverDisclosure, usePopoverState, } from 'reakit/Popover';
import { Portal } from 'reakit/Portal';
import { ChevronDown } from '@lifeomic/chromicons';
import { makeStyles } from '../../styles';
import { buildDescribedBy, errorFor, FormErrorMessage, FormHelpMessage, helpFor, } from '../_private/forms';
import { generateUniqueId } from '../_private/UniqueId';
import { Text } from '../Text';
import { motion, useReducedMotion } from 'framer-motion';
import { RoverOption } from './RoverOption';
import { useRoverState } from 'reakit/Rover';
import { getTestProps } from '../../testUtils/getTestProps';
import { screenreaderOnlyStyles } from '../../styles/screenreaderOnly';
import { Tooltip } from '../Tooltip';
export var testIds = {
    placeholderText: 'select-placeholderText',
};
export var SelectStylesKey = 'ChromaSelect';
export var useStyles = makeStyles(function (theme) { return ({
    root: {},
    popover: {
        background: theme.palette.common.white,
        borderRadius: theme.pxToRem(10),
        boxShadow: theme.boxShadows.popover,
        minWidth: theme.pxToRem(224),
        overflow: 'hidden',
        zIndex: 1300,
        '&:focus': {
            outline: 'none',
        },
    },
    label: {
        alignItems: 'center',
        color: theme.palette.black[800],
        display: 'flex',
        fontSize: theme.pxToRem(14),
        fontWeight: theme.typography.fontWeightBold,
        marginBottom: theme.spacing(1),
        '&:empty': {
            marginBottom: theme.spacing(0),
        },
    },
    labelSecondary: {
        fontSize: theme.pxToRem(11),
        display: 'inline-block',
        margin: theme.spacing(0, 0.75),
        color: theme.palette.text.hint,
    },
    labelInverse: {
        color: theme.palette.common.white,
        '&$labelSecondary': {
            opacity: 0.9,
        },
    },
    labelIcon: {
        marginLeft: theme.spacing(0.75),
        color: theme.palette.primary.main,
    },
    labelIconInverse: {
        mixBlendMode: 'screen',
    },
    tooltipContainer: {
        display: 'flex',
        outline: 'none',
    },
    button: {
        alignItems: 'center',
        backgroundColor: 'rgba(132, 137, 166, 0.15)',
        border: 'solid 1px transparent',
        borderRadius: theme.pxToRem(4),
        color: theme.palette.text.primary,
        cursor: 'pointer',
        display: 'block',
        fontFamily: theme.typography.fontFamily,
        fontSize: theme.pxToRem(14),
        maxHeight: theme.pxToRem(84),
        minHeight: theme.pxToRem(35),
        margin: 0,
        minWidth: theme.pxToRem(175),
        outline: 'none',
        overflow: 'hidden',
        padding: theme.spacing(0.5, 3.75, 0.5, 1.25),
        position: 'relative',
        transition: 'border 0.5s ease',
        '&:disabled': {
            cursor: 'not-allowed',
            opacity: 0.625,
        },
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(0, 150, 225, .3)',
            outline: 'none',
        },
        '&::-moz-focus-inner': {
            border: 'none',
        },
    },
    buttonInverse: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        color: theme.palette.common.white,
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(255, 255, 255, .3)',
        },
        '& $chip': {
            background: 'rgba(255, 255, 255, 0.5)',
            color: theme.palette.text.primary,
        },
        '& $buttonText$placeholderText': {
            color: theme.palette.common.white,
        },
    },
    buttonError: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        border: "1px solid " + theme.palette.error.main,
        '&:focus': {
            border: "1px solid " + theme.palette.error.main,
        },
    },
    buttonArrowContainer: {
        alignItems: 'center',
        display: 'flex',
        flexFlow: 'column',
        minHeight: theme.pxToRem(32),
        height: theme.pxToRem(32),
        justifyContent: 'center',
        position: 'absolute',
        right: theme.pxToRem(-6),
        textAlign: 'center',
        top: theme.pxToRem(1),
        width: '2rem',
    },
    buttonText: {
        color: 'inherit',
        marginTop: theme.spacing(0.125),
        overflow: 'hidden',
        textAlign: 'left',
        textOverflow: 'ellipsis',
        whiteSpace: 'nowrap',
        width: '100%',
        '&$placeholderText': {
            color: theme.palette.text.hint,
        },
    },
    placeholderText: {},
    comboBoxPlaceholder: {
        marginTop: theme.spacing(0.25),
    },
    comboxBoxOverflow: {
        overflowY: 'auto',
    },
    buttonFullWidth: {
        width: '100%',
    },
    arrowIcon: {
        alignSelf: 'flex-start',
        position: 'sticky',
        transition: 'transform 0.25s ease',
        strokeOpacity: 0.6,
        top: theme.spacing(0.5),
    },
    rotate: {
        transform: 'rotate(180deg)',
        top: theme.spacing(0.375),
    },
    ul: {
        display: 'block',
        listStyle: 'none',
        margin: 0,
        maxHeight: theme.pxToRem(328),
        overflowY: 'auto',
        padding: theme.spacing(1, 0),
    },
    option: {
        alignItems: 'center',
        backgroundColor: theme.palette.common.white,
        cursor: 'pointer',
        display: 'flex',
        minHeight: theme.pxToRem(26),
        outline: 'none',
        paddingLeft: theme.spacing(2),
        paddingRight: theme.spacing(2),
        transition: 'background-color 0.25s ease',
        '&:hover, &:focus': {
            backgroundColor: 'rgba(222,244,252, 0.6)',
        },
    },
    chipList: {
        display: 'flex',
        flexFlow: 'wrap',
        margin: theme.spacing(-0.5, -0.5, 0),
    },
    chip: {
        alignItems: 'center',
        background: theme.palette.primary.main,
        borderRadius: theme.pxToRem(3),
        color: theme.palette.common.white,
        display: 'inline-block',
        height: theme.pxToRem(22),
        fontSize: theme.pxToRem(12),
        margin: theme.spacing(0.5, 0.25, 0),
        overflow: 'hidden',
        paddingLeft: theme.spacing(1),
        paddingRight: theme.spacing(1),
        textOverflow: 'ellipsis',
        whiteSpace: 'nowrap',
    },
    message: {
        marginTop: theme.spacing(0.875),
        marginLeft: 0,
    },
    srOnly: __assign({}, screenreaderOnlyStyles),
}); }, { name: SelectStylesKey });
var popoverVariants = {
    open: {
        opacity: 1,
        offsetTop: -2,
        transition: {
            duration: 0.25,
            ease: 'easeOut',
        },
    },
    closed: {
        opacity: 0,
        offsetTop: -18,
    },
};
var popoverVariantsReduced = {
    open: {
        opacity: 1,
        transition: {
            duration: 0.2,
            ease: 'easeOut',
        },
    },
    closed: {
        opacity: 0,
    },
};
var listMotionVariants = {
    open: {
        transition: {
            delayChildren: 0.025,
            staggerChildren: 0.045,
            duration: 0.2,
        },
    },
    closed: {},
};
var listMotionVariantsReduced = {
    open: {},
    closed: {},
};
var listItemMotionVariants = {
    open: {
        y: 0,
        opacity: 1,
        transition: {
            y: { stiffness: 1000, velocity: -100 },
        },
    },
    closed: {
        y: -16,
        opacity: 0,
    },
};
var listItemMotionVariantsReduced = {
    open: {
        opacity: 1,
    },
    closed: {
        opacity: 0,
    },
};
var isHeadingElement = function (element) {
    return element.props['data-select-role'] === 'heading';
};
export var Select = function (_a) {
    var _b;
    var ariaLabel = _a["aria-label"], children = _a.children, className = _a.className, _c = _a.color, color = _c === void 0 ? 'default' : _c, errorMessage = _a.errorMessage, fullWidth = _a.fullWidth, hasError = _a.hasError, helpMessage = _a.helpMessage, Icon = _a.icon, id = _a.id, label = _a.label, secondaryLabel = _a.secondaryLabel, onChange = _a.onChange, placeholder = _a.placeholder, placement = _a.placement, popoverAriaLabel = _a.popoverAriaLabel, selectedOptionDisplay = _a.selectedOptionDisplay, tooltipMessage = _a.tooltipMessage, value = _a.value, rootProps = __rest(_a, ['aria-label', "children", "className", "color", "errorMessage", "fullWidth", "hasError", "helpMessage", "icon", "id", "label", "secondaryLabel", "onChange", "placeholder", "placement", "popoverAriaLabel", "selectedOptionDisplay", "tooltipMessage", "value"]);
    var classes = useStyles({});
    var popover = usePopoverState({ placement: placement });
    var shouldReduceMotion = useReducedMotion();
    var buttonRef = React.useRef(); // TODO: Need to type this properly...
    var _d = React.useState(50), width = _d[0], setWidth = _d[1];
    var _e = React.useState(null), internalSelection = _e[0], setInternalSelection = _e[1];
    var uniqueId = React.useState(function () { return id || name || generateUniqueId('select-'); })[0];
    var rover = useRoverState({ loop: true, orientation: 'vertical' });
    // Update the opened popover width any time the button width changes
    // TODO: Review the best way to handle this without breaking
    // eslint-disable-next-line react-hooks/exhaustive-deps
    React.useEffect(function () {
        setWidth(buttonRef.current.getBoundingClientRect().width);
    });
    React.useEffect(function () {
        // TODO: Need to type this properly as well...
        var match = React.Children.toArray(children).find(function (child) {
            if (!React.isValidElement(child)) {
                return null;
            }
            if (isHeadingElement(child)) {
                return null;
            }
            return child.props.value === value;
        });
        // If there is no match, set internalSelection to null so placeholder will be shown
        setInternalSelection(match ? match.props : null);
    }, [children, value]);
    var hidePopover = popover.hide;
    var handleOptionSelected = React.useCallback(function (optionValue, meta) {
        hidePopover();
        onChange === null || onChange === void 0 ? void 0 : onChange(optionValue, meta);
    }, [hidePopover, onChange]);
    if (!label && !ariaLabel && process.env.NODE_ENV === 'development') {
        throw new Error('If a "label" is not provided to Select, please provide "aria-label".');
    }
    return (React.createElement("div", { className: clsx(classes.root, className) },
        React.createElement("label", { "aria-hidden": "true", className: clsx(classes.label, color === 'inverse' && classes.labelInverse, !label && ariaLabel && classes.srOnly), htmlFor: uniqueId },
            label || ariaLabel,
            !!Icon && tooltipMessage && (React.createElement(Tooltip, { title: tooltipMessage },
                React.createElement("span", { className: classes.tooltipContainer },
                    React.createElement(Icon, { className: clsx(classes.labelIcon, color === 'inverse' && classes.labelIconInverse), width: 16, height: 16, role: "img", "aria-hidden": true })))),
            secondaryLabel ? (React.createElement("span", { className: clsx(classes.labelSecondary, color === 'inverse' && classes.labelInverse) }, secondaryLabel)) : null),
        React.createElement(PopoverDisclosure, __assign({ className: clsx(classes.button, hasError && classes.buttonError, fullWidth && classes.buttonFullWidth, (_b = {},
                _b[classes.buttonInverse] = color === 'inverse',
                _b)), ref: buttonRef, "aria-describedby": buildDescribedBy({
                hasError: hasError,
                hasHelpMessage: !!helpMessage,
                uniqueId: uniqueId,
            }), id: uniqueId }, popover, rootProps),
            React.createElement(React.Fragment, null,
                !internalSelection && (React.createElement(Text, __assign({ className: clsx(classes.placeholderText, classes.buttonText), size: "subbody" }, getTestProps(testIds.placeholderText)), placeholder)),
                internalSelection && !selectedOptionDisplay && (React.createElement(Text, { className: classes.buttonText, size: "subbody" }, internalSelection.title)),
                internalSelection && selectedOptionDisplay && (React.createElement(Text, { className: classes.buttonText, size: "subbody" }, selectedOptionDisplay(internalSelection))),
                React.createElement("div", { className: classes.buttonArrowContainer, role: "presentation" },
                    React.createElement(ChevronDown, { className: clsx(classes.arrowIcon, popover.visible && classes.rotate), "aria-hidden": true, role: "img", width: 18, height: 18 })))),
        helpMessage && (React.createElement(FormHelpMessage, { className: classes.message, color: color, rootElementId: uniqueId, describedById: helpFor(uniqueId) }, helpMessage)),
        hasError && (React.createElement(FormErrorMessage, { className: classes.message, color: color, rootElementId: uniqueId, describedById: errorFor(uniqueId) }, errorMessage)),
        React.createElement(Portal, null,
            React.createElement(FocusLock, null,
                React.createElement(ReakitPopover, __assign({ "aria-label": label || ariaLabel || popoverAriaLabel, className: classes.popover }, popover, { style: { width: width }, as: motion.div, animate: popover.visible ? 'open' : 'closed', variants: shouldReduceMotion ? popoverVariantsReduced : popoverVariants }),
                    React.createElement(motion.ul, { className: classes.ul, role: "listbox", variants: shouldReduceMotion
                            ? listMotionVariantsReduced
                            : listMotionVariants }, popover.visible &&
                        React.Children.map(children, function (child) {
                            var _a;
                            if (!React.isValidElement(child)) {
                                return null;
                            }
                            if (isHeadingElement(child)) {
                                return child;
                            }
                            var option = child;
                            return (React.createElement(RoverOption, { rover: rover, value: value, option: option, handleOptionSelect: handleOptionSelected, variants: shouldReduceMotion
                                    ? listItemMotionVariantsReduced
                                    : listItemMotionVariants, disabled: (_a = child === null || child === void 0 ? void 0 : child.props) === null || _a === void 0 ? void 0 : _a.disabled }));
                        })))))));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvU2VsZWN0L1NlbGVjdC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUN4QixPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLFNBQVMsTUFBTSxrQkFBa0IsQ0FBQztBQUN6QyxPQUFPLEVBQ0wsT0FBTyxJQUFJLGFBQWEsRUFDeEIsaUJBQWlCLEVBQ2pCLGVBQWUsR0FDaEIsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QixPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNuRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBRTFDLE9BQU8sRUFFTCxnQkFBZ0IsRUFDaEIsUUFBUSxFQUNSLGdCQUFnQixFQUNoQixlQUFlLEVBQ2YsT0FBTyxHQUNSLE1BQU0sbUJBQW1CLENBQUM7QUFDM0IsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDeEQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUUvQixPQUFPLEVBQUUsTUFBTSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3pELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDNUMsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUM3QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDNUQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDdkUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFlBQVksQ0FBQztBQUVyQyxN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Q0FBQyxDQUFDLHNCQUFzQixFQUU1QixRQUFRLFFBQUUsS0FBSyxhQUFMLEtBQUssdUJBQUwsS0FBSyxDQUFFLEtBQUssMENBQUUsUUFBUSxHQUNoQyxDQUNILENBQUM7d0JBQ0osQ0FBQyxDQUFDLENBQ00sQ0FDRSxDQUNOLENBQ0wsQ0FDTCxDQUNQLENBQUM7QUFDSixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2xzeCBmcm9tICdjbHN4JztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBGb2N1c0xvY2sgZnJvbSAncmVhY3QtZm9jdXMtbG9jayc7XG5pbXBvcnQge1xuICBQb3BvdmVyIGFzIFJlYWtpdFBvcG92ZXIsXG4gIFBvcG92ZXJEaXNjbG9zdXJlLFxuICB1c2VQb3BvdmVyU3RhdGUsXG59IGZyb20gJ3JlYWtpdC9Qb3BvdmVyJztcbmltcG9ydCB7IFBvcnRhbCB9IGZyb20gJ3JlYWtpdC9Qb3J0YWwnO1xuaW1wb3J0IHsgQ2hldnJvbkRvd24gfSBmcm9tICdAbGlmZW9taWMvY2hyb21pY29ucyc7XG5pbXBvcnQgeyBtYWtlU3R5bGVzIH0gZnJvbSAnLi4vLi4vc3R5bGVzJztcbmltcG9ydCB7IEdldENsYXNzZXMgfSBmcm9tICcuLi8uLi90eXBlVXRpbHMnO1xuaW1wb3J0IHtcbiAgQmFzZUZvcm1FbGVtZW50LFxuICBidWlsZERlc2NyaWJlZEJ5LFxuICBlcnJvckZvcixcbiAgRm9ybUVycm9yTWVzc2FnZSxcbiAgRm9ybUhlbHBNZXNzYWdlLFxuICBoZWxwRm9yLFxufSBmcm9tICcuLi9fcHJpdmF0ZS9mb3Jtcyc7XG5pbXBvcnQgeyBnZW5lcmF0ZVVuaXF1ZUlkIH0gZnJvbSAnLi4vX3ByaXZhdGUvVW5pcXVlSWQnO1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uL1RleHQnO1xuaW1wb3J0IHsgU2VsZWN0T3B0aW9uUHJvcHMgfSBmcm9tICcuL1NlbGVjdE9wdGlvbic7XG5pbXBvcnQgeyBtb3Rpb24sIHVzZVJlZHVjZWRNb3Rpb24gfSBmcm9tICdmcmFtZXItbW90aW9uJztcbmltcG9ydCB7IFJvdmVyT3B0aW9uIH0gZnJvbSAnLi9Sb3Zlck9wdGlvbic7XG5pbXBvcnQgeyB1c2VSb3ZlclN0YXRlIH0gZnJvbSAncmVha2l0L1JvdmVyJztcbmltcG9ydCB7IGdldFRlc3RQcm9wcyB9IGZyb20gJy4uLy4uL3Rlc3RVdGlscy9nZXRUZXN0UHJvcHMnO1xuaW1wb3J0IHsgc2NyZWVucmVhZGVyT25seVN0eWxlcyB9IGZyb20gJy4uLy4uL3N0eWxlcy9zY3JlZW5yZWFkZXJPbmx5JztcbmltcG9ydCB7IFRvb2x0aXAgfSBmcm9tICcuLi9Ub29sdGlwJztcblxuZXhwb3J0IGNvbnN0IHRlc3RJZHMgPSB7XG4gIHBsYWNlaG9sZGVyVGV4dDogJ3NlbGVjdC1wbGFjZWhvbGRlclRleHQnLFxufTtcblxuZXhwb3J0IGNvbnN0IFNlbGVjdFN0eWxlc0tleSA9ICdDaHJvbWFTZWxlY3QnO1xuXG5leHBvcnQgY29uc3QgdXNlU3R5bGVzID0gbWFrZVN0eWxlcyhcbiAgKHRoZW1lKSA9PiAoe1xuICAgIHJvb3Q6IHt9LFxuICAgIHBvcG92ZXI6IHtcbiAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGVtZS5weFRvUmVtKDEwKSxcbiAgICAgIGJveFNoYWRvdzogdGhlbWUuYm94U2hhZG93cy5wb3BvdmVyLFxuICAgICAgbWluV2lkdGg6IHRoZW1lLnB4VG9SZW0oMjI0KSxcbiAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgIHpJbmRleDogMTMwMCwgLy8gSGFzIHRvIGdvIGFib3ZlIHRoZSBNb2RhbCB6LWluZGV4XG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmJsYWNrWzgwMF0sXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBmb250U2l6ZTogdGhlbWUucHhUb1JlbSgxNCksXG4gICAgICBmb250V2VpZ2h0OiB0aGVtZS50eXBvZ3JhcGh5LmZvbnRXZWlnaHRCb2xkLFxuICAgICAgbWFyZ2luQm90dG9tOiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgJyY6ZW1wdHknOiB7XG4gICAgICAgIG1hcmdpbkJvdHRvbTogdGhlbWUuc3BhY2luZygwKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsYWJlbFNlY29uZGFyeToge1xuICAgICAgZm9udFNpemU6IHRoZW1lLnB4VG9SZW0oMTEpLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBtYXJnaW46IHRoZW1lLnNwYWNpbmcoMCwgMC43NSksXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS50ZXh0LmhpbnQsXG4gICAgfSxcbiAgICBsYWJlbEludmVyc2U6IHtcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgICcmJGxhYmVsU2Vjb25kYXJ5Jzoge1xuICAgICAgICBvcGFjaXR5OiAwLjksXG4gICAgICB9LFxuICAgIH0sXG4gICAgbGFiZWxJY29uOiB7XG4gICAgICBtYXJnaW5MZWZ0OiB0aGVtZS5zcGFjaW5nKDAuNzUpLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgIH0sXG4gICAgbGFiZWxJY29uSW52ZXJzZToge1xuICAgICAgbWl4QmxlbmRNb2RlOiAnc2NyZWVuJyxcbiAgICB9LFxuICAgIHRvb2x0aXBDb250YWluZXI6IHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICB9LFxuICAgIGJ1dHRvbjoge1xuICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDEzMiwgMTM3LCAxNjYsIDAuMTUpJyxcbiAgICAgIGJvcmRlcjogJ3NvbGlkIDFweCB0cmFuc3BhcmVudCcsXG4gICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnB4VG9SZW0oNCksXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS50ZXh0LnByaW1hcnksXG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICBmb250RmFtaWx5OiB0aGVtZS50eXBvZ3JhcGh5LmZvbnRGYW1pbHksXG4gICAgICBmb250U2l6ZTogdGhlbWUucHhUb1JlbSgxNCksXG4gICAgICBtYXhIZWlnaHQ6IHRoZW1lLnB4VG9SZW0oODQpLFxuICAgICAgbWluSGVpZ2h0OiB0aGVtZS5weFRvUmVtKDM1KSxcbiAgICAgIG1hcmdpbjogMCxcbiAgICAgIG1pbldpZHRoOiB0aGVtZS5weFRvUmVtKDE3NSksXG4gICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBwYWRkaW5nOiB0aGVtZS5zcGFjaW5nKDAuNSwgMy43NSwgMC41LCAxLjI1KSxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgdHJhbnNpdGlvbjogJ2JvcmRlciAwLjVzIGVhc2UnLFxuICAgICAgJyY6ZGlzYWJsZWQnOiB7XG4gICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJyxcbiAgICAgICAgb3BhY2l0eTogMC42MjUsXG4gICAgICB9LFxuICAgICAgJyY6Zm9jdXMnOiB7XG4gICAgICAgIGJveFNoYWRvdzogJzAgMCAwIDJweCByZ2JhKDAsIDE1MCwgMjI1LCAuMyknLFxuICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICB9LFxuICAgICAgJyY6Oi1tb3otZm9jdXMtaW5uZXInOiB7XG4gICAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGJ1dHRvbkludmVyc2U6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjMwLCAyMzEsIDIzNywgMC4xKScsXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgYm94U2hhZG93OiAnMCAwIDAgMnB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgLjMpJyxcbiAgICAgIH0sXG4gICAgICAnJiAkY2hpcCc6IHtcbiAgICAgICAgYmFja2dyb3VuZDogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC41KScsXG4gICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnRleHQucHJpbWFyeSxcbiAgICAgIH0sXG4gICAgICAnJiAkYnV0dG9uVGV4dCRwbGFjZWhvbGRlclRleHQnOiB7XG4gICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBidXR0b25FcnJvcjoge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyMzAsIDIzMSwgMjM3LCAwLjEpJyxcbiAgICAgIGJvcmRlcjogYDFweCBzb2xpZCAke3RoZW1lLnBhbGV0dGUuZXJyb3IubWFpbn1gLFxuICAgICAgJyY6Zm9jdXMnOiB7XG4gICAgICAgIGJvcmRlcjogYDFweCBzb2xpZCAke3RoZW1lLnBhbGV0dGUuZXJyb3IubWFpbn1gLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGJ1dHRvbkFycm93Q29udGFpbmVyOiB7XG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGZsZXhGbG93OiAnY29sdW1uJyxcbiAgICAgIG1pbkhlaWdodDogdGhlbWUucHhUb1JlbSgzMiksXG4gICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMzIpLFxuICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICByaWdodDogdGhlbWUucHhUb1JlbSgtNiksXG4gICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgICAgdG9wOiB0aGVtZS5weFRvUmVtKDEpLFxuICAgICAgd2lkdGg6ICcycmVtJyxcbiAgICB9LFxuICAgIGJ1dHRvblRleHQ6IHtcbiAgICAgIGNvbG9yOiAnaW5oZXJpdCcsXG4gICAgICBtYXJnaW5Ub3A6IHRoZW1lLnNwYWNpbmcoMC4xMjUpLFxuICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgdGV4dEFsaWduOiAnbGVmdCcsXG4gICAgICB0ZXh0T3ZlcmZsb3c6ICdlbGxpcHNpcycsXG4gICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAnJiRwbGFjZWhvbGRlclRleHQnOiB7XG4gICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnRleHQuaGludCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBwbGFjZWhvbGRlclRleHQ6IHt9LFxuICAgIGNvbWJvQm94UGxhY2Vob2xkZXI6IHtcbiAgICAgIG1hcmdpblRvcDogdGhlbWUuc3BhY2luZygwLjI1KSxcbiAgICB9LFxuICAgIGNvbWJveEJveE92ZXJmbG93OiB7XG4gICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICB9LFxuICAgIGJ1dHRvbkZ1bGxXaWR0aDoge1xuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICB9LFxuICAgIGFycm93SWNvbjoge1xuICAgICAgYWxpZ25TZWxmOiAnZmxleC1zdGFydCcsXG4gICAgICBwb3NpdGlvbjogJ3N0aWNreScsXG4gICAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMjVzIGVhc2UnLFxuICAgICAgc3Ryb2tlT3BhY2l0eTogMC42LFxuICAgICAgdG9wOiB0aGVtZS5zcGFjaW5nKDAuNSksXG4gICAgfSxcbiAgICByb3RhdGU6IHtcbiAgICAgIHRyYW5zZm9ybTogJ3JvdGF0ZSgxODBkZWcpJyxcbiAgICAgIHRvcDogdGhlbWUuc3BhY2luZygwLjM3NSksXG4gICAgfSxcbiAgICB1bDoge1xuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIGxpc3RTdHlsZTogJ25vbmUnLFxuICAgICAgbWFyZ2luOiAwLFxuICAgICAgbWF4SGVpZ2h0OiB0aGVtZS5weFRvUmVtKDMyOCksXG4gICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgIHBhZGRpbmc6IHRoZW1lLnNwYWNpbmcoMSwgMCksXG4gICAgfSxcbiAgICBvcHRpb246IHtcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgbWluSGVpZ2h0OiB0aGVtZS5weFRvUmVtKDI2KSxcbiAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgIHBhZGRpbmdMZWZ0OiB0aGVtZS5zcGFjaW5nKDIpLFxuICAgICAgcGFkZGluZ1JpZ2h0OiB0aGVtZS5zcGFjaW5nKDIpLFxuICAgICAgdHJhbnNpdGlvbjogJ2JhY2tncm91bmQtY29sb3IgMC4yNXMgZWFzZScsXG4gICAgICAnJjpob3ZlciwgJjpmb2N1cyc6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyMjIsMjQ0LDI1MiwgMC42KScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgY2hpcExpc3Q6IHtcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGZsZXhGbG93OiAnd3JhcCcsXG4gICAgICBtYXJnaW46IHRoZW1lLnNwYWNpbmcoLTAuNSwgLTAuNSwgMCksXG4gICAgfSxcbiAgICBjaGlwOiB7XG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGVtZS5weFRvUmVtKDMpLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMjIpLFxuICAgICAgZm9udFNpemU6IHRoZW1lLnB4VG9SZW0oMTIpLFxuICAgICAgbWFyZ2luOiB0aGVtZS5zcGFjaW5nKDAuNSwgMC4yNSwgMCksXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICBwYWRkaW5nTGVmdDogdGhlbWUuc3BhY2luZygxKSxcbiAgICAgIHBhZGRpbmdSaWdodDogdGhlbWUuc3BhY2luZygxKSxcbiAgICAgIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJyxcbiAgICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnLFxuICAgIH0sXG4gICAgbWVzc2FnZToge1xuICAgICAgbWFyZ2luVG9wOiB0aGVtZS5zcGFjaW5nKDAuODc1KSxcbiAgICAgIG1hcmdpbkxlZnQ6IDAsXG4gICAgfSxcbiAgICBzck9ubHk6IHtcbiAgICAgIC4uLnNjcmVlbnJlYWRlck9ubHlTdHlsZXMsXG4gICAgfSxcbiAgfSksXG4gIHsgbmFtZTogU2VsZWN0U3R5bGVzS2V5IH1cbik7XG5cbmNvbnN0IHBvcG92ZXJWYXJpYW50cyA9IHtcbiAgb3Blbjoge1xuICAgIG9wYWNpdHk6IDEsXG4gICAgb2Zmc2V0VG9wOiAtMiwgLy8gUG9wcGVyLmpzICh1bmRlcmx5aW5nIFBvcG92ZXIpIHJlcXVpcmVzIGBvZmZTZXRUb3BgIG92ZXIgYG1hcmdpblRvcGBcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMC4yNSxcbiAgICAgIGVhc2U6ICdlYXNlT3V0JyxcbiAgICB9LFxuICB9LFxuICBjbG9zZWQ6IHtcbiAgICBvcGFjaXR5OiAwLFxuICAgIG9mZnNldFRvcDogLTE4LFxuICB9LFxufTtcblxuY29uc3QgcG9wb3ZlclZhcmlhbnRzUmVkdWNlZCA9IHtcbiAgb3Blbjoge1xuICAgIG9wYWNpdHk6IDEsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZHVyYXRpb246IDAuMixcbiAgICAgIGVhc2U6ICdlYXNlT3V0JyxcbiAgICB9LFxuICB9LFxuICBjbG9zZWQ6IHtcbiAgICBvcGFjaXR5OiAwLFxuICB9LFxufTtcblxuY29uc3QgbGlzdE1vdGlvblZhcmlhbnRzID0ge1xuICBvcGVuOiB7XG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgZGVsYXlDaGlsZHJlbjogMC4wMjUsXG4gICAgICBzdGFnZ2VyQ2hpbGRyZW46IDAuMDQ1LFxuICAgICAgZHVyYXRpb246IDAuMixcbiAgICB9LFxuICB9LFxuICBjbG9zZWQ6IHt9LFxufTtcblxuY29uc3QgbGlzdE1vdGlvblZhcmlhbnRzUmVkdWNlZCA9IHtcbiAgb3Blbjoge30sXG4gIGNsb3NlZDoge30sXG59O1xuXG5jb25zdCBsaXN0SXRlbU1vdGlvblZhcmlhbnRzID0ge1xuICBvcGVuOiB7XG4gICAgeTogMCxcbiAgICBvcGFjaXR5OiAxLFxuICAgIHRyYW5zaXRpb246IHtcbiAgICAgIHk6IHsgc3RpZmZuZXNzOiAxMDAwLCB2ZWxvY2l0eTogLTEwMCB9LFxuICAgIH0sXG4gIH0sXG4gIGNsb3NlZDoge1xuICAgIHk6IC0xNixcbiAgICBvcGFjaXR5OiAwLFxuICB9LFxufTtcblxuY29uc3QgbGlzdEl0ZW1Nb3Rpb25WYXJpYW50c1JlZHVjZWQgPSB7XG4gIG9wZW46IHtcbiAgICBvcGFjaXR5OiAxLFxuICB9LFxuICBjbG9zZWQ6IHtcbiAgICBvcGFjaXR5OiAwLFxuICB9LFxufTtcblxuZXhwb3J0IHR5cGUgU2VsZWN0Q2xhc3NlcyA9IEdldENsYXNzZXM8dHlwZW9mIHVzZVN0eWxlcz47XG5cbmNvbnN0IGlzSGVhZGluZ0VsZW1lbnQgPSAoZWxlbWVudDogUmVhY3QuUmVhY3RFbGVtZW50KSA9PiB7XG4gIHJldHVybiBlbGVtZW50LnByb3BzWydkYXRhLXNlbGVjdC1yb2xlJ10gPT09ICdoZWFkaW5nJztcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0UHJvcHNcbiAgZXh0ZW5kcyBQaWNrPFxuICAgICAgQmFzZUZvcm1FbGVtZW50LFxuICAgICAgJ2NvbG9yJyB8ICdoYXNFcnJvcicgfCAnZXJyb3JNZXNzYWdlJyB8ICdoZWxwTWVzc2FnZScgfCAnbGFiZWwnXG4gICAgPixcbiAgICBQaWNrPFJlYWN0LkNvbXBvbmVudFByb3BzV2l0aG91dFJlZjwnaW5wdXQnPiwgJ2Rpc2FibGVkJz4sXG4gICAgUGljazxcbiAgICAgIFJlYWN0LkNvbXBvbmVudFByb3BzV2l0aG91dFJlZjwnc2VsZWN0Jz4sXG4gICAgICAnY2xhc3NOYW1lJyB8ICdpZCcgfCAndmFsdWUnXG4gICAgPiB7XG4gIFsnYXJpYS1sYWJlbCddPzogc3RyaW5nO1xuICBzZWNvbmRhcnlMYWJlbD86IHN0cmluZztcbiAgZnVsbFdpZHRoPzogYm9vbGVhbjtcbiAgaWNvbj86IFJlYWN0LkNvbXBvbmVudFR5cGU8UmVhY3QuU1ZHUHJvcHM8U1ZHU1ZHRWxlbWVudD4+O1xuICBvbkNoYW5nZT86ICh2YWx1ZTogc3RyaW5nLCBtZXRhOiBhbnkpID0+IHZvaWQ7XG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICBwbGFjZW1lbnQ/OlxuICAgIHwgJ3RvcC1zdGFydCdcbiAgICB8ICd0b3AnXG4gICAgfCAndG9wLWVuZCdcbiAgICB8ICdyaWdodC1zdGFydCdcbiAgICB8ICdyaWdodCdcbiAgICB8ICdyaWdodC1lbmQnXG4gICAgfCAnYm90dG9tLWVuZCdcbiAgICB8ICdib3R0b20nXG4gICAgfCAnYm90dG9tLXN0YXJ0J1xuICAgIHwgJ2xlZnQtZW5kJ1xuICAgIHwgJ2xlZnQnXG4gICAgfCAnbGVmdC1zdGFydCc7XG4gIHBvcG92ZXJBcmlhTGFiZWw/OiBzdHJpbmc7XG4gIHNlbGVjdGVkT3B0aW9uRGlzcGxheT86IChcbiAgICBvcHRpb246IFNlbGVjdE9wdGlvblByb3BzXG4gICkgPT4gc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCB8IFJlYWN0LlJlYWN0Tm9kZTtcbiAgdG9vbHRpcE1lc3NhZ2U/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBTZWxlY3Q6IFJlYWN0LkZDPFNlbGVjdFByb3BzPiA9ICh7XG4gIFsnYXJpYS1sYWJlbCddOiBhcmlhTGFiZWwsXG4gIGNoaWxkcmVuLFxuICBjbGFzc05hbWUsXG4gIGNvbG9yID0gJ2RlZmF1bHQnLFxuICBlcnJvck1lc3NhZ2UsXG4gIGZ1bGxXaWR0aCxcbiAgaGFzRXJyb3IsXG4gIGhlbHBNZXNzYWdlLFxuICBpY29uOiBJY29uLFxuICBpZCxcbiAgbGFiZWwsXG4gIHNlY29uZGFyeUxhYmVsLFxuICBvbkNoYW5nZSxcbiAgcGxhY2Vob2xkZXIsXG4gIHBsYWNlbWVudCxcbiAgcG9wb3ZlckFyaWFMYWJlbCxcbiAgc2VsZWN0ZWRPcHRpb25EaXNwbGF5LFxuICB0b29sdGlwTWVzc2FnZSxcbiAgdmFsdWUsXG4gIC4uLnJvb3RQcm9wc1xufSkgPT4ge1xuICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKHt9KTtcbiAgY29uc3QgcG9wb3ZlciA9IHVzZVBvcG92ZXJTdGF0ZSh7IHBsYWNlbWVudCB9KTtcbiAgY29uc3Qgc2hvdWxkUmVkdWNlTW90aW9uID0gdXNlUmVkdWNlZE1vdGlvbigpO1xuXG4gIGNvbnN0IGJ1dHRvblJlZiA9IFJlYWN0LnVzZVJlZjxhbnk+KCk7IC8vIFRPRE86IE5lZWQgdG8gdHlwZSB0aGlzIHByb3Blcmx5Li4uXG4gIGNvbnN0IFt3aWR0aCwgc2V0V2lkdGhdID0gUmVhY3QudXNlU3RhdGU8bnVtYmVyPig1MCk7XG5cbiAgY29uc3QgW1xuICAgIGludGVybmFsU2VsZWN0aW9uLFxuICAgIHNldEludGVybmFsU2VsZWN0aW9uLFxuICBdID0gUmVhY3QudXNlU3RhdGU8U2VsZWN0T3B0aW9uUHJvcHMgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBbdW5pcXVlSWRdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihcbiAgICAoKSA9PiBpZCB8fCBuYW1lIHx8IGdlbmVyYXRlVW5pcXVlSWQoJ3NlbGVjdC0nKVxuICApO1xuXG4gIGNvbnN0IHJvdmVyID0gdXNlUm92ZXJTdGF0ZSh7IGxvb3A6IHRydWUsIG9yaWVudGF0aW9uOiAndmVydGljYWwnIH0pO1xuXG4gIC8vIFVwZGF0ZSB0aGUgb3BlbmVkIHBvcG92ZXIgd2lkdGggYW55IHRpbWUgdGhlIGJ1dHRvbiB3aWR0aCBjaGFuZ2VzXG4gIC8vIFRPRE86IFJldmlldyB0aGUgYmVzdCB3YXkgdG8gaGFuZGxlIHRoaXMgd2l0aG91dCBicmVha2luZ1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0V2lkdGgoYnV0dG9uUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgpO1xuICB9KTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFRPRE86IE5lZWQgdG8gdHlwZSB0aGlzIHByb3Blcmx5IGFzIHdlbGwuLi5cbiAgICBjb25zdCBtYXRjaDogYW55ID0gUmVhY3QuQ2hpbGRyZW4udG9BcnJheShjaGlsZHJlbikuZmluZCgoY2hpbGQpID0+IHtcbiAgICAgIGlmICghUmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGQpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNIZWFkaW5nRWxlbWVudChjaGlsZCkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjaGlsZC5wcm9wcy52YWx1ZSA9PT0gdmFsdWU7XG4gICAgfSk7XG5cbiAgICAvLyBJZiB0aGVyZSBpcyBubyBtYXRjaCwgc2V0IGludGVybmFsU2VsZWN0aW9uIHRvIG51bGwgc28gcGxhY2Vob2xkZXIgd2lsbCBiZSBzaG93blxuICAgIHNldEludGVybmFsU2VsZWN0aW9uKG1hdGNoID8gbWF0Y2gucHJvcHMgOiBudWxsKTtcbiAgfSwgW2NoaWxkcmVuLCB2YWx1ZV0pO1xuXG4gIGNvbnN0IGhpZGVQb3BvdmVyID0gcG9wb3Zlci5oaWRlO1xuICBjb25zdCBoYW5kbGVPcHRpb25TZWxlY3RlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChvcHRpb25WYWx1ZTogc3RyaW5nLCBtZXRhOiBhbnkpID0+IHtcbiAgICAgIGhpZGVQb3BvdmVyKCk7XG4gICAgICBvbkNoYW5nZT8uKG9wdGlvblZhbHVlLCBtZXRhKTtcbiAgICB9LFxuICAgIFtoaWRlUG9wb3Zlciwgb25DaGFuZ2VdXG4gICk7XG5cbiAgaWYgKCFsYWJlbCAmJiAhYXJpYUxhYmVsICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0lmIGEgXCJsYWJlbFwiIGlzIG5vdCBwcm92aWRlZCB0byBTZWxlY3QsIHBsZWFzZSBwcm92aWRlIFwiYXJpYS1sYWJlbFwiLidcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y2xzeChjbGFzc2VzLnJvb3QsIGNsYXNzTmFtZSl9PlxuICAgICAgPGxhYmVsXG4gICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICBjbGFzc2VzLmxhYmVsLFxuICAgICAgICAgIGNvbG9yID09PSAnaW52ZXJzZScgJiYgY2xhc3Nlcy5sYWJlbEludmVyc2UsXG4gICAgICAgICAgIWxhYmVsICYmIGFyaWFMYWJlbCAmJiBjbGFzc2VzLnNyT25seVxuICAgICAgICApfVxuICAgICAgICBodG1sRm9yPXt1bmlxdWVJZH1cbiAgICAgID5cbiAgICAgICAge2xhYmVsIHx8IGFyaWFMYWJlbH1cbiAgICAgICAgeyEhSWNvbiAmJiB0b29sdGlwTWVzc2FnZSAmJiAoXG4gICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e3Rvb2x0aXBNZXNzYWdlfT5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17Y2xhc3Nlcy50b29sdGlwQ29udGFpbmVyfT5cbiAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgICAgICAgICBjbGFzc2VzLmxhYmVsSWNvbixcbiAgICAgICAgICAgICAgICAgIGNvbG9yID09PSAnaW52ZXJzZScgJiYgY2xhc3Nlcy5sYWJlbEljb25JbnZlcnNlXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICB3aWR0aD17MTZ9XG4gICAgICAgICAgICAgICAgaGVpZ2h0PXsxNn1cbiAgICAgICAgICAgICAgICByb2xlPVwiaW1nXCJcbiAgICAgICAgICAgICAgICBhcmlhLWhpZGRlblxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgKX1cbiAgICAgICAge3NlY29uZGFyeUxhYmVsID8gKFxuICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgICAgIGNsYXNzZXMubGFiZWxTZWNvbmRhcnksXG4gICAgICAgICAgICAgIGNvbG9yID09PSAnaW52ZXJzZScgJiYgY2xhc3Nlcy5sYWJlbEludmVyc2VcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3NlY29uZGFyeUxhYmVsfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKSA6IG51bGx9XG4gICAgICA8L2xhYmVsPlxuICAgICAgPFBvcG92ZXJEaXNjbG9zdXJlXG4gICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICBjbGFzc2VzLmJ1dHRvbixcbiAgICAgICAgICBoYXNFcnJvciAmJiBjbGFzc2VzLmJ1dHRvbkVycm9yLFxuICAgICAgICAgIGZ1bGxXaWR0aCAmJiBjbGFzc2VzLmJ1dHRvbkZ1bGxXaWR0aCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBbY2xhc3Nlcy5idXR0b25JbnZlcnNlXTogY29sb3IgPT09ICdpbnZlcnNlJyxcbiAgICAgICAgICB9XG4gICAgICAgICl9XG4gICAgICAgIHJlZj17YnV0dG9uUmVmfVxuICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PXtidWlsZERlc2NyaWJlZEJ5KHtcbiAgICAgICAgICBoYXNFcnJvcixcbiAgICAgICAgICBoYXNIZWxwTWVzc2FnZTogISFoZWxwTWVzc2FnZSxcbiAgICAgICAgICB1bmlxdWVJZCxcbiAgICAgICAgfSl9XG4gICAgICAgIGlkPXt1bmlxdWVJZH1cbiAgICAgICAgey4uLnBvcG92ZXJ9XG4gICAgICAgIHsuLi5yb290UHJvcHN9XG4gICAgICA+XG4gICAgICAgIDw+XG4gICAgICAgICAgeyFpbnRlcm5hbFNlbGVjdGlvbiAmJiAoXG4gICAgICAgICAgICA8VGV4dFxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goY2xhc3Nlcy5wbGFjZWhvbGRlclRleHQsIGNsYXNzZXMuYnV0dG9uVGV4dCl9XG4gICAgICAgICAgICAgIHNpemU9XCJzdWJib2R5XCJcbiAgICAgICAgICAgICAgey4uLmdldFRlc3RQcm9wcyh0ZXN0SWRzLnBsYWNlaG9sZGVyVGV4dCl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtwbGFjZWhvbGRlcn1cbiAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtpbnRlcm5hbFNlbGVjdGlvbiAmJiAhc2VsZWN0ZWRPcHRpb25EaXNwbGF5ICYmIChcbiAgICAgICAgICAgIDxUZXh0IGNsYXNzTmFtZT17Y2xhc3Nlcy5idXR0b25UZXh0fSBzaXplPVwic3ViYm9keVwiPlxuICAgICAgICAgICAgICB7aW50ZXJuYWxTZWxlY3Rpb24udGl0bGV9XG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7aW50ZXJuYWxTZWxlY3Rpb24gJiYgc2VsZWN0ZWRPcHRpb25EaXNwbGF5ICYmIChcbiAgICAgICAgICAgIDxUZXh0IGNsYXNzTmFtZT17Y2xhc3Nlcy5idXR0b25UZXh0fSBzaXplPVwic3ViYm9keVwiPlxuICAgICAgICAgICAgICB7c2VsZWN0ZWRPcHRpb25EaXNwbGF5KGludGVybmFsU2VsZWN0aW9uKX1cbiAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICApfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmJ1dHRvbkFycm93Q29udGFpbmVyfSByb2xlPVwicHJlc2VudGF0aW9uXCI+XG4gICAgICAgICAgICA8Q2hldnJvbkRvd25cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KFxuICAgICAgICAgICAgICAgIGNsYXNzZXMuYXJyb3dJY29uLFxuICAgICAgICAgICAgICAgIHBvcG92ZXIudmlzaWJsZSAmJiBjbGFzc2VzLnJvdGF0ZVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBhcmlhLWhpZGRlblxuICAgICAgICAgICAgICByb2xlPVwiaW1nXCJcbiAgICAgICAgICAgICAgd2lkdGg9ezE4fVxuICAgICAgICAgICAgICBoZWlnaHQ9ezE4fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC8+XG4gICAgICA8L1BvcG92ZXJEaXNjbG9zdXJlPlxuICAgICAge2hlbHBNZXNzYWdlICYmIChcbiAgICAgICAgPEZvcm1IZWxwTWVzc2FnZVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy5tZXNzYWdlfVxuICAgICAgICAgIGNvbG9yPXtjb2xvcn1cbiAgICAgICAgICByb290RWxlbWVudElkPXt1bmlxdWVJZH1cbiAgICAgICAgICBkZXNjcmliZWRCeUlkPXtoZWxwRm9yKHVuaXF1ZUlkKX1cbiAgICAgICAgPlxuICAgICAgICAgIHtoZWxwTWVzc2FnZX1cbiAgICAgICAgPC9Gb3JtSGVscE1lc3NhZ2U+XG4gICAgICApfVxuICAgICAge2hhc0Vycm9yICYmIChcbiAgICAgICAgPEZvcm1FcnJvck1lc3NhZ2VcbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMubWVzc2FnZX1cbiAgICAgICAgICBjb2xvcj17Y29sb3J9XG4gICAgICAgICAgcm9vdEVsZW1lbnRJZD17dW5pcXVlSWR9XG4gICAgICAgICAgZGVzY3JpYmVkQnlJZD17ZXJyb3JGb3IodW5pcXVlSWQpfVxuICAgICAgICA+XG4gICAgICAgICAge2Vycm9yTWVzc2FnZX1cbiAgICAgICAgPC9Gb3JtRXJyb3JNZXNzYWdlPlxuICAgICAgKX1cbiAgICAgIHsvKlxuICAgICAgICBBIGZldyB0aGluZ3MgaGVyZTpcblxuICAgICAgICAxKSBXZSB3YW50IHRvIGFsd2F5cyBwb3J0YWwgb3VyIHNlbGVjdCBtZW51IHJlc3VsdHMgc28gd2UgZG9uJ3RcbiAgICAgICAgICAgcnVuIGludG8gd2VpcmQgbGF5b3V0IGlzc3VlcyAocmVuZGVyaW5nIGluc2lkZSBQb3BvdmVyIG9yIE1vZGFsKVxuICAgICAgICAyKSBXZSBuZWVkIHRvIHRyYXAgZm9jdXMgaW5zaWRlIG9mIHRoZSBtZW51IHdoZW4gaXQgaXMgb3BlbiAtIDxGb2N1c0xvY2sgLz4gaGFuZGxlcyB0aGlzIGZvciB1c1xuICAgICAgICAzKSBXZSBuZWVkIGtleWJvYXJkIHN1cHBvcnQgdmlhIDxSb3ZlciAvPlxuXG4gICAgICAgIFJlZmVyZW5jZSBmb3IgIzEgJiAjMjogaHR0cHM6Ly9naXRodWIuY29tL3JlYWtpdC9yZWFraXQvaXNzdWVzLzU2NlxuICAgICAgKi99XG4gICAgICA8UG9ydGFsPlxuICAgICAgICA8Rm9jdXNMb2NrPlxuICAgICAgICAgIDxSZWFraXRQb3BvdmVyXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtsYWJlbCB8fCBhcmlhTGFiZWwgfHwgcG9wb3ZlckFyaWFMYWJlbH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy5wb3BvdmVyfVxuICAgICAgICAgICAgey4uLnBvcG92ZXJ9XG4gICAgICAgICAgICBzdHlsZT17eyB3aWR0aCB9fVxuICAgICAgICAgICAgYXM9e21vdGlvbi5kaXZ9XG4gICAgICAgICAgICBhbmltYXRlPXtwb3BvdmVyLnZpc2libGUgPyAnb3BlbicgOiAnY2xvc2VkJ31cbiAgICAgICAgICAgIHZhcmlhbnRzPXtcbiAgICAgICAgICAgICAgc2hvdWxkUmVkdWNlTW90aW9uID8gcG9wb3ZlclZhcmlhbnRzUmVkdWNlZCA6IHBvcG92ZXJWYXJpYW50c1xuICAgICAgICAgICAgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxtb3Rpb24udWxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc2VzLnVsfVxuICAgICAgICAgICAgICByb2xlPVwibGlzdGJveFwiXG4gICAgICAgICAgICAgIHZhcmlhbnRzPXtcbiAgICAgICAgICAgICAgICBzaG91bGRSZWR1Y2VNb3Rpb25cbiAgICAgICAgICAgICAgICAgID8gbGlzdE1vdGlvblZhcmlhbnRzUmVkdWNlZFxuICAgICAgICAgICAgICAgICAgOiBsaXN0TW90aW9uVmFyaWFudHNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7cG9wb3Zlci52aXNpYmxlICYmXG4gICAgICAgICAgICAgICAgUmVhY3QuQ2hpbGRyZW4ubWFwKGNoaWxkcmVuLCAoY2hpbGQpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICghUmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoaXNIZWFkaW5nRWxlbWVudChjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb246IFJlYWN0LlJlYWN0RWxlbWVudDxTZWxlY3RPcHRpb25Qcm9wcz4gPSBjaGlsZDtcblxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFJvdmVyT3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgcm92ZXI9e3JvdmVyfVxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb249e29wdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVPcHRpb25TZWxlY3Q9e2hhbmRsZU9wdGlvblNlbGVjdGVkfVxuICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnRzPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFJlZHVjZU1vdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGxpc3RJdGVtTW90aW9uVmFyaWFudHNSZWR1Y2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogbGlzdEl0ZW1Nb3Rpb25WYXJpYW50c1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17Y2hpbGQ/LnByb3BzPy5kaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L21vdGlvbi51bD5cbiAgICAgICAgICA8L1JlYWtpdFBvcG92ZXI+XG4gICAgICAgIDwvRm9jdXNMb2NrPlxuICAgICAgPC9Qb3J0YWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuIl19