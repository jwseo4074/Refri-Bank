var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
import clsx from 'clsx';
import * as React from 'react';
import FocusLock from 'react-focus-lock';
import { Popover as ReakitPopover, PopoverDisclosure, usePopoverState, } from 'reakit/Popover';
import { Portal } from 'reakit/Portal';
import { ChevronDown } from '@lifeomic/chromicons';
import { makeStyles } from '../../styles';
import { buildDescribedBy, errorFor, FormErrorMessage, FormHelpMessage, helpFor, } from '../_private/forms';
import { generateUniqueId } from '../_private/UniqueId';
import { Text } from '../Text';
import { motion, useReducedMotion } from 'framer-motion';
import { RoverOption } from './RoverOption';
import { useRoverState } from 'reakit/Rover';
import { getTestProps } from '../../testUtils/getTestProps';
import { screenreaderOnlyStyles } from '../../styles/screenreaderOnly';
import { Tooltip } from '../Tooltip';
export var testIds = {
    placeholderText: 'select-placeholderText',
};
export var SelectStylesKey = 'ChromaSelect';
export var useStyles = makeStyles(function (theme) { return ({
    root: {},
    popover: {
        background: theme.palette.common.white,
        borderRadius: theme.pxToRem(10),
        boxShadow: theme.boxShadows.popover,
        minWidth: theme.pxToRem(224),
        overflow: 'hidden',
        zIndex: 1300,
        '&:focus': {
            outline: 'none',
        },
    },
    label: {
        alignItems: 'center',
        color: theme.palette.black[800],
        display: 'flex',
        fontSize: theme.pxToRem(14),
        fontWeight: theme.typography.fontWeightBold,
        marginBottom: theme.spacing(1),
        '&:empty': {
            marginBottom: theme.spacing(0),
        },
    },
    labelSecondary: {
        fontSize: theme.pxToRem(11),
        display: 'inline-block',
        margin: theme.spacing(0, 0.75),
        color: theme.palette.text.hint,
    },
    labelInverse: {
        color: theme.palette.common.white,
        '&$labelSecondary': {
            opacity: 0.9,
        },
    },
    labelIcon: {
        marginLeft: theme.spacing(0.75),
        color: theme.palette.primary.main,
    },
    labelIconInverse: {
        mixBlendMode: 'screen',
    },
    tooltipContainer: {
        display: 'flex',
        outline: 'none',
    },
    button: {
        alignItems: 'center',
        backgroundColor: 'rgba(132, 137, 166, 0.15)',
        border: 'solid 1px transparent',
        borderRadius: theme.pxToRem(4),
        color: theme.palette.text.primary,
        cursor: 'pointer',
        display: 'block',
        fontFamily: theme.typography.fontFamily,
        fontSize: theme.pxToRem(14),
        maxHeight: theme.pxToRem(84),
        minHeight: theme.pxToRem(35),
        margin: 0,
        minWidth: theme.pxToRem(175),
        outline: 'none',
        overflow: 'hidden',
        padding: theme.spacing(0.5, 3.75, 0.5, 1.25),
        position: 'relative',
        transition: 'border 0.5s ease',
        '&:disabled': {
            cursor: 'not-allowed',
            opacity: 0.625,
        },
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(0, 150, 225, .3)',
            outline: 'none',
        },
        '&::-moz-focus-inner': {
            border: 'none',
        },
    },
    buttonInverse: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        color: theme.palette.common.white,
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(255, 255, 255, .3)',
        },
        '& $chip': {
            background: 'rgba(255, 255, 255, 0.5)',
            color: theme.palette.text.primary,
        },
        '& $buttonText$placeholderText': {
            color: theme.palette.common.white,
        },
    },
    buttonError: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        border: "1px solid ".concat(theme.palette.error.main),
        '&:focus': {
            border: "1px solid ".concat(theme.palette.error.main),
        },
    },
    buttonArrowContainer: {
        alignItems: 'center',
        display: 'flex',
        flexFlow: 'column',
        minHeight: theme.pxToRem(32),
        height: theme.pxToRem(32),
        justifyContent: 'center',
        position: 'absolute',
        right: theme.pxToRem(-6),
        textAlign: 'center',
        top: theme.pxToRem(1),
        width: '2rem',
    },
    buttonText: {
        color: 'inherit',
        marginTop: theme.spacing(0.125),
        overflow: 'hidden',
        textAlign: 'left',
        textOverflow: 'ellipsis',
        whiteSpace: 'nowrap',
        width: '100%',
        '&$placeholderText': {
            color: theme.palette.text.hint,
        },
    },
    placeholderText: {},
    comboBoxPlaceholder: {
        marginTop: theme.spacing(0.25),
    },
    comboxBoxOverflow: {
        overflowY: 'auto',
    },
    buttonFullWidth: {
        width: '100%',
    },
    arrowIcon: {
        alignSelf: 'flex-start',
        position: 'sticky',
        transition: 'transform 0.25s ease',
        strokeOpacity: 0.6,
        top: theme.spacing(0.5),
    },
    rotate: {
        transform: 'rotate(180deg)',
        top: theme.spacing(0.375),
    },
    ul: {
        display: 'block',
        listStyle: 'none',
        margin: 0,
        maxHeight: theme.pxToRem(328),
        overflowY: 'auto',
        padding: theme.spacing(1, 0),
    },
    option: {
        alignItems: 'center',
        backgroundColor: theme.palette.common.white,
        cursor: 'pointer',
        display: 'flex',
        minHeight: theme.pxToRem(26),
        outline: 'none',
        paddingLeft: theme.spacing(2),
        paddingRight: theme.spacing(2),
        transition: 'background-color 0.25s ease',
        '&:hover, &:focus': {
            backgroundColor: 'rgba(222,244,252, 0.6)',
        },
    },
    chipList: {
        display: 'flex',
        flexFlow: 'wrap',
        margin: theme.spacing(-0.5, -0.5, 0),
    },
    chip: {
        alignItems: 'center',
        background: theme.palette.primary.main,
        borderRadius: theme.pxToRem(3),
        color: theme.palette.common.white,
        display: 'inline-block',
        height: theme.pxToRem(22),
        fontSize: theme.pxToRem(12),
        margin: theme.spacing(0.5, 0.25, 0),
        overflow: 'hidden',
        paddingLeft: theme.spacing(1),
        paddingRight: theme.spacing(1),
        textOverflow: 'ellipsis',
        whiteSpace: 'nowrap',
    },
    message: {
        marginTop: theme.spacing(0.875),
        marginLeft: 0,
    },
    srOnly: __assign({}, screenreaderOnlyStyles),
}); }, { name: SelectStylesKey });
var popoverVariants = {
    open: {
        opacity: 1,
        offsetTop: -2,
        transition: {
            duration: 0.25,
            ease: 'easeOut',
        },
    },
    closed: {
        opacity: 0,
        offsetTop: -18,
    },
};
var popoverVariantsReduced = {
    open: {
        opacity: 1,
        transition: {
            duration: 0.2,
            ease: 'easeOut',
        },
    },
    closed: {
        opacity: 0,
    },
};
var listMotionVariants = {
    open: {
        transition: {
            delayChildren: 0.025,
            staggerChildren: 0.045,
            duration: 0.2,
        },
    },
    closed: {},
};
var listMotionVariantsReduced = {
    open: {},
    closed: {},
};
var listItemMotionVariants = {
    open: {
        y: 0,
        opacity: 1,
        transition: {
            y: { stiffness: 1000, velocity: -100 },
        },
    },
    closed: {
        y: -16,
        opacity: 0,
    },
};
var listItemMotionVariantsReduced = {
    open: {
        opacity: 1,
    },
    closed: {
        opacity: 0,
    },
};
var isHeadingElement = function (element) {
    return element.props['data-select-role'] === 'heading';
};
export var Select = function (_a) {
    var _b;
    var ariaLabel = _a["aria-label"], children = _a.children, className = _a.className, _c = _a.color, color = _c === void 0 ? 'default' : _c, errorMessage = _a.errorMessage, fullWidth = _a.fullWidth, hasError = _a.hasError, helpMessage = _a.helpMessage, Icon = _a.icon, id = _a.id, label = _a.label, secondaryLabel = _a.secondaryLabel, onChange = _a.onChange, placeholder = _a.placeholder, placement = _a.placement, popoverAriaLabel = _a.popoverAriaLabel, selectedOptionDisplay = _a.selectedOptionDisplay, tooltipMessage = _a.tooltipMessage, value = _a.value, rootProps = __rest(_a, ['aria-label', "children", "className", "color", "errorMessage", "fullWidth", "hasError", "helpMessage", "icon", "id", "label", "secondaryLabel", "onChange", "placeholder", "placement", "popoverAriaLabel", "selectedOptionDisplay", "tooltipMessage", "value"]);
    var classes = useStyles({});
    var popover = usePopoverState({ placement: placement });
    var shouldReduceMotion = useReducedMotion();
    var buttonRef = React.useRef(); // TODO: Need to type this properly...
    var _d = React.useState(50), width = _d[0], setWidth = _d[1];
    var _e = React.useState(null), internalSelection = _e[0], setInternalSelection = _e[1];
    var uniqueId = React.useState(function () { return id || name || generateUniqueId('select-'); })[0];
    var rover = useRoverState({ loop: true, orientation: 'vertical' });
    // Update the opened popover width any time the button width changes
    // TODO: Review the best way to handle this without breaking
    // eslint-disable-next-line react-hooks/exhaustive-deps
    React.useEffect(function () {
        setWidth(buttonRef.current.getBoundingClientRect().width);
    });
    React.useEffect(function () {
        // TODO: Need to type this properly as well...
        var match = React.Children.toArray(children).find(function (child) {
            if (!React.isValidElement(child)) {
                return null;
            }
            if (isHeadingElement(child)) {
                return null;
            }
            return child.props.value === value;
        });
        // If there is no match, set internalSelection to null so placeholder will be shown
        setInternalSelection(match ? match.props : null);
    }, [children, value]);
    var hidePopover = popover.hide;
    var handleOptionSelected = React.useCallback(function (optionValue, meta) {
        hidePopover();
        onChange === null || onChange === void 0 ? void 0 : onChange(optionValue, meta);
    }, [hidePopover, onChange]);
    if (!label && !ariaLabel && process.env.NODE_ENV === 'development') {
        throw new Error('If a "label" is not provided to Select, please provide "aria-label".');
    }
    return (React.createElement("div", { className: clsx(classes.root, className) },
        React.createElement("label", { "aria-hidden": "true", className: clsx(classes.label, color === 'inverse' && classes.labelInverse, !label && ariaLabel && classes.srOnly), htmlFor: uniqueId },
            label || ariaLabel,
            !!Icon && tooltipMessage && (React.createElement(Tooltip, { title: tooltipMessage },
                React.createElement("span", { className: classes.tooltipContainer },
                    React.createElement(Icon, { className: clsx(classes.labelIcon, color === 'inverse' && classes.labelIconInverse), width: 16, height: 16, role: "img", "aria-hidden": true })))),
            secondaryLabel ? (React.createElement("span", { className: clsx(classes.labelSecondary, color === 'inverse' && classes.labelInverse) }, secondaryLabel)) : null),
        React.createElement(PopoverDisclosure, __assign({ className: clsx(classes.button, hasError && classes.buttonError, fullWidth && classes.buttonFullWidth, (_b = {},
                _b[classes.buttonInverse] = color === 'inverse',
                _b)), ref: buttonRef, "aria-describedby": buildDescribedBy({
                hasError: hasError,
                hasHelpMessage: !!helpMessage,
                uniqueId: uniqueId,
            }), id: uniqueId }, popover, rootProps),
            React.createElement(React.Fragment, null,
                !internalSelection && (React.createElement(Text, __assign({ className: clsx(classes.placeholderText, classes.buttonText), size: "subbody" }, getTestProps(testIds.placeholderText)), placeholder)),
                internalSelection && !selectedOptionDisplay && (React.createElement(Text, { className: classes.buttonText, size: "subbody" }, internalSelection.title)),
                internalSelection && selectedOptionDisplay && (React.createElement(Text, { className: classes.buttonText, size: "subbody" }, selectedOptionDisplay(internalSelection))),
                React.createElement("div", { className: classes.buttonArrowContainer, role: "presentation" },
                    React.createElement(ChevronDown, { className: clsx(classes.arrowIcon, popover.visible && classes.rotate), "aria-hidden": true, role: "img", width: 18, height: 18 })))),
        helpMessage && (React.createElement(FormHelpMessage, { className: classes.message, color: color, rootElementId: uniqueId, describedById: helpFor(uniqueId) }, helpMessage)),
        hasError && (React.createElement(FormErrorMessage, { className: classes.message, color: color, rootElementId: uniqueId, describedById: errorFor(uniqueId) }, errorMessage)),
        React.createElement(Portal, null,
            React.createElement(FocusLock, null,
                React.createElement(ReakitPopover, __assign({ "aria-label": label || ariaLabel || popoverAriaLabel, className: classes.popover }, popover, { style: { width: width }, as: motion.div, animate: popover.visible ? 'open' : 'closed', variants: shouldReduceMotion ? popoverVariantsReduced : popoverVariants }),
                    React.createElement(motion.ul, { className: classes.ul, role: "listbox", variants: shouldReduceMotion
                            ? listMotionVariantsReduced
                            : listMotionVariants }, popover.visible &&
                        React.Children.map(children, function (child) {
                            var _a;
                            if (!React.isValidElement(child)) {
                                return null;
                            }
                            if (isHeadingElement(child)) {
                                return child;
                            }
                            var option = child;
                            return (React.createElement(RoverOption, { rover: rover, value: value, option: option, handleOptionSelect: handleOptionSelected, variants: shouldReduceMotion
                                    ? listItemMotionVariantsReduced
                                    : listItemMotionVariants, disabled: (_a = child === null || child === void 0 ? void 0 : child.props) === null || _a === void 0 ? void 0 : _a.disabled }));
                        })))))));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvU2VsZWN0L1NlbGVjdC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUN4QixPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLFNBQVMsTUFBTSxrQkFBa0IsQ0FBQztBQUN6QyxPQUFPLEVBQ0wsT0FBTyxJQUFJLGFBQWEsRUFDeEIsaUJBQWlCLEVBQ2pCLGVBQWUsR0FDaEIsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QixPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNuRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBRTFDLE9BQU8sRUFFTCxnQkFBZ0IsRUFDaEIsUUFBUSxFQUNSLGdCQUFnQixFQUNoQixlQUFlLEVBQ2YsT0FBTyxHQUNSLE1BQU0sbUJBQW1CLENBQUM7QUFDM0IsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDeEQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUUvQixPQUFPLEVBQUUsTUFBTSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3pELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDNUMsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUM3QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDNUQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDdkUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFlBQVksQ0FBQztBQUVyQyxN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Q0FBQyxLQUFLLENBQUMsRUFBRTtnQ0FDaEMsT0FBTyxJQUFJLENBQUM7NkJBQ2I7NEJBRUQsSUFBSSxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsRUFBRTtnQ0FDM0IsT0FBTyxLQUFLLENBQUM7NkJBQ2Q7NEJBRUQsSUFBTSxNQUFNLEdBQTBDLEtBQUssQ0FBQzs0QkFFNUQsT0FBTyxDQUNMLG9CQUFDLFdBQVcsSUFDVixLQUFLLEVBQUUsS0FBSyxFQUNaLEtBQUssRUFBRSxLQUFLLEVBQ1osTUFBTSxFQUFFLE1BQU0sRUFDZCxrQkFBa0IsRUFBRSxvQkFBb0IsRUFDeEMsUUFBUSxFQUNOLGtCQUFrQjtvQ0FDaEIsQ0FBQyxDQUFDLDZCQUE2QjtvQ0FDL0IsQ0FBQyxDQUFDLHNCQUFzQixFQUU1QixRQUFRLEVBQUUsTUFBQSxLQUFLLGFBQUwsS0FBSyx1QkFBTCxLQUFLLENBQUUsS0FBSywwQ0FBRSxRQUFRLEdBQ2hDLENBQ0gsQ0FBQzt3QkFDSixDQUFDLENBQUMsQ0FDTSxDQUNFLENBQ04sQ0FDTCxDQUNMLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjbHN4IGZyb20gJ2Nsc3gnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEZvY3VzTG9jayBmcm9tICdyZWFjdC1mb2N1cy1sb2NrJztcbmltcG9ydCB7XG4gIFBvcG92ZXIgYXMgUmVha2l0UG9wb3ZlcixcbiAgUG9wb3ZlckRpc2Nsb3N1cmUsXG4gIHVzZVBvcG92ZXJTdGF0ZSxcbn0gZnJvbSAncmVha2l0L1BvcG92ZXInO1xuaW1wb3J0IHsgUG9ydGFsIH0gZnJvbSAncmVha2l0L1BvcnRhbCc7XG5pbXBvcnQgeyBDaGV2cm9uRG93biB9IGZyb20gJ0BsaWZlb21pYy9jaHJvbWljb25zJztcbmltcG9ydCB7IG1ha2VTdHlsZXMgfSBmcm9tICcuLi8uLi9zdHlsZXMnO1xuaW1wb3J0IHsgR2V0Q2xhc3NlcyB9IGZyb20gJy4uLy4uL3R5cGVVdGlscyc7XG5pbXBvcnQge1xuICBCYXNlRm9ybUVsZW1lbnQsXG4gIGJ1aWxkRGVzY3JpYmVkQnksXG4gIGVycm9yRm9yLFxuICBGb3JtRXJyb3JNZXNzYWdlLFxuICBGb3JtSGVscE1lc3NhZ2UsXG4gIGhlbHBGb3IsXG59IGZyb20gJy4uL19wcml2YXRlL2Zvcm1zJztcbmltcG9ydCB7IGdlbmVyYXRlVW5pcXVlSWQgfSBmcm9tICcuLi9fcHJpdmF0ZS9VbmlxdWVJZCc7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vVGV4dCc7XG5pbXBvcnQgeyBTZWxlY3RPcHRpb25Qcm9wcyB9IGZyb20gJy4vU2VsZWN0T3B0aW9uJztcbmltcG9ydCB7IG1vdGlvbiwgdXNlUmVkdWNlZE1vdGlvbiB9IGZyb20gJ2ZyYW1lci1tb3Rpb24nO1xuaW1wb3J0IHsgUm92ZXJPcHRpb24gfSBmcm9tICcuL1JvdmVyT3B0aW9uJztcbmltcG9ydCB7IHVzZVJvdmVyU3RhdGUgfSBmcm9tICdyZWFraXQvUm92ZXInO1xuaW1wb3J0IHsgZ2V0VGVzdFByb3BzIH0gZnJvbSAnLi4vLi4vdGVzdFV0aWxzL2dldFRlc3RQcm9wcyc7XG5pbXBvcnQgeyBzY3JlZW5yZWFkZXJPbmx5U3R5bGVzIH0gZnJvbSAnLi4vLi4vc3R5bGVzL3NjcmVlbnJlYWRlck9ubHknO1xuaW1wb3J0IHsgVG9vbHRpcCB9IGZyb20gJy4uL1Rvb2x0aXAnO1xuXG5leHBvcnQgY29uc3QgdGVzdElkcyA9IHtcbiAgcGxhY2Vob2xkZXJUZXh0OiAnc2VsZWN0LXBsYWNlaG9sZGVyVGV4dCcsXG59O1xuXG5leHBvcnQgY29uc3QgU2VsZWN0U3R5bGVzS2V5ID0gJ0Nocm9tYVNlbGVjdCc7XG5cbmV4cG9ydCBjb25zdCB1c2VTdHlsZXMgPSBtYWtlU3R5bGVzKFxuICAodGhlbWUpID0+ICh7XG4gICAgcm9vdDoge30sXG4gICAgcG9wb3Zlcjoge1xuICAgICAgYmFja2dyb3VuZDogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnB4VG9SZW0oMTApLFxuICAgICAgYm94U2hhZG93OiB0aGVtZS5ib3hTaGFkb3dzLnBvcG92ZXIsXG4gICAgICBtaW5XaWR0aDogdGhlbWUucHhUb1JlbSgyMjQpLFxuICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgekluZGV4OiAxMzAwLCAvLyBIYXMgdG8gZ28gYWJvdmUgdGhlIE1vZGFsIHotaW5kZXhcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbGFiZWw6IHtcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuYmxhY2tbODAwXSxcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGZvbnRTaXplOiB0aGVtZS5weFRvUmVtKDE0KSxcbiAgICAgIGZvbnRXZWlnaHQ6IHRoZW1lLnR5cG9ncmFwaHkuZm9udFdlaWdodEJvbGQsXG4gICAgICBtYXJnaW5Cb3R0b206IHRoZW1lLnNwYWNpbmcoMSksXG4gICAgICAnJjplbXB0eSc6IHtcbiAgICAgICAgbWFyZ2luQm90dG9tOiB0aGVtZS5zcGFjaW5nKDApLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGxhYmVsU2Vjb25kYXJ5OiB7XG4gICAgICBmb250U2l6ZTogdGhlbWUucHhUb1JlbSgxMSksXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIG1hcmdpbjogdGhlbWUuc3BhY2luZygwLCAwLjc1KSxcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnRleHQuaGludCxcbiAgICB9LFxuICAgIGxhYmVsSW52ZXJzZToge1xuICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgJyYkbGFiZWxTZWNvbmRhcnknOiB7XG4gICAgICAgIG9wYWNpdHk6IDAuOSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsYWJlbEljb246IHtcbiAgICAgIG1hcmdpbkxlZnQ6IHRoZW1lLnNwYWNpbmcoMC43NSksXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5wcmltYXJ5Lm1haW4sXG4gICAgfSxcbiAgICBsYWJlbEljb25JbnZlcnNlOiB7XG4gICAgICBtaXhCbGVuZE1vZGU6ICdzY3JlZW4nLFxuICAgIH0sXG4gICAgdG9vbHRpcENvbnRhaW5lcjoge1xuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgIH0sXG4gICAgYnV0dG9uOiB7XG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMTMyLCAxMzcsIDE2NiwgMC4xNSknLFxuICAgICAgYm9yZGVyOiAnc29saWQgMXB4IHRyYW5zcGFyZW50JyxcbiAgICAgIGJvcmRlclJhZGl1czogdGhlbWUucHhUb1JlbSg0KSxcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnRleHQucHJpbWFyeSxcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIGZvbnRGYW1pbHk6IHRoZW1lLnR5cG9ncmFwaHkuZm9udEZhbWlseSxcbiAgICAgIGZvbnRTaXplOiB0aGVtZS5weFRvUmVtKDE0KSxcbiAgICAgIG1heEhlaWdodDogdGhlbWUucHhUb1JlbSg4NCksXG4gICAgICBtaW5IZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMzUpLFxuICAgICAgbWFyZ2luOiAwLFxuICAgICAgbWluV2lkdGg6IHRoZW1lLnB4VG9SZW0oMTc1KSxcbiAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgIHBhZGRpbmc6IHRoZW1lLnNwYWNpbmcoMC41LCAzLjc1LCAwLjUsIDEuMjUpLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB0cmFuc2l0aW9uOiAnYm9yZGVyIDAuNXMgZWFzZScsXG4gICAgICAnJjpkaXNhYmxlZCc6IHtcbiAgICAgICAgY3Vyc29yOiAnbm90LWFsbG93ZWQnLFxuICAgICAgICBvcGFjaXR5OiAwLjYyNSxcbiAgICAgIH0sXG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgYm94U2hhZG93OiAnMCAwIDAgMnB4IHJnYmEoMCwgMTUwLCAyMjUsIC4zKScsXG4gICAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgIH0sXG4gICAgICAnJjo6LW1vei1mb2N1cy1pbm5lcic6IHtcbiAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgYnV0dG9uSW52ZXJzZToge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyMzAsIDIzMSwgMjM3LCAwLjEpJyxcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBib3hTaGFkb3c6ICcwIDAgMCAycHggcmdiYSgyNTUsIDI1NSwgMjU1LCAuMyknLFxuICAgICAgfSxcbiAgICAgICcmICRjaGlwJzoge1xuICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpJyxcbiAgICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUudGV4dC5wcmltYXJ5LFxuICAgICAgfSxcbiAgICAgICcmICRidXR0b25UZXh0JHBsYWNlaG9sZGVyVGV4dCc6IHtcbiAgICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGJ1dHRvbkVycm9yOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDIzMCwgMjMxLCAyMzcsIDAuMSknLFxuICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5lcnJvci5tYWlufWAsXG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5lcnJvci5tYWlufWAsXG4gICAgICB9LFxuICAgIH0sXG4gICAgYnV0dG9uQXJyb3dDb250YWluZXI6IHtcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgZmxleEZsb3c6ICdjb2x1bW4nLFxuICAgICAgbWluSGVpZ2h0OiB0aGVtZS5weFRvUmVtKDMyKSxcbiAgICAgIGhlaWdodDogdGhlbWUucHhUb1JlbSgzMiksXG4gICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIHJpZ2h0OiB0aGVtZS5weFRvUmVtKC02KSxcbiAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgICB0b3A6IHRoZW1lLnB4VG9SZW0oMSksXG4gICAgICB3aWR0aDogJzJyZW0nLFxuICAgIH0sXG4gICAgYnV0dG9uVGV4dDoge1xuICAgICAgY29sb3I6ICdpbmhlcml0JyxcbiAgICAgIG1hcmdpblRvcDogdGhlbWUuc3BhY2luZygwLjEyNSksXG4gICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICB0ZXh0QWxpZ246ICdsZWZ0JyxcbiAgICAgIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJyxcbiAgICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnLFxuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICcmJHBsYWNlaG9sZGVyVGV4dCc6IHtcbiAgICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUudGV4dC5oaW50LFxuICAgICAgfSxcbiAgICB9LFxuICAgIHBsYWNlaG9sZGVyVGV4dDoge30sXG4gICAgY29tYm9Cb3hQbGFjZWhvbGRlcjoge1xuICAgICAgbWFyZ2luVG9wOiB0aGVtZS5zcGFjaW5nKDAuMjUpLFxuICAgIH0sXG4gICAgY29tYm94Qm94T3ZlcmZsb3c6IHtcbiAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxuICAgIH0sXG4gICAgYnV0dG9uRnVsbFdpZHRoOiB7XG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgIH0sXG4gICAgYXJyb3dJY29uOiB7XG4gICAgICBhbGlnblNlbGY6ICdmbGV4LXN0YXJ0JyxcbiAgICAgIHBvc2l0aW9uOiAnc3RpY2t5JyxcbiAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4yNXMgZWFzZScsXG4gICAgICBzdHJva2VPcGFjaXR5OiAwLjYsXG4gICAgICB0b3A6IHRoZW1lLnNwYWNpbmcoMC41KSxcbiAgICB9LFxuICAgIHJvdGF0ZToge1xuICAgICAgdHJhbnNmb3JtOiAncm90YXRlKDE4MGRlZyknLFxuICAgICAgdG9wOiB0aGVtZS5zcGFjaW5nKDAuMzc1KSxcbiAgICB9LFxuICAgIHVsOiB7XG4gICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgbGlzdFN0eWxlOiAnbm9uZScsXG4gICAgICBtYXJnaW46IDAsXG4gICAgICBtYXhIZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMzI4KSxcbiAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxuICAgICAgcGFkZGluZzogdGhlbWUuc3BhY2luZygxLCAwKSxcbiAgICB9LFxuICAgIG9wdGlvbjoge1xuICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBtaW5IZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMjYpLFxuICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgcGFkZGluZ0xlZnQ6IHRoZW1lLnNwYWNpbmcoMiksXG4gICAgICBwYWRkaW5nUmlnaHQ6IHRoZW1lLnNwYWNpbmcoMiksXG4gICAgICB0cmFuc2l0aW9uOiAnYmFja2dyb3VuZC1jb2xvciAwLjI1cyBlYXNlJyxcbiAgICAgICcmOmhvdmVyLCAmOmZvY3VzJzoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDIyMiwyNDQsMjUyLCAwLjYpJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBjaGlwTGlzdDoge1xuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgZmxleEZsb3c6ICd3cmFwJyxcbiAgICAgIG1hcmdpbjogdGhlbWUuc3BhY2luZygtMC41LCAtMC41LCAwKSxcbiAgICB9LFxuICAgIGNoaXA6IHtcbiAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgYmFja2dyb3VuZDogdGhlbWUucGFsZXR0ZS5wcmltYXJ5Lm1haW4sXG4gICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnB4VG9SZW0oMyksXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIGhlaWdodDogdGhlbWUucHhUb1JlbSgyMiksXG4gICAgICBmb250U2l6ZTogdGhlbWUucHhUb1JlbSgxMiksXG4gICAgICBtYXJnaW46IHRoZW1lLnNwYWNpbmcoMC41LCAwLjI1LCAwKSxcbiAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgIHBhZGRpbmdMZWZ0OiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgcGFkZGluZ1JpZ2h0OiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgICAgdGV4dE92ZXJmbG93OiAnZWxsaXBzaXMnLFxuICAgICAgd2hpdGVTcGFjZTogJ25vd3JhcCcsXG4gICAgfSxcbiAgICBtZXNzYWdlOiB7XG4gICAgICBtYXJnaW5Ub3A6IHRoZW1lLnNwYWNpbmcoMC44NzUpLFxuICAgICAgbWFyZ2luTGVmdDogMCxcbiAgICB9LFxuICAgIHNyT25seToge1xuICAgICAgLi4uc2NyZWVucmVhZGVyT25seVN0eWxlcyxcbiAgICB9LFxuICB9KSxcbiAgeyBuYW1lOiBTZWxlY3RTdHlsZXNLZXkgfVxuKTtcblxuY29uc3QgcG9wb3ZlclZhcmlhbnRzID0ge1xuICBvcGVuOiB7XG4gICAgb3BhY2l0eTogMSxcbiAgICBvZmZzZXRUb3A6IC0yLCAvLyBQb3BwZXIuanMgKHVuZGVybHlpbmcgUG9wb3ZlcikgcmVxdWlyZXMgYG9mZlNldFRvcGAgb3ZlciBgbWFyZ2luVG9wYFxuICAgIHRyYW5zaXRpb246IHtcbiAgICAgIGR1cmF0aW9uOiAwLjI1LFxuICAgICAgZWFzZTogJ2Vhc2VPdXQnLFxuICAgIH0sXG4gIH0sXG4gIGNsb3NlZDoge1xuICAgIG9wYWNpdHk6IDAsXG4gICAgb2Zmc2V0VG9wOiAtMTgsXG4gIH0sXG59O1xuXG5jb25zdCBwb3BvdmVyVmFyaWFudHNSZWR1Y2VkID0ge1xuICBvcGVuOiB7XG4gICAgb3BhY2l0eTogMSxcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkdXJhdGlvbjogMC4yLFxuICAgICAgZWFzZTogJ2Vhc2VPdXQnLFxuICAgIH0sXG4gIH0sXG4gIGNsb3NlZDoge1xuICAgIG9wYWNpdHk6IDAsXG4gIH0sXG59O1xuXG5jb25zdCBsaXN0TW90aW9uVmFyaWFudHMgPSB7XG4gIG9wZW46IHtcbiAgICB0cmFuc2l0aW9uOiB7XG4gICAgICBkZWxheUNoaWxkcmVuOiAwLjAyNSxcbiAgICAgIHN0YWdnZXJDaGlsZHJlbjogMC4wNDUsXG4gICAgICBkdXJhdGlvbjogMC4yLFxuICAgIH0sXG4gIH0sXG4gIGNsb3NlZDoge30sXG59O1xuXG5jb25zdCBsaXN0TW90aW9uVmFyaWFudHNSZWR1Y2VkID0ge1xuICBvcGVuOiB7fSxcbiAgY2xvc2VkOiB7fSxcbn07XG5cbmNvbnN0IGxpc3RJdGVtTW90aW9uVmFyaWFudHMgPSB7XG4gIG9wZW46IHtcbiAgICB5OiAwLFxuICAgIG9wYWNpdHk6IDEsXG4gICAgdHJhbnNpdGlvbjoge1xuICAgICAgeTogeyBzdGlmZm5lc3M6IDEwMDAsIHZlbG9jaXR5OiAtMTAwIH0sXG4gICAgfSxcbiAgfSxcbiAgY2xvc2VkOiB7XG4gICAgeTogLTE2LFxuICAgIG9wYWNpdHk6IDAsXG4gIH0sXG59O1xuXG5jb25zdCBsaXN0SXRlbU1vdGlvblZhcmlhbnRzUmVkdWNlZCA9IHtcbiAgb3Blbjoge1xuICAgIG9wYWNpdHk6IDEsXG4gIH0sXG4gIGNsb3NlZDoge1xuICAgIG9wYWNpdHk6IDAsXG4gIH0sXG59O1xuXG5leHBvcnQgdHlwZSBTZWxlY3RDbGFzc2VzID0gR2V0Q2xhc3Nlczx0eXBlb2YgdXNlU3R5bGVzPjtcblxuY29uc3QgaXNIZWFkaW5nRWxlbWVudCA9IChlbGVtZW50OiBSZWFjdC5SZWFjdEVsZW1lbnQpID0+IHtcbiAgcmV0dXJuIGVsZW1lbnQucHJvcHNbJ2RhdGEtc2VsZWN0LXJvbGUnXSA9PT0gJ2hlYWRpbmcnO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBTZWxlY3RQcm9wc1xuICBleHRlbmRzIFBpY2s8XG4gICAgICBCYXNlRm9ybUVsZW1lbnQsXG4gICAgICAnY29sb3InIHwgJ2hhc0Vycm9yJyB8ICdlcnJvck1lc3NhZ2UnIHwgJ2hlbHBNZXNzYWdlJyB8ICdsYWJlbCdcbiAgICA+LFxuICAgIFBpY2s8UmVhY3QuQ29tcG9uZW50UHJvcHNXaXRob3V0UmVmPCdpbnB1dCc+LCAnZGlzYWJsZWQnPixcbiAgICBQaWNrPFxuICAgICAgUmVhY3QuQ29tcG9uZW50UHJvcHNXaXRob3V0UmVmPCdzZWxlY3QnPixcbiAgICAgICdjbGFzc05hbWUnIHwgJ2lkJyB8ICd2YWx1ZSdcbiAgICA+IHtcbiAgWydhcmlhLWxhYmVsJ10/OiBzdHJpbmc7XG4gIGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlO1xuICBzZWNvbmRhcnlMYWJlbD86IHN0cmluZztcbiAgZnVsbFdpZHRoPzogYm9vbGVhbjtcbiAgaWNvbj86IFJlYWN0LkNvbXBvbmVudFR5cGU8UmVhY3QuU1ZHUHJvcHM8U1ZHU1ZHRWxlbWVudD4+O1xuICBvbkNoYW5nZT86ICh2YWx1ZTogc3RyaW5nLCBtZXRhOiBhbnkpID0+IHZvaWQ7XG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICBwbGFjZW1lbnQ/OlxuICAgIHwgJ3RvcC1zdGFydCdcbiAgICB8ICd0b3AnXG4gICAgfCAndG9wLWVuZCdcbiAgICB8ICdyaWdodC1zdGFydCdcbiAgICB8ICdyaWdodCdcbiAgICB8ICdyaWdodC1lbmQnXG4gICAgfCAnYm90dG9tLWVuZCdcbiAgICB8ICdib3R0b20nXG4gICAgfCAnYm90dG9tLXN0YXJ0J1xuICAgIHwgJ2xlZnQtZW5kJ1xuICAgIHwgJ2xlZnQnXG4gICAgfCAnbGVmdC1zdGFydCc7XG4gIHBvcG92ZXJBcmlhTGFiZWw/OiBzdHJpbmc7XG4gIHNlbGVjdGVkT3B0aW9uRGlzcGxheT86IChcbiAgICBvcHRpb246IFNlbGVjdE9wdGlvblByb3BzXG4gICkgPT4gc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCB8IFJlYWN0LlJlYWN0Tm9kZTtcbiAgdG9vbHRpcE1lc3NhZ2U/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBTZWxlY3Q6IFJlYWN0LkZDPFNlbGVjdFByb3BzPiA9ICh7XG4gIFsnYXJpYS1sYWJlbCddOiBhcmlhTGFiZWwsXG4gIGNoaWxkcmVuLFxuICBjbGFzc05hbWUsXG4gIGNvbG9yID0gJ2RlZmF1bHQnLFxuICBlcnJvck1lc3NhZ2UsXG4gIGZ1bGxXaWR0aCxcbiAgaGFzRXJyb3IsXG4gIGhlbHBNZXNzYWdlLFxuICBpY29uOiBJY29uLFxuICBpZCxcbiAgbGFiZWwsXG4gIHNlY29uZGFyeUxhYmVsLFxuICBvbkNoYW5nZSxcbiAgcGxhY2Vob2xkZXIsXG4gIHBsYWNlbWVudCxcbiAgcG9wb3ZlckFyaWFMYWJlbCxcbiAgc2VsZWN0ZWRPcHRpb25EaXNwbGF5LFxuICB0b29sdGlwTWVzc2FnZSxcbiAgdmFsdWUsXG4gIC4uLnJvb3RQcm9wc1xufSkgPT4ge1xuICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKHt9KTtcbiAgY29uc3QgcG9wb3ZlciA9IHVzZVBvcG92ZXJTdGF0ZSh7IHBsYWNlbWVudCB9KTtcbiAgY29uc3Qgc2hvdWxkUmVkdWNlTW90aW9uID0gdXNlUmVkdWNlZE1vdGlvbigpO1xuXG4gIGNvbnN0IGJ1dHRvblJlZiA9IFJlYWN0LnVzZVJlZjxhbnk+KCk7IC8vIFRPRE86IE5lZWQgdG8gdHlwZSB0aGlzIHByb3Blcmx5Li4uXG4gIGNvbnN0IFt3aWR0aCwgc2V0V2lkdGhdID0gUmVhY3QudXNlU3RhdGU8bnVtYmVyPig1MCk7XG5cbiAgY29uc3QgW1xuICAgIGludGVybmFsU2VsZWN0aW9uLFxuICAgIHNldEludGVybmFsU2VsZWN0aW9uLFxuICBdID0gUmVhY3QudXNlU3RhdGU8U2VsZWN0T3B0aW9uUHJvcHMgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBbdW5pcXVlSWRdID0gUmVhY3QudXNlU3RhdGU8c3RyaW5nPihcbiAgICAoKSA9PiBpZCB8fCBuYW1lIHx8IGdlbmVyYXRlVW5pcXVlSWQoJ3NlbGVjdC0nKVxuICApO1xuXG4gIGNvbnN0IHJvdmVyID0gdXNlUm92ZXJTdGF0ZSh7IGxvb3A6IHRydWUsIG9yaWVudGF0aW9uOiAndmVydGljYWwnIH0pO1xuXG4gIC8vIFVwZGF0ZSB0aGUgb3BlbmVkIHBvcG92ZXIgd2lkdGggYW55IHRpbWUgdGhlIGJ1dHRvbiB3aWR0aCBjaGFuZ2VzXG4gIC8vIFRPRE86IFJldmlldyB0aGUgYmVzdCB3YXkgdG8gaGFuZGxlIHRoaXMgd2l0aG91dCBicmVha2luZ1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0V2lkdGgoYnV0dG9uUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgpO1xuICB9KTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFRPRE86IE5lZWQgdG8gdHlwZSB0aGlzIHByb3Blcmx5IGFzIHdlbGwuLi5cbiAgICBjb25zdCBtYXRjaDogYW55ID0gUmVhY3QuQ2hpbGRyZW4udG9BcnJheShjaGlsZHJlbikuZmluZCgoY2hpbGQpID0+IHtcbiAgICAgIGlmICghUmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGQpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNIZWFkaW5nRWxlbWVudChjaGlsZCkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjaGlsZC5wcm9wcy52YWx1ZSA9PT0gdmFsdWU7XG4gICAgfSk7XG5cbiAgICAvLyBJZiB0aGVyZSBpcyBubyBtYXRjaCwgc2V0IGludGVybmFsU2VsZWN0aW9uIHRvIG51bGwgc28gcGxhY2Vob2xkZXIgd2lsbCBiZSBzaG93blxuICAgIHNldEludGVybmFsU2VsZWN0aW9uKG1hdGNoID8gbWF0Y2gucHJvcHMgOiBudWxsKTtcbiAgfSwgW2NoaWxkcmVuLCB2YWx1ZV0pO1xuXG4gIGNvbnN0IGhpZGVQb3BvdmVyID0gcG9wb3Zlci5oaWRlO1xuICBjb25zdCBoYW5kbGVPcHRpb25TZWxlY3RlZCA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChvcHRpb25WYWx1ZTogc3RyaW5nLCBtZXRhOiBhbnkpID0+IHtcbiAgICAgIGhpZGVQb3BvdmVyKCk7XG4gICAgICBvbkNoYW5nZT8uKG9wdGlvblZhbHVlLCBtZXRhKTtcbiAgICB9LFxuICAgIFtoaWRlUG9wb3Zlciwgb25DaGFuZ2VdXG4gICk7XG5cbiAgaWYgKCFsYWJlbCAmJiAhYXJpYUxhYmVsICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0lmIGEgXCJsYWJlbFwiIGlzIG5vdCBwcm92aWRlZCB0byBTZWxlY3QsIHBsZWFzZSBwcm92aWRlIFwiYXJpYS1sYWJlbFwiLidcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y2xzeChjbGFzc2VzLnJvb3QsIGNsYXNzTmFtZSl9PlxuICAgICAgPGxhYmVsXG4gICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICBjbGFzc2VzLmxhYmVsLFxuICAgICAgICAgIGNvbG9yID09PSAnaW52ZXJzZScgJiYgY2xhc3Nlcy5sYWJlbEludmVyc2UsXG4gICAgICAgICAgIWxhYmVsICYmIGFyaWFMYWJlbCAmJiBjbGFzc2VzLnNyT25seVxuICAgICAgICApfVxuICAgICAgICBodG1sRm9yPXt1bmlxdWVJZH1cbiAgICAgID5cbiAgICAgICAge2xhYmVsIHx8IGFyaWFMYWJlbH1cbiAgICAgICAgeyEhSWNvbiAmJiB0b29sdGlwTWVzc2FnZSAmJiAoXG4gICAgICAgICAgPFRvb2x0aXAgdGl0bGU9e3Rvb2x0aXBNZXNzYWdlfT5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17Y2xhc3Nlcy50b29sdGlwQ29udGFpbmVyfT5cbiAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgICAgICAgICBjbGFzc2VzLmxhYmVsSWNvbixcbiAgICAgICAgICAgICAgICAgIGNvbG9yID09PSAnaW52ZXJzZScgJiYgY2xhc3Nlcy5sYWJlbEljb25JbnZlcnNlXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICB3aWR0aD17MTZ9XG4gICAgICAgICAgICAgICAgaGVpZ2h0PXsxNn1cbiAgICAgICAgICAgICAgICByb2xlPVwiaW1nXCJcbiAgICAgICAgICAgICAgICBhcmlhLWhpZGRlblxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgKX1cbiAgICAgICAge3NlY29uZGFyeUxhYmVsID8gKFxuICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgICAgIGNsYXNzZXMubGFiZWxTZWNvbmRhcnksXG4gICAgICAgICAgICAgIGNvbG9yID09PSAnaW52ZXJzZScgJiYgY2xhc3Nlcy5sYWJlbEludmVyc2VcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3NlY29uZGFyeUxhYmVsfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKSA6IG51bGx9XG4gICAgICA8L2xhYmVsPlxuICAgICAgPFBvcG92ZXJEaXNjbG9zdXJlXG4gICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICBjbGFzc2VzLmJ1dHRvbixcbiAgICAgICAgICBoYXNFcnJvciAmJiBjbGFzc2VzLmJ1dHRvbkVycm9yLFxuICAgICAgICAgIGZ1bGxXaWR0aCAmJiBjbGFzc2VzLmJ1dHRvbkZ1bGxXaWR0aCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBbY2xhc3Nlcy5idXR0b25JbnZlcnNlXTogY29sb3IgPT09ICdpbnZlcnNlJyxcbiAgICAgICAgICB9XG4gICAgICAgICl9XG4gICAgICAgIHJlZj17YnV0dG9uUmVmfVxuICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PXtidWlsZERlc2NyaWJlZEJ5KHtcbiAgICAgICAgICBoYXNFcnJvcixcbiAgICAgICAgICBoYXNIZWxwTWVzc2FnZTogISFoZWxwTWVzc2FnZSxcbiAgICAgICAgICB1bmlxdWVJZCxcbiAgICAgICAgfSl9XG4gICAgICAgIGlkPXt1bmlxdWVJZH1cbiAgICAgICAgey4uLnBvcG92ZXJ9XG4gICAgICAgIHsuLi5yb290UHJvcHN9XG4gICAgICA+XG4gICAgICAgIDw+XG4gICAgICAgICAgeyFpbnRlcm5hbFNlbGVjdGlvbiAmJiAoXG4gICAgICAgICAgICA8VGV4dFxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goY2xhc3Nlcy5wbGFjZWhvbGRlclRleHQsIGNsYXNzZXMuYnV0dG9uVGV4dCl9XG4gICAgICAgICAgICAgIHNpemU9XCJzdWJib2R5XCJcbiAgICAgICAgICAgICAgey4uLmdldFRlc3RQcm9wcyh0ZXN0SWRzLnBsYWNlaG9sZGVyVGV4dCl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtwbGFjZWhvbGRlcn1cbiAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtpbnRlcm5hbFNlbGVjdGlvbiAmJiAhc2VsZWN0ZWRPcHRpb25EaXNwbGF5ICYmIChcbiAgICAgICAgICAgIDxUZXh0IGNsYXNzTmFtZT17Y2xhc3Nlcy5idXR0b25UZXh0fSBzaXplPVwic3ViYm9keVwiPlxuICAgICAgICAgICAgICB7aW50ZXJuYWxTZWxlY3Rpb24udGl0bGV9XG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7aW50ZXJuYWxTZWxlY3Rpb24gJiYgc2VsZWN0ZWRPcHRpb25EaXNwbGF5ICYmIChcbiAgICAgICAgICAgIDxUZXh0IGNsYXNzTmFtZT17Y2xhc3Nlcy5idXR0b25UZXh0fSBzaXplPVwic3ViYm9keVwiPlxuICAgICAgICAgICAgICB7c2VsZWN0ZWRPcHRpb25EaXNwbGF5KGludGVybmFsU2VsZWN0aW9uKX1cbiAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICApfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmJ1dHRvbkFycm93Q29udGFpbmVyfSByb2xlPVwicHJlc2VudGF0aW9uXCI+XG4gICAgICAgICAgICA8Q2hldnJvbkRvd25cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KFxuICAgICAgICAgICAgICAgIGNsYXNzZXMuYXJyb3dJY29uLFxuICAgICAgICAgICAgICAgIHBvcG92ZXIudmlzaWJsZSAmJiBjbGFzc2VzLnJvdGF0ZVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBhcmlhLWhpZGRlblxuICAgICAgICAgICAgICByb2xlPVwiaW1nXCJcbiAgICAgICAgICAgICAgd2lkdGg9ezE4fVxuICAgICAgICAgICAgICBoZWlnaHQ9ezE4fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC8+XG4gICAgICA8L1BvcG92ZXJEaXNjbG9zdXJlPlxuICAgICAge2hlbHBNZXNzYWdlICYmIChcbiAgICAgICAgPEZvcm1IZWxwTWVzc2FnZVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy5tZXNzYWdlfVxuICAgICAgICAgIGNvbG9yPXtjb2xvcn1cbiAgICAgICAgICByb290RWxlbWVudElkPXt1bmlxdWVJZH1cbiAgICAgICAgICBkZXNjcmliZWRCeUlkPXtoZWxwRm9yKHVuaXF1ZUlkKX1cbiAgICAgICAgPlxuICAgICAgICAgIHtoZWxwTWVzc2FnZX1cbiAgICAgICAgPC9Gb3JtSGVscE1lc3NhZ2U+XG4gICAgICApfVxuICAgICAge2hhc0Vycm9yICYmIChcbiAgICAgICAgPEZvcm1FcnJvck1lc3NhZ2VcbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMubWVzc2FnZX1cbiAgICAgICAgICBjb2xvcj17Y29sb3J9XG4gICAgICAgICAgcm9vdEVsZW1lbnRJZD17dW5pcXVlSWR9XG4gICAgICAgICAgZGVzY3JpYmVkQnlJZD17ZXJyb3JGb3IodW5pcXVlSWQpfVxuICAgICAgICA+XG4gICAgICAgICAge2Vycm9yTWVzc2FnZX1cbiAgICAgICAgPC9Gb3JtRXJyb3JNZXNzYWdlPlxuICAgICAgKX1cbiAgICAgIHsvKlxuICAgICAgICBBIGZldyB0aGluZ3MgaGVyZTpcblxuICAgICAgICAxKSBXZSB3YW50IHRvIGFsd2F5cyBwb3J0YWwgb3VyIHNlbGVjdCBtZW51IHJlc3VsdHMgc28gd2UgZG9uJ3RcbiAgICAgICAgICAgcnVuIGludG8gd2VpcmQgbGF5b3V0IGlzc3VlcyAocmVuZGVyaW5nIGluc2lkZSBQb3BvdmVyIG9yIE1vZGFsKVxuICAgICAgICAyKSBXZSBuZWVkIHRvIHRyYXAgZm9jdXMgaW5zaWRlIG9mIHRoZSBtZW51IHdoZW4gaXQgaXMgb3BlbiAtIDxGb2N1c0xvY2sgLz4gaGFuZGxlcyB0aGlzIGZvciB1c1xuICAgICAgICAzKSBXZSBuZWVkIGtleWJvYXJkIHN1cHBvcnQgdmlhIDxSb3ZlciAvPlxuXG4gICAgICAgIFJlZmVyZW5jZSBmb3IgIzEgJiAjMjogaHR0cHM6Ly9naXRodWIuY29tL3JlYWtpdC9yZWFraXQvaXNzdWVzLzU2NlxuICAgICAgKi99XG4gICAgICA8UG9ydGFsPlxuICAgICAgICA8Rm9jdXNMb2NrPlxuICAgICAgICAgIDxSZWFraXRQb3BvdmVyXG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtsYWJlbCB8fCBhcmlhTGFiZWwgfHwgcG9wb3ZlckFyaWFMYWJlbH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy5wb3BvdmVyfVxuICAgICAgICAgICAgey4uLnBvcG92ZXJ9XG4gICAgICAgICAgICBzdHlsZT17eyB3aWR0aCB9fVxuICAgICAgICAgICAgYXM9e21vdGlvbi5kaXZ9XG4gICAgICAgICAgICBhbmltYXRlPXtwb3BvdmVyLnZpc2libGUgPyAnb3BlbicgOiAnY2xvc2VkJ31cbiAgICAgICAgICAgIHZhcmlhbnRzPXtcbiAgICAgICAgICAgICAgc2hvdWxkUmVkdWNlTW90aW9uID8gcG9wb3ZlclZhcmlhbnRzUmVkdWNlZCA6IHBvcG92ZXJWYXJpYW50c1xuICAgICAgICAgICAgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxtb3Rpb24udWxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc2VzLnVsfVxuICAgICAgICAgICAgICByb2xlPVwibGlzdGJveFwiXG4gICAgICAgICAgICAgIHZhcmlhbnRzPXtcbiAgICAgICAgICAgICAgICBzaG91bGRSZWR1Y2VNb3Rpb25cbiAgICAgICAgICAgICAgICAgID8gbGlzdE1vdGlvblZhcmlhbnRzUmVkdWNlZFxuICAgICAgICAgICAgICAgICAgOiBsaXN0TW90aW9uVmFyaWFudHNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7cG9wb3Zlci52aXNpYmxlICYmXG4gICAgICAgICAgICAgICAgUmVhY3QuQ2hpbGRyZW4ubWFwKGNoaWxkcmVuLCAoY2hpbGQpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICghUmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoaXNIZWFkaW5nRWxlbWVudChjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb246IFJlYWN0LlJlYWN0RWxlbWVudDxTZWxlY3RPcHRpb25Qcm9wcz4gPSBjaGlsZDtcblxuICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPFJvdmVyT3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgcm92ZXI9e3JvdmVyfVxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb249e29wdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVPcHRpb25TZWxlY3Q9e2hhbmRsZU9wdGlvblNlbGVjdGVkfVxuICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnRzPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFJlZHVjZU1vdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGxpc3RJdGVtTW90aW9uVmFyaWFudHNSZWR1Y2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogbGlzdEl0ZW1Nb3Rpb25WYXJpYW50c1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17Y2hpbGQ/LnByb3BzPy5kaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L21vdGlvbi51bD5cbiAgICAgICAgICA8L1JlYWtpdFBvcG92ZXI+XG4gICAgICAgIDwvRm9jdXNMb2NrPlxuICAgICAgPC9Qb3J0YWw+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuIl19