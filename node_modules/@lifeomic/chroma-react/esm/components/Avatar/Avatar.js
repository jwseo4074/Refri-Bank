var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
import clsx from 'clsx';
import * as React from 'react';
import { makeStyles } from '../../styles';
import { AvatarSizeContext } from './AvatarSizeContext';
export var AvatarStylesKey = 'ChromaAvatar';
export var useStyles = makeStyles(function (theme) { return ({
    root: {
        alignItems: 'center',
        backgroundColor: theme.palette.primary.main,
        border: theme.pxToRem(1) + " solid " + theme.palette.black[100],
        borderRadius: 9999,
        color: theme.palette.common.white,
        display: 'inline-flex',
        flexShrink: 0,
        justifyContent: 'center',
        outline: 'none',
        position: 'relative',
        transition: 'opacity 0.25s ease, border 0.25s ease',
        userSelect: 'none',
        '&:focus': {
            opacity: 0.85,
            border: theme.pxToRem(2) + " solid " + theme.palette.black[700],
        },
    },
    size0: {
        fontSize: theme.typography.caption.fontSize,
        fontWeight: theme.typography.fontWeightBold,
        width: theme.pxToRem(22),
        height: theme.pxToRem(22),
    },
    size1: {
        fontSize: theme.typography.body1.fontSize,
        width: theme.pxToRem(32),
        height: theme.pxToRem(32),
    },
    size2: {
        fontSize: theme.typography.h5.fontSize,
        width: theme.pxToRem(42),
        height: theme.pxToRem(42),
    },
    img: {
        width: '100%',
        height: '100%',
        objectFit: 'cover',
        maxWidth: '100%',
        verticalAlign: 'middle',
        borderRadius: 9999,
    },
    defaultSrc: {
        fill: theme.palette.common.white,
    },
    clickable: {
        cursor: 'pointer',
        '&:hover': {
            opacity: 0.85,
            border: theme.pxToRem(1) + " solid " + theme.palette.black[700],
        },
    },
}); }, { name: AvatarStylesKey });
var getInitials = function (name) {
    var _a;
    if (!name) {
        return '';
    }
    var firstName = name.split(' ')[0];
    return (_a = firstName === null || firstName === void 0 ? void 0 : firstName.charAt(0)) === null || _a === void 0 ? void 0 : _a.toUpperCase();
};
export var Avatar = React.forwardRef(function (_a, ref) {
    var _b;
    var className = _a.className, children = _a.children, _c = _a.name, name = _c === void 0 ? '' : _c, onClick = _a.onClick, _d = _a.size, size = _d === void 0 ? 1 : _d, src = _a.src, _e = _a.useDefaultSrc, useDefaultSrc = _e === void 0 ? false : _e, rootProps = __rest(_a, ["className", "children", "name", "onClick", "size", "src", "useDefaultSrc"]);
    var classes = useStyles({});
    // We need to be *super* careful to not display any self identifying information
    // (name or image src) if "useDefaultSrc" is provided.  This will ensure
    // that our "masked mode" when dealing with healthcare information is respected
    return (
    // We conditionally add the role if `onClick` is provided
    // eslint-disable-next-line jsx-a11y/no-static-element-interactions
    React.createElement("div", __assign({ ref: ref, className: clsx(classes.root, (_b = {},
            _b[classes.size0] = size === 0,
            _b[classes.size1] = size === 1,
            _b[classes.size2] = size === 2,
            _b), onClick && classes.clickable, className), onClick: onClick, "aria-label": !src && name && !useDefaultSrc ? name : undefined, role: onClick ? 'button' : undefined, tabIndex: onClick ? 0 : undefined }, rootProps),
        !src && !useDefaultSrc ? getInitials(name) : null,
        src && !useDefaultSrc && (React.createElement("img", { className: classes.img, src: src, alt: name })),
        useDefaultSrc && (React.createElement("svg", { className: clsx(classes.img, classes.defaultSrc), fill: "currentColor", viewBox: "0 0 128 128", role: "img" },
            React.createElement("g", null,
                React.createElement("path", { d: "M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z" }),
                React.createElement("path", { d: "M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24" })))),
        children && (React.createElement(AvatarSizeContext.Provider, { value: { size: size } }, children))));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXZhdGFyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvQXZhdGFyL0F2YXRhci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUN4QixPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBRTFDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRXhELE1BQU0sQ0FBQyxJQUFNLGVBQWUsR0FBRyxjQUFjLENBQUM7QUFFOUMsTUFBTSxDQUFDLElBQU0sU0FBUyxHQUFHLFVBQVUsQ0FDakMsVUFBQyxLQUFLLElBQUssT0FBQSxDQUFDO0lBQ1YsSUFBSSxFQUFFO1FBQ0osVUFBVSxFQUFFLFFBQVE7UUFDcEIsZUFBZSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUk7UUFDM0MsTUFBTSxFQUFLLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGVBQVUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFHO1FBQy9ELFlBQVksRUFBRSxJQUFJO1FBQ2xCLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLO1FBQ2pDLE9BQU8sRUFBRSxhQUFhO1FBQ3RCLFVBQVUsRUFBRSxDQUFDO1FBQ2IsY0FBYyxFQUFFLFFBQVE7UUFDeEIsT0FBTyxFQUFFLE1BQU07UUFDZixRQUFRLEVBQUUsVUFBVTtRQUNwQixVQUFVLEVBQUUsdUNBQXVDO1FBQ25ELFVBQVUsRUFBRSxNQUFNO1FBQ2xCLFNBQVMsRUFBRTtZQUNULE9BQU8sRUFBRSxJQUFJO1lBQ2IsTUFBTSxFQUFLLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGVBQVUsS0FBSyxD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QUFFLE9BQU8sZ0JBQ0osQ0FBQyxHQUFHLElBQUksSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDN0QsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3BDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxJQUM3QixTQUFTO1FBRVosQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUNqRCxHQUFHLElBQUksQ0FBQyxhQUFhLElBQUksQ0FDeEIsNkJBQUssU0FBUyxFQUFFLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxHQUFJLENBQ3JEO1FBQ0EsYUFBYSxJQUFJLENBQ2hCLDZCQUNFLFNBQVMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQ2hELElBQUksRUFBQyxjQUFjLEVBQ25CLE9BQU8sRUFBQyxhQUFhLEVBQ3JCLElBQUksRUFBQyxLQUFLO1lBRVY7Z0JBQ0UsOEJBQU0sQ0FBQyxFQUFDLCtMQUErTCxHQUFHO2dCQUMxTSw4QkFBTSxDQUFDLEVBQUMsNExBQTRMLEdBQUcsQ0FDck0sQ0FDQSxDQUNQO1FBQ0EsUUFBUSxJQUFJLENBQ1gsb0JBQUMsaUJBQWlCLENBQUMsUUFBUSxJQUFDLEtBQUssRUFBRSxFQUFFLElBQUksTUFBQSxFQUFFLElBQ3hDLFFBQVEsQ0FDa0IsQ0FDOUIsQ0FDRyxDQUNQLENBQUM7QUFDSixDQUFDLENBQ0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjbHN4IGZyb20gJ2Nsc3gnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgbWFrZVN0eWxlcyB9IGZyb20gJy4uLy4uL3N0eWxlcyc7XG5pbXBvcnQgeyBHZXRDbGFzc2VzIH0gZnJvbSAnLi4vLi4vdHlwZVV0aWxzJztcbmltcG9ydCB7IEF2YXRhclNpemVDb250ZXh0IH0gZnJvbSAnLi9BdmF0YXJTaXplQ29udGV4dCc7XG5cbmV4cG9ydCBjb25zdCBBdmF0YXJTdHlsZXNLZXkgPSAnQ2hyb21hQXZhdGFyJztcblxuZXhwb3J0IGNvbnN0IHVzZVN0eWxlcyA9IG1ha2VTdHlsZXMoXG4gICh0aGVtZSkgPT4gKHtcbiAgICByb290OiB7XG4gICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhlbWUucGFsZXR0ZS5wcmltYXJ5Lm1haW4sXG4gICAgICBib3JkZXI6IGAke3RoZW1lLnB4VG9SZW0oMSl9IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5ibGFja1sxMDBdfWAsXG4gICAgICBib3JkZXJSYWRpdXM6IDk5OTksXG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWZsZXgnLFxuICAgICAgZmxleFNocmluazogMCxcbiAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgdHJhbnNpdGlvbjogJ29wYWNpdHkgMC4yNXMgZWFzZSwgYm9yZGVyIDAuMjVzIGVhc2UnLFxuICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgJyY6Zm9jdXMnOiB7XG4gICAgICAgIG9wYWNpdHk6IDAuODUsXG4gICAgICAgIGJvcmRlcjogYCR7dGhlbWUucHhUb1JlbSgyKX0gc29saWQgJHt0aGVtZS5wYWxldHRlLmJsYWNrWzcwMF19YCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBzaXplMDoge1xuICAgICAgZm9udFNpemU6IHRoZW1lLnR5cG9ncmFwaHkuY2FwdGlvbi5mb250U2l6ZSxcbiAgICAgIGZvbnRXZWlnaHQ6IHRoZW1lLnR5cG9ncmFwaHkuZm9udFdlaWdodEJvbGQsXG4gICAgICB3aWR0aDogdGhlbWUucHhUb1JlbSgyMiksXG4gICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMjIpLFxuICAgIH0sXG4gICAgc2l6ZTE6IHtcbiAgICAgIGZvbnRTaXplOiB0aGVtZS50eXBvZ3JhcGh5LmJvZHkxLmZvbnRTaXplLFxuICAgICAgd2lkdGg6IHRoZW1lLnB4VG9SZW0oMzIpLFxuICAgICAgaGVpZ2h0OiB0aGVtZS5weFRvUmVtKDMyKSxcbiAgICB9LFxuICAgIHNpemUyOiB7XG4gICAgICBmb250U2l6ZTogdGhlbWUudHlwb2dyYXBoeS5oNS5mb250U2l6ZSxcbiAgICAgIHdpZHRoOiB0aGVtZS5weFRvUmVtKDQyKSxcbiAgICAgIGhlaWdodDogdGhlbWUucHhUb1JlbSg0MiksXG4gICAgfSxcbiAgICBpbWc6IHtcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgIG9iamVjdEZpdDogJ2NvdmVyJyxcbiAgICAgIG1heFdpZHRoOiAnMTAwJScsXG4gICAgICB2ZXJ0aWNhbEFsaWduOiAnbWlkZGxlJyxcbiAgICAgIGJvcmRlclJhZGl1czogOTk5OSxcbiAgICB9LFxuICAgIGRlZmF1bHRTcmM6IHtcbiAgICAgIGZpbGw6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgIH0sXG4gICAgY2xpY2thYmxlOiB7XG4gICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICcmOmhvdmVyJzoge1xuICAgICAgICBvcGFjaXR5OiAwLjg1LFxuICAgICAgICBib3JkZXI6IGAke3RoZW1lLnB4VG9SZW0oMSl9IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5ibGFja1s3MDBdfWAsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pLFxuICB7IG5hbWU6IEF2YXRhclN0eWxlc0tleSB9XG4pO1xuXG5leHBvcnQgdHlwZSBBdmF0YXJDbGFzc2VzID0gR2V0Q2xhc3Nlczx0eXBlb2YgdXNlU3R5bGVzPjtcblxuZXhwb3J0IGludGVyZmFjZSBBdmF0YXJQcm9wcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudFByb3BzV2l0aG91dFJlZjwnZGl2Jz4ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHNpemU/OiAwIHwgMSB8IDI7XG4gIHNyYz86IHN0cmluZztcbiAgdXNlRGVmYXVsdFNyYz86IGJvb2xlYW47XG59XG5cbmNvbnN0IGdldEluaXRpYWxzID0gKG5hbWU6IHN0cmluZykgPT4ge1xuICBpZiAoIW5hbWUpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBjb25zdCBbZmlyc3ROYW1lXSA9IG5hbWUuc3BsaXQoJyAnKTtcblxuICByZXR1cm4gZmlyc3ROYW1lPy5jaGFyQXQoMCk/LnRvVXBwZXJDYXNlKCk7XG59O1xuXG5leHBvcnQgY29uc3QgQXZhdGFyID0gUmVhY3QuZm9yd2FyZFJlZjxIVE1MRGl2RWxlbWVudCwgQXZhdGFyUHJvcHM+KFxuICAoXG4gICAge1xuICAgICAgY2xhc3NOYW1lLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICBuYW1lID0gJycsXG4gICAgICBvbkNsaWNrLFxuICAgICAgc2l6ZSA9IDEsXG4gICAgICBzcmMsXG4gICAgICB1c2VEZWZhdWx0U3JjID0gZmFsc2UsXG4gICAgICAuLi5yb290UHJvcHNcbiAgICB9LFxuICAgIHJlZlxuICApID0+IHtcbiAgICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKHt9KTtcblxuICAgIC8vIFdlIG5lZWQgdG8gYmUgKnN1cGVyKiBjYXJlZnVsIHRvIG5vdCBkaXNwbGF5IGFueSBzZWxmIGlkZW50aWZ5aW5nIGluZm9ybWF0aW9uXG4gICAgLy8gKG5hbWUgb3IgaW1hZ2Ugc3JjKSBpZiBcInVzZURlZmF1bHRTcmNcIiBpcyBwcm92aWRlZC4gIFRoaXMgd2lsbCBlbnN1cmVcbiAgICAvLyB0aGF0IG91ciBcIm1hc2tlZCBtb2RlXCIgd2hlbiBkZWFsaW5nIHdpdGggaGVhbHRoY2FyZSBpbmZvcm1hdGlvbiBpcyByZXNwZWN0ZWRcbiAgICByZXR1cm4gKFxuICAgICAgLy8gV2UgY29uZGl0aW9uYWxseSBhZGQgdGhlIHJvbGUgaWYgYG9uQ2xpY2tgIGlzIHByb3ZpZGVkXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUganN4LWExMXkvbm8tc3RhdGljLWVsZW1lbnQtaW50ZXJhY3Rpb25zXG4gICAgICA8ZGl2XG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgY2xhc3Nlcy5yb290LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIFtjbGFzc2VzLnNpemUwXTogc2l6ZSA9PT0gMCxcbiAgICAgICAgICAgIFtjbGFzc2VzLnNpemUxXTogc2l6ZSA9PT0gMSxcbiAgICAgICAgICAgIFtjbGFzc2VzLnNpemUyXTogc2l6ZSA9PT0gMixcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uQ2xpY2sgJiYgY2xhc3Nlcy5jbGlja2FibGUsXG4gICAgICAgICAgY2xhc3NOYW1lXG4gICAgICAgICl9XG4gICAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XG4gICAgICAgIGFyaWEtbGFiZWw9eyFzcmMgJiYgbmFtZSAmJiAhdXNlRGVmYXVsdFNyYyA/IG5hbWUgOiB1bmRlZmluZWR9XG4gICAgICAgIHJvbGU9e29uQ2xpY2sgPyAnYnV0dG9uJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgdGFiSW5kZXg9e29uQ2xpY2sgPyAwIDogdW5kZWZpbmVkfVxuICAgICAgICB7Li4ucm9vdFByb3BzfVxuICAgICAgPlxuICAgICAgICB7IXNyYyAmJiAhdXNlRGVmYXVsdFNyYyA/IGdldEluaXRpYWxzKG5hbWUpIDogbnVsbH1cbiAgICAgICAge3NyYyAmJiAhdXNlRGVmYXVsdFNyYyAmJiAoXG4gICAgICAgICAgPGltZyBjbGFzc05hbWU9e2NsYXNzZXMuaW1nfSBzcmM9e3NyY30gYWx0PXtuYW1lfSAvPlxuICAgICAgICApfVxuICAgICAgICB7dXNlRGVmYXVsdFNyYyAmJiAoXG4gICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KGNsYXNzZXMuaW1nLCBjbGFzc2VzLmRlZmF1bHRTcmMpfVxuICAgICAgICAgICAgZmlsbD1cImN1cnJlbnRDb2xvclwiXG4gICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDEyOCAxMjhcIlxuICAgICAgICAgICAgcm9sZT1cImltZ1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGc+XG4gICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAzLDEwMi4xMzg4IEM5My4wOTQsMTExLjkyIDc5LjM1MDQsMTE4IDY0LjE2MzgsMTE4IEM0OC44MDU2LDExOCAzNC45Mjk0LDExMS43NjggMjUsMTAxLjc4OTIgTDI1LDk1LjIgQzI1LDg2LjgwOTYgMzEuOTgxLDgwIDQwLjYsODAgTDg3LjQsODAgQzk2LjAxOSw4MCAxMDMsODYuODA5NiAxMDMsOTUuMiBMMTAzLDEwMi4xMzg4IFpcIiAvPlxuICAgICAgICAgICAgICA8cGF0aCBkPVwiTTYzLjk5NjE2NDcsMjQgQzUxLjI5MzgxMzYsMjQgNDEsMzQuMjkzODEzNiA0MSw0Ni45OTYxNjQ3IEM0MSw1OS43MDYxODY0IDUxLjI5MzgxMzYsNzAgNjMuOTk2MTY0Nyw3MCBDNzYuNjk4NTE1OSw3MCA4Nyw1OS43MDYxODY0IDg3LDQ2Ljk5NjE2NDcgQzg3LDM0LjI5MzgxMzYgNzYuNjk4NTE1OSwyNCA2My45OTYxNjQ3LDI0XCIgLz5cbiAgICAgICAgICAgIDwvZz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgKX1cbiAgICAgICAge2NoaWxkcmVuICYmIChcbiAgICAgICAgICA8QXZhdGFyU2l6ZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgc2l6ZSB9fT5cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICA8L0F2YXRhclNpemVDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuKTtcbiJdfQ==