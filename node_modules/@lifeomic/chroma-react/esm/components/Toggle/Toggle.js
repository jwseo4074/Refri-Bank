var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
import clsx from 'clsx';
import * as React from 'react';
import { makeStyles } from '../../styles';
import { buildDescribedBy, errorFor, FormErrorMessage, FormHelpMessage, helpFor, } from '../_private/forms';
import { generateUniqueId } from '../_private/UniqueId';
import { Text } from '../Text';
import { screenreaderOnlyStyles } from '../../styles/screenreaderOnly';
export var ToggleStylesKey = 'ChromaToggle';
export var useStyles = makeStyles(function (theme) { return ({
    root: {
        display: 'flex',
        // Setup default ball styles
        '& > input[type="checkbox"]::after': {
            background: theme.palette.common.white,
            transform: 'translateX(0px)',
            transition: 'transform .3s cubic-bezier(.2, .85, .32, 1.2), opacity .2s',
        },
        // Target the ball to move *and* change color to white
        '& > input[type="checkbox"]:checked::after': {
            background: theme.palette.common.white,
            transform: 'translateX(17px)',
        },
        // Targets the ball when the input is disabled and not checked
        '& > input[type="checkbox"]:disabled:not(:checked)::after': {
            opacity: 0.6,
        },
    },
    input: {
        background: 'rgba(132, 137, 166, 0.15)',
        border: '1px solid transparent',
        borderRadius: theme.pxToRem(11),
        cursor: 'pointer',
        display: 'inline-block',
        height: theme.pxToRem(21),
        margin: 0,
        MozAppearance: 'none',
        outline: 'none',
        position: 'relative',
        transition: 'background .3s, border-color .3s, box-shadow .2s',
        verticalAlign: 'top',
        WebkitAppearance: 'none',
        minWidth: theme.pxToRem(38),
        '&:after': {
            background: theme.palette.common.white,
            borderRadius: '50%',
            content: '" "',
            display: 'block',
            height: theme.pxToRem(15),
            left: theme.pxToRem(2),
            position: 'absolute',
            top: theme.pxToRem(2),
            width: theme.pxToRem(15),
        },
        '&:checked': {
            background: theme.palette.primary.main,
            border: "1px solid " + theme.palette.primary.main,
        },
        '&:disabled': {
            cursor: 'not-allowed',
            opacity: 0.625,
            // Ensure the label sibling cannot be clicked as well
            '& + label': {
                cursor: 'not-allowed',
            },
        },
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(0, 150, 225, .3)',
        },
        '&:hover:not(:disabled):not(:checked)': {
            border: "1px solid " + theme.palette.primary[700],
        },
    },
    inputInverse: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        border: '1px solid rgba(255, 255, 255, 0.2)',
        mixBlendMode: 'hard-light',
        '&:checked': {
            background: theme.palette.secondary[500],
            border: "1px solid " + theme.palette.secondary[500],
        },
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(255, 255, 255, .3)',
        },
        '&:hover:not(:disabled):not(:checked)': {
            border: "1px solid " + theme.palette.common.white,
        },
    },
    labelContainer: {
        flex: '0 auto',
        marginLeft: theme.spacing(1),
    },
    label: {
        cursor: 'pointer',
        display: 'inline-block',
        marginBottom: 0,
        marginTop: theme.spacing(0.25),
        verticalAlign: 'top',
        '& p': {
            lineHeight: 1.25,
        },
    },
    labelInverse: {
        color: theme.palette.common.white,
    },
    message: {},
    error: {
        border: "1px solid " + theme.palette.red.main,
    },
    rootRight: {
        flexFlow: 'row-reverse',
        justifyContent: 'flex-end',
    },
    labelContainerRight: {
        marginRight: theme.spacing(1),
        marginLeft: 0,
    },
    labelContainerFullWidth: {
        flex: 1,
    },
    labelFullWidth: {
        display: 'flex',
    },
    srOnly: __assign({}, screenreaderOnlyStyles),
}); }, { name: ToggleStylesKey });
export var Toggle = React.forwardRef(function (_a, ref) {
    var _b, _c, _d;
    var ariaLabel = _a["aria-label"], checked = _a.checked, className = _a.className, _e = _a.color, color = _e === void 0 ? 'default' : _e, fullWidth = _a.fullWidth, errorMessage = _a.errorMessage, hasError = _a.hasError, helpMessage = _a.helpMessage, id = _a.id, label = _a.label, name = _a.name, _f = _a.placement, placement = _f === void 0 ? 'left' : _f, rootProps = __rest(_a, ['aria-label', "checked", "className", "color", "fullWidth", "errorMessage", "hasError", "helpMessage", "id", "label", "name", "placement"]);
    var classes = useStyles({});
    var uniqueId = React.useState(function () { return id || name || generateUniqueId('toggle-'); })[0];
    if (!label && !ariaLabel && process.env.NODE_ENV === 'development') {
        throw new Error('If a "label" is not provided to Toggle, please provide "aria-label".');
    }
    return (React.createElement("div", { className: clsx(classes.root, (_b = {}, _b[classes.rootRight] = placement === 'right', _b), className) },
        React.createElement("input", __assign({ "aria-describedby": buildDescribedBy({
                hasError: hasError,
                hasHelpMessage: !!helpMessage,
                uniqueId: uniqueId,
            }), className: clsx(classes.input, hasError && classes.error, (_c = {},
                _c[classes.inputInverse] = color === 'inverse',
                _c)), ref: ref, type: "checkbox", id: uniqueId, checked: checked, tabIndex: 0 }, rootProps)),
        React.createElement("div", { className: clsx(classes.labelContainer, fullWidth && classes.labelContainerFullWidth, (_d = {},
                _d[classes.labelContainerRight] = placement === 'right',
                _d), !label && ariaLabel && classes.srOnly) },
            React.createElement("label", { className: clsx(classes.label, fullWidth && classes.labelFullWidth), htmlFor: uniqueId },
                React.createElement(Text, { className: color === 'inverse' ? classes.labelInverse : undefined, size: "subbody" }, label || ariaLabel)),
            helpMessage && (React.createElement(FormHelpMessage, { className: classes.message, color: color, rootElementId: uniqueId, describedById: helpFor(uniqueId) }, helpMessage)),
            hasError && (React.createElement(FormErrorMessage, { className: classes.message, color: color, rootElementId: uniqueId, describedById: errorFor(uniqueId) }, errorMessage)))));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9nZ2xlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVG9nZ2xlL1RvZ2dsZS50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUN4QixPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBRTFDLE9BQU8sRUFFTCxnQkFBZ0IsRUFDaEIsUUFBUSxFQUNSLGdCQUFnQixFQUNoQixlQUFlLEVBQ2YsT0FBTyxHQUNSLE1BQU0sbUJBQW1CLENBQUM7QUFDM0IsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDeEQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUMvQixPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUV2RSxNQUFNLENBQUMsSUFBTSxlQUFlLEdBQUcsY0FBYyxDQUFDO0FBRTlDLE1BQU0sQ0FBQyxJQUFNLFNBQVMsR0FBRyxVQUFVLENBQ2pDLFVBQUMsS0FBSyxJQUFLLE9BQUEsQ0FBQztJQUNWLElBQUksRUFBRTtRQUNKLE9BQU8sRUFBRSxNQUFNO1FBQ2YsNEJBQTRCO1FBQzVCLG1DQUFtQyxFQUFFO1lBQ25DLFVBQVUsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLO1lBQ3RDLFNBQVMsRUFBRSxpQkFBaUI7WUFDNUIsVUFBVSxFQUNSLDREQUE0RDtTQUMvRDtRQUNELHNEQUFzRDtRQUN0RCwyQ0FBMkMsRUFBRTtZQUMzQyxVQUFVLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSztZQUN0QyxTQUFTLEVBQUUsa0JBQWtCO1NBQzlCO1FBQ0QsOERBQThEO1FBQzlELDBEQUEwRCxFQUFFO1lBQzFE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QUMsZUFBZSxJQUNkLFNBQVMsRUFBRSxPQUFPLENBQUMsT0FBTyxFQUMxQixLQUFLLEVBQUUsS0FBSyxFQUNaLGFBQWEsRUFBRSxRQUFRLEVBQ3ZCLGFBQWEsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUFDLElBRS9CLFdBQVcsQ0FDSSxDQUNuQjtZQUNBLFFBQVEsSUFBSSxDQUNYLG9CQUFDLGdCQUFnQixJQUNmLFNBQVMsRUFBRSxPQUFPLENBQUMsT0FBTyxFQUMxQixLQUFLLEVBQUUsS0FBSyxFQUNaLGFBQWEsRUFBRSxRQUFRLEVBQ3ZCLGFBQWEsRUFBRSxRQUFRLENBQUMsUUFBUSxDQUFDLElBRWhDLFlBQVksQ0FDSSxDQUNwQixDQUNHLENBQ0YsQ0FDUCxDQUFDO0FBQ0osQ0FBQyxDQUNGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2xzeCBmcm9tICdjbHN4JztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG1ha2VTdHlsZXMgfSBmcm9tICcuLi8uLi9zdHlsZXMnO1xuaW1wb3J0IHsgR2V0Q2xhc3NlcyB9IGZyb20gJy4uLy4uL3R5cGVVdGlscyc7XG5pbXBvcnQge1xuICBCYXNlRm9ybUVsZW1lbnQsXG4gIGJ1aWxkRGVzY3JpYmVkQnksXG4gIGVycm9yRm9yLFxuICBGb3JtRXJyb3JNZXNzYWdlLFxuICBGb3JtSGVscE1lc3NhZ2UsXG4gIGhlbHBGb3IsXG59IGZyb20gJy4uL19wcml2YXRlL2Zvcm1zJztcbmltcG9ydCB7IGdlbmVyYXRlVW5pcXVlSWQgfSBmcm9tICcuLi9fcHJpdmF0ZS9VbmlxdWVJZCc7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vVGV4dCc7XG5pbXBvcnQgeyBzY3JlZW5yZWFkZXJPbmx5U3R5bGVzIH0gZnJvbSAnLi4vLi4vc3R5bGVzL3NjcmVlbnJlYWRlck9ubHknO1xuXG5leHBvcnQgY29uc3QgVG9nZ2xlU3R5bGVzS2V5ID0gJ0Nocm9tYVRvZ2dsZSc7XG5cbmV4cG9ydCBjb25zdCB1c2VTdHlsZXMgPSBtYWtlU3R5bGVzKFxuICAodGhlbWUpID0+ICh7XG4gICAgcm9vdDoge1xuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgLy8gU2V0dXAgZGVmYXVsdCBiYWxsIHN0eWxlc1xuICAgICAgJyYgPiBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06OmFmdGVyJzoge1xuICAgICAgICBiYWNrZ3JvdW5kOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgwcHgpJyxcbiAgICAgICAgdHJhbnNpdGlvbjpcbiAgICAgICAgICAndHJhbnNmb3JtIC4zcyBjdWJpYy1iZXppZXIoLjIsIC44NSwgLjMyLCAxLjIpLCBvcGFjaXR5IC4ycycsXG4gICAgICB9LFxuICAgICAgLy8gVGFyZ2V0IHRoZSBiYWxsIHRvIG1vdmUgKmFuZCogY2hhbmdlIGNvbG9yIHRvIHdoaXRlXG4gICAgICAnJiA+IGlucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkOjphZnRlcic6IHtcbiAgICAgICAgYmFja2dyb3VuZDogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoMTdweCknLFxuICAgICAgfSxcbiAgICAgIC8vIFRhcmdldHMgdGhlIGJhbGwgd2hlbiB0aGUgaW5wdXQgaXMgZGlzYWJsZWQgYW5kIG5vdCBjaGVja2VkXG4gICAgICAnJiA+IGlucHV0W3R5cGU9XCJjaGVja2JveFwiXTpkaXNhYmxlZDpub3QoOmNoZWNrZWQpOjphZnRlcic6IHtcbiAgICAgICAgb3BhY2l0eTogMC42LFxuICAgICAgfSxcbiAgICB9LFxuICAgIGlucHV0OiB7XG4gICAgICBiYWNrZ3JvdW5kOiAncmdiYSgxMzIsIDEzNywgMTY2LCAwLjE1KScsXG4gICAgICBib3JkZXI6ICcxcHggc29saWQgdHJhbnNwYXJlbnQnLFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGVtZS5weFRvUmVtKDExKSxcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMjEpLFxuICAgICAgbWFyZ2luOiAwLFxuICAgICAgTW96QXBwZWFyYW5jZTogJ25vbmUnLFxuICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB0cmFuc2l0aW9uOiAnYmFja2dyb3VuZCAuM3MsIGJvcmRlci1jb2xvciAuM3MsIGJveC1zaGFkb3cgLjJzJyxcbiAgICAgIHZlcnRpY2FsQWxpZ246ICd0b3AnLFxuICAgICAgV2Via2l0QXBwZWFyYW5jZTogJ25vbmUnLFxuICAgICAgbWluV2lkdGg6IHRoZW1lLnB4VG9SZW0oMzgpLFxuICAgICAgJyY6YWZ0ZXInOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICAgICBjb250ZW50OiAnXCIgXCInLFxuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMTUpLFxuICAgICAgICBsZWZ0OiB0aGVtZS5weFRvUmVtKDIpLFxuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgdG9wOiB0aGVtZS5weFRvUmVtKDIpLFxuICAgICAgICB3aWR0aDogdGhlbWUucHhUb1JlbSgxNSksXG4gICAgICB9LFxuICAgICAgJyY6Y2hlY2tlZCc6IHtcbiAgICAgICAgYmFja2dyb3VuZDogdGhlbWUucGFsZXR0ZS5wcmltYXJ5Lm1haW4sXG4gICAgICAgIGJvcmRlcjogYDFweCBzb2xpZCAke3RoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWlufWAsXG4gICAgICB9LFxuICAgICAgJyY6ZGlzYWJsZWQnOiB7XG4gICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJyxcbiAgICAgICAgb3BhY2l0eTogMC42MjUsXG4gICAgICAgIC8vIEVuc3VyZSB0aGUgbGFiZWwgc2libGluZyBjYW5ub3QgYmUgY2xpY2tlZCBhcyB3ZWxsXG4gICAgICAgICcmICsgbGFiZWwnOiB7XG4gICAgICAgICAgY3Vyc29yOiAnbm90LWFsbG93ZWQnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgICcmOmZvY3VzJzoge1xuICAgICAgICBib3hTaGFkb3c6ICcwIDAgMCAycHggcmdiYSgwLCAxNTAsIDIyNSwgLjMpJyxcbiAgICAgIH0sXG4gICAgICAnJjpob3Zlcjpub3QoOmRpc2FibGVkKTpub3QoOmNoZWNrZWQpJzoge1xuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5wYWxldHRlLnByaW1hcnlbNzAwXX1gLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGlucHV0SW52ZXJzZToge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgyMzAsIDIzMSwgMjM3LCAwLjEpJyxcbiAgICAgIGJvcmRlcjogJzFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMiknLFxuICAgICAgbWl4QmxlbmRNb2RlOiAnaGFyZC1saWdodCcsXG4gICAgICAnJjpjaGVja2VkJzoge1xuICAgICAgICBiYWNrZ3JvdW5kOiB0aGVtZS5wYWxldHRlLnNlY29uZGFyeVs1MDBdLFxuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5wYWxldHRlLnNlY29uZGFyeVs1MDBdfWAsXG4gICAgICB9LFxuICAgICAgJyY6Zm9jdXMnOiB7XG4gICAgICAgIGJveFNoYWRvdzogJzAgMCAwIDJweCByZ2JhKDI1NSwgMjU1LCAyNTUsIC4zKScsXG4gICAgICB9LFxuICAgICAgJyY6aG92ZXI6bm90KDpkaXNhYmxlZCk6bm90KDpjaGVja2VkKSc6IHtcbiAgICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGV9YCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsYWJlbENvbnRhaW5lcjoge1xuICAgICAgZmxleDogJzAgYXV0bycsXG4gICAgICBtYXJnaW5MZWZ0OiB0aGVtZS5zcGFjaW5nKDEpLFxuICAgIH0sXG4gICAgbGFiZWw6IHtcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBtYXJnaW5Cb3R0b206IDAsXG4gICAgICBtYXJnaW5Ub3A6IHRoZW1lLnNwYWNpbmcoMC4yNSksXG4gICAgICB2ZXJ0aWNhbEFsaWduOiAndG9wJyxcbiAgICAgICcmIHAnOiB7XG4gICAgICAgIGxpbmVIZWlnaHQ6IDEuMjUsXG4gICAgICB9LFxuICAgIH0sXG4gICAgbGFiZWxJbnZlcnNlOiB7XG4gICAgICBjb2xvcjogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgfSxcbiAgICBtZXNzYWdlOiB7fSxcbiAgICBlcnJvcjoge1xuICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5yZWQubWFpbn1gLFxuICAgIH0sXG4gICAgcm9vdFJpZ2h0OiB7XG4gICAgICBmbGV4RmxvdzogJ3Jvdy1yZXZlcnNlJyxcbiAgICAgIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuICAgIH0sXG4gICAgbGFiZWxDb250YWluZXJSaWdodDoge1xuICAgICAgbWFyZ2luUmlnaHQ6IHRoZW1lLnNwYWNpbmcoMSksXG4gICAgICBtYXJnaW5MZWZ0OiAwLFxuICAgIH0sXG4gICAgbGFiZWxDb250YWluZXJGdWxsV2lkdGg6IHtcbiAgICAgIGZsZXg6IDEsXG4gICAgfSxcbiAgICBsYWJlbEZ1bGxXaWR0aDoge1xuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgIH0sXG4gICAgc3JPbmx5OiB7XG4gICAgICAuLi5zY3JlZW5yZWFkZXJPbmx5U3R5bGVzLFxuICAgIH0sXG4gIH0pLFxuICB7IG5hbWU6IFRvZ2dsZVN0eWxlc0tleSB9XG4pO1xuXG5leHBvcnQgdHlwZSBUb2dnbGVDbGFzc2VzID0gR2V0Q2xhc3Nlczx0eXBlb2YgdXNlU3R5bGVzPjtcblxuZXhwb3J0IGludGVyZmFjZSBUb2dnbGVQcm9wcyBleHRlbmRzIEJhc2VGb3JtRWxlbWVudCB7XG4gIGZ1bGxXaWR0aD86IGJvb2xlYW47XG4gIHBsYWNlbWVudD86ICdsZWZ0JyB8ICdyaWdodCc7XG59XG5cbmV4cG9ydCBjb25zdCBUb2dnbGUgPSBSZWFjdC5mb3J3YXJkUmVmPEhUTUxJbnB1dEVsZW1lbnQsIFRvZ2dsZVByb3BzPihcbiAgKFxuICAgIHtcbiAgICAgIFsnYXJpYS1sYWJlbCddOiBhcmlhTGFiZWwsXG4gICAgICBjaGVja2VkLFxuICAgICAgY2xhc3NOYW1lLFxuICAgICAgY29sb3IgPSAnZGVmYXVsdCcsXG4gICAgICBmdWxsV2lkdGgsXG4gICAgICBlcnJvck1lc3NhZ2UsXG4gICAgICBoYXNFcnJvcixcbiAgICAgIGhlbHBNZXNzYWdlLFxuICAgICAgaWQsXG4gICAgICBsYWJlbCxcbiAgICAgIG5hbWUsXG4gICAgICBwbGFjZW1lbnQgPSAnbGVmdCcsXG4gICAgICAuLi5yb290UHJvcHNcbiAgICB9LFxuICAgIHJlZlxuICApID0+IHtcbiAgICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKHt9KTtcblxuICAgIGNvbnN0IFt1bmlxdWVJZF0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmc+KFxuICAgICAgKCkgPT4gaWQgfHwgbmFtZSB8fCBnZW5lcmF0ZVVuaXF1ZUlkKCd0b2dnbGUtJylcbiAgICApO1xuXG4gICAgaWYgKCFsYWJlbCAmJiAhYXJpYUxhYmVsICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJZiBhIFwibGFiZWxcIiBpcyBub3QgcHJvdmlkZWQgdG8gVG9nZ2xlLCBwbGVhc2UgcHJvdmlkZSBcImFyaWEtbGFiZWxcIi4nXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICBjbGFzc2VzLnJvb3QsXG4gICAgICAgICAgeyBbY2xhc3Nlcy5yb290UmlnaHRdOiBwbGFjZW1lbnQgPT09ICdyaWdodCcgfSxcbiAgICAgICAgICBjbGFzc05hbWVcbiAgICAgICAgKX1cbiAgICAgID5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgYXJpYS1kZXNjcmliZWRieT17YnVpbGREZXNjcmliZWRCeSh7XG4gICAgICAgICAgICBoYXNFcnJvcixcbiAgICAgICAgICAgIGhhc0hlbHBNZXNzYWdlOiAhIWhlbHBNZXNzYWdlLFxuICAgICAgICAgICAgdW5pcXVlSWQsXG4gICAgICAgICAgfSl9XG4gICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KGNsYXNzZXMuaW5wdXQsIGhhc0Vycm9yICYmIGNsYXNzZXMuZXJyb3IsIHtcbiAgICAgICAgICAgIFtjbGFzc2VzLmlucHV0SW52ZXJzZV06IGNvbG9yID09PSAnaW52ZXJzZScsXG4gICAgICAgICAgfSl9XG4gICAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICBpZD17dW5pcXVlSWR9XG4gICAgICAgICAgY2hlY2tlZD17Y2hlY2tlZH1cbiAgICAgICAgICB0YWJJbmRleD17MH1cbiAgICAgICAgICB7Li4ucm9vdFByb3BzfVxuICAgICAgICAvPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPXtjbHN4KFxuICAgICAgICAgICAgY2xhc3Nlcy5sYWJlbENvbnRhaW5lcixcbiAgICAgICAgICAgIGZ1bGxXaWR0aCAmJiBjbGFzc2VzLmxhYmVsQ29udGFpbmVyRnVsbFdpZHRoLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBbY2xhc3Nlcy5sYWJlbENvbnRhaW5lclJpZ2h0XTogcGxhY2VtZW50ID09PSAncmlnaHQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICFsYWJlbCAmJiBhcmlhTGFiZWwgJiYgY2xhc3Nlcy5zck9ubHlcbiAgICAgICAgICApfVxuICAgICAgICA+XG4gICAgICAgICAgPGxhYmVsXG4gICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goY2xhc3Nlcy5sYWJlbCwgZnVsbFdpZHRoICYmIGNsYXNzZXMubGFiZWxGdWxsV2lkdGgpfVxuICAgICAgICAgICAgaHRtbEZvcj17dW5pcXVlSWR9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFRleHRcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjb2xvciA9PT0gJ2ludmVyc2UnID8gY2xhc3Nlcy5sYWJlbEludmVyc2UgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgIHNpemU9XCJzdWJib2R5XCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2xhYmVsIHx8IGFyaWFMYWJlbH1cbiAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgIHtoZWxwTWVzc2FnZSAmJiAoXG4gICAgICAgICAgICA8Rm9ybUhlbHBNZXNzYWdlXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy5tZXNzYWdlfVxuICAgICAgICAgICAgICBjb2xvcj17Y29sb3J9XG4gICAgICAgICAgICAgIHJvb3RFbGVtZW50SWQ9e3VuaXF1ZUlkfVxuICAgICAgICAgICAgICBkZXNjcmliZWRCeUlkPXtoZWxwRm9yKHVuaXF1ZUlkKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2hlbHBNZXNzYWdlfVxuICAgICAgICAgICAgPC9Gb3JtSGVscE1lc3NhZ2U+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7aGFzRXJyb3IgJiYgKFxuICAgICAgICAgICAgPEZvcm1FcnJvck1lc3NhZ2VcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc2VzLm1lc3NhZ2V9XG4gICAgICAgICAgICAgIGNvbG9yPXtjb2xvcn1cbiAgICAgICAgICAgICAgcm9vdEVsZW1lbnRJZD17dW5pcXVlSWR9XG4gICAgICAgICAgICAgIGRlc2NyaWJlZEJ5SWQ9e2Vycm9yRm9yKHVuaXF1ZUlkKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2Vycm9yTWVzc2FnZX1cbiAgICAgICAgICAgIDwvRm9ybUVycm9yTWVzc2FnZT5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbik7XG4iXX0=