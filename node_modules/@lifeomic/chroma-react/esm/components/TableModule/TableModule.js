var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
import 'focus-visible';
import { DotLoader } from '../DotLoader/index';
import { getTestProps } from '../../testUtils/getTestProps';
import { makeStyles } from '../../styles/index';
import { motion } from 'framer-motion';
import { TableHeaderCell } from './TableHeaderCell';
import { TableModuleRow } from './TableModuleRow';
import { warning } from '../../utils';
import * as React from 'react';
import clsx from 'clsx';
export var testIds = {
    bodyCell: 'tableModule-bodyCell',
    bodyRow: 'tableModule-bodyRow',
    headerCell: 'tableModule-headerCell',
    headerRow: 'tableModule-headerRow',
    isLoadingRow: 'tableModule-isLoadingRow',
    noResultsRow: 'tableModule-noResultsRow',
};
export var TableModuleStylesKey = 'ChromaTableModule';
export var useStyles = makeStyles(function (theme) { return ({
    root: {
        background: theme.palette.common.white,
        borderSpacing: 0,
        boxShadow: theme.boxShadows.table,
        display: 'table',
        overflowX: 'auto',
        width: '100%',
    },
    rounded: {
        borderRadius: theme.pxToRem(4),
    },
    tableHeader: {
        display: 'table-header-group',
    },
    tableRow: {
        background: theme.palette.common.white,
        color: 'inherit',
        display: 'table-row',
        outline: 'none',
        verticalAlign: 'middle',
        '&:hover': {
            '& $tableRowActionCell': {
                visibility: 'visible',
            },
        },
        '&:focus.focus-visible, &:focus-within': {
            '& $tableRowActionCell': {
                visibility: 'visible',
            },
        },
    },
    tableDataRow: {
        borderBottom: "1px solid ".concat(theme.palette.divider),
        '&:last-child': {
            borderBottom: 'none',
            // Hide table action cell bottom border
            // on the last table row to avoid 1px
            // vertical scroll
            '& $tableRowActionCell::after': {
                display: 'none',
            },
        },
        '&:hover': {
            background: "rgb(222, 244, 252, 0.25)",
            '& $tableModuleActions': {
                left: theme.pxToRem(8),
                opacity: 1,
                transition: '0.15s ease-out',
                transitionDelay: '0.15s',
            },
        },
        '&:focus.focus-visible, &:focus-within': {
            background: "rgb(222, 244, 252, 0.25)",
            '& $tableModuleActions': {
                left: theme.pxToRem(8),
                opacity: 1,
                transition: '0.15s ease-out',
                transitionDelay: '0.15s',
            },
        },
    },
    tableRowCell: {
        borderBottom: 'inherit',
        display: 'table-cell',
        fontSize: theme.typography.caption.fontSize,
        fontWeight: theme.typography.fontWeightRegular,
        paddingBottom: theme.spacing(1.75),
        paddingLeft: theme.spacing(2),
        paddingRight: theme.spacing(2),
        paddingTop: theme.spacing(1.75),
        textAlign: 'left',
        whiteSpace: 'nowrap',
        // First and last cells have default spacing
        // This matches the `TableHeaderCell`
        '&:first-of-type': {
            paddingLeft: theme.spacing(4),
        },
        '&:last-of-type': {
            paddingRight: theme.spacing(4),
        },
    },
    tableRowCellAlignRight: {
        textAlign: 'right',
    },
    tableRowCellTruncate: {
        textOverflow: 'ellipsis',
        overflow: 'hidden',
    },
    tableRowCellMaxWidth1: {
        maxWidth: '6.875rem',
    },
    tableRowCellMaxWidth2: {
        maxWidth: '10rem',
    },
    tableRowActionCell: {
        paddingTop: 0,
        paddingBottom: 0,
        paddingRight: 16,
        paddingLeft: 0,
        position: 'relative',
        textAlign: 'right',
        width: theme.pxToRem(1),
        // Add bottom border to table action row
        // when actions are hidden
        '&::after': {
            background: theme.palette.divider,
            content: "''",
            display: 'block',
            height: theme.pxToRem(1),
            left: 0,
            position: 'absolute',
            width: '100%',
            bottom: theme.pxToRem(-1),
        },
    },
    sticky: {
        position: 'sticky',
        right: 0,
    },
    tableModuleActions: {
        background: "linear-gradient(135deg,\n        ".concat(theme.palette.primary.light, " 0%,\n        ").concat(theme.palette.primary.main, " 22%,\n        ").concat(theme.palette.purple[700], " 92%)"),
        borderRadius: theme.pxToRem(16),
        boxShadow: theme.boxShadows.tooltip,
        display: 'inline-flex',
        minHeight: theme.pxToRem(32),
        left: 0,
        opacity: 0,
        paddingLeft: '0.75rem',
        paddingRight: '0.75rem',
        paddingTop: '0.2rem',
        paddingBottom: '0.2rem',
        position: 'relative',
        '& > button': {
            alignItems: 'center',
            justifyContent: 'center',
            minHeight: 0,
            // Add negative horizontal margins when there is
            // only one button so container appears as circle
            // instead of a pill shape
            '&:only-of-type': {
                marginLeft: theme.spacing(-0.375),
                marginRight: theme.spacing(-0.375),
            },
        },
    },
    tableLoadingCell: {
        borderBottom: 'inherit',
        display: 'table-cell',
        paddingBottom: theme.spacing(1),
        paddingLeft: theme.spacing(4),
        paddingTop: theme.spacing(1),
    },
    clickable: {
        '&:hover': {
            cursor: 'pointer',
        },
    },
}); }, { name: TableModuleStylesKey });
export var TableModule = React.memo(function (_a) {
    var _b = _a.config, config = _b === void 0 ? [] : _b, className = _a.className, data = _a.data, onRowClick = _a.onRowClick, _c = _a.isLoading, isLoading = _c === void 0 ? false : _c, rowRole = _a.rowRole, noResultsMessage = _a.noResultsMessage, _d = _a.sortState, sortState = _d === void 0 ? { sortKey: null, sortDirection: null } : _d, maxCellWidth = _a.maxCellWidth, rowActions = _a.rowActions, rowClickLabel = _a.rowClickLabel, rootProps = __rest(_a, ["config", "className", "data", "onRowClick", "isLoading", "rowRole", "noResultsMessage", "sortState", "maxCellWidth", "rowActions", "rowClickLabel"]);
    var classes = useStyles({});
    warning(Boolean(onRowClick) &&
        !rowClickLabel &&
        process.env.NODE_ENV === 'development', 'Chroma Warning: It is recommended you provide "rowClickLabel" if specifying a "onRowClick" for the <TableModule> component. This will be a required prop in a future major version.');
    var _e = React.useState(sortState), sort = _e[0], setSort = _e[1];
    var _f = React.useState((config === null || config === void 0 ? void 0 : config.map(function (c) { return c.header; })) || []), headings = _f[0], setHeadings = _f[1];
    var _g = React.useState((config === null || config === void 0 ? void 0 : config.map(function (c) { return c.cell; })) || []), cells = _g[0], setCells = _g[1];
    React.useEffect(function () {
        if (config.length > 0) {
            setHeadings(config.map(function (c) { return c.header; }));
            setCells(config.map(function (c) { return c.cell; }));
        }
    }, [config]);
    React.useEffect(function () {
        if (sortState.sortKey && headings) {
            var column = headings && headings[sortState.sortKey];
            column.onSort &&
                column.onSort({
                    index: sortState.sortKey,
                    sortDirection: sortState.sortDirection,
                    header: column,
                });
        }
    }, [headings, sortState.sortDirection, sortState.sortKey]);
    var handleSortColumnClick = function (_a) {
        var index = _a.index, sortDirection = _a.sortDirection, header = _a.header;
        // A column was clicked, and we either don't have a sort setup yet,
        // or we are moving from one column to another
        if (sort.sortKey !== index) {
            setSort({ sortKey: index, sortDirection: 'asc' });
            header.onSort && header.onSort({ index: index, sortDirection: 'asc', header: header });
            return;
        }
        // The same column was clicked, so we need to figure out
        // the sorting direction now
        if (!sortDirection) {
            setSort({ sortKey: index, sortDirection: 'asc' });
            header.onSort && header.onSort({ index: index, sortDirection: 'asc', header: header });
            return;
        }
        if (sortDirection === 'asc') {
            setSort({ sortKey: index, sortDirection: 'desc' });
            header.onSort &&
                header.onSort({ index: index, sortDirection: 'desc', header: header });
            return;
        }
        if (sortDirection === 'desc') {
            setSort({ sortKey: index, sortDirection: null });
            header.onSort && header.onSort({ index: index, sortDirection: null, header: header });
            return;
        }
    };
    return (React.createElement("table", __assign({ role: "table", className: clsx(classes.root, className) }, rootProps),
        React.createElement("thead", { className: classes.tableHeader },
            React.createElement("tr", __assign({ className: classes.tableRow, role: "row" }, getTestProps(testIds.headerRow)), headings === null || headings === void 0 ? void 0 :
                headings.map(function (header, i) { return (React.createElement(TableHeaderCell, __assign({ index: i, headingsCount: headings.length, key: i, header: header, isSorting: sort.sortKey === i, sortDirection: sort.sortDirection, onClick: handleSortColumnClick }, getTestProps(testIds.headerCell)))); }),
                (rowActions || onRowClick) && (React.createElement(TableHeaderCell, { header: {
                        label: '',
                    }, index: (headings === null || headings === void 0 ? void 0 : headings.length) + 1, headingsCount: headings.length, isSorting: false, sortDirection: sort.sortDirection })))),
        React.createElement("tbody", { role: "rowgroup" },
            !isLoading && data && data.length === 0 && (React.createElement("tr", __assign({ className: clsx(classes.tableRow, classes.tableDataRow), role: "row" }, getTestProps(testIds.noResultsRow)),
                React.createElement(motion.td, { className: classes.tableRowCell, colSpan: headings.length, role: "cell", initial: { opacity: 0 }, animate: { opacity: 1, transition: { duration: 1.5 } } }, noResultsMessage || 'No results'))), data === null || data === void 0 ? void 0 :
            data.map(function (row, rowIndex) {
                return (React.createElement(TableModuleRow, { key: "tableRow-".concat(rowIndex), data: row, onRowClick: onRowClick, rowRole: rowRole, maxCellWidth: maxCellWidth, row: row, headingsLength: headings === null || headings === void 0 ? void 0 : headings.length, cells: cells, rowActions: rowActions, rowClickLabel: rowClickLabel }));
            }),
            isLoading && (React.createElement("tr", __assign({ className: classes.tableRow }, getTestProps(testIds.isLoadingRow)),
                React.createElement("td", { className: classes.tableLoadingCell, colSpan: headings.length },
                    React.createElement(DotLoader, { size: 0 })))))));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGFibGVNb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9UYWJsZU1vZHVsZS9UYWJsZU1vZHVsZS50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE9BQU8sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUUvQyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDNUQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDdkMsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBUXRDLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQy9CLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUV4QixNQUFNLENBQUMsSUFBTSxPQUFPLEdBQUc7SUFDckIsUUFBUSxFQUFFLHNCQUFzQjtJQUNoQyxPQUFPLEVBQUUscUJBQXFCO0lBQzlCLFVBQVUsRUFBRSx3QkFBd0I7SUFDcEMsU0FBUyxFQUFFLHVCQUF1QjtJQUNsQyxZQUFZLEVBQUUsMEJBQTBCO0lBQ3hDLFlBQVksRUFBRSwwQkFBMEI7Q0FDekMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxJQUFNLG9CQUFvQixHQUFHLG1CQUFtQixDQUFDO0FBRXhELE1BQU0sQ0FBQyxJQUFNLFNBQVMsR0FBRyxVQUFVLENBQ2pDLFVBQUMsS0FBSyxJQUFLLE9BQUEsQ0FBQztJQUNWLElBQUksRUFBRTtRQUNKLFVBQVUsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FB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Q0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnZm9jdXMtdmlzaWJsZSc7XG5pbXBvcnQgeyBEb3RMb2FkZXIgfSBmcm9tICcuLi9Eb3RMb2FkZXIvaW5kZXgnO1xuaW1wb3J0IHsgR2V0Q2xhc3NlcyB9IGZyb20gJy4uLy4uL3R5cGVVdGlscyc7XG5pbXBvcnQgeyBnZXRUZXN0UHJvcHMgfSBmcm9tICcuLi8uLi90ZXN0VXRpbHMvZ2V0VGVzdFByb3BzJztcbmltcG9ydCB7IG1ha2VTdHlsZXMgfSBmcm9tICcuLi8uLi9zdHlsZXMvaW5kZXgnO1xuaW1wb3J0IHsgbW90aW9uIH0gZnJvbSAnZnJhbWVyLW1vdGlvbic7XG5pbXBvcnQgeyBUYWJsZUhlYWRlckNlbGwgfSBmcm9tICcuL1RhYmxlSGVhZGVyQ2VsbCc7XG5pbXBvcnQgeyBUYWJsZU1vZHVsZVJvdyB9IGZyb20gJy4vVGFibGVNb2R1bGVSb3cnO1xuaW1wb3J0IHsgd2FybmluZyB9IGZyb20gJy4uLy4uL3V0aWxzJztcbmltcG9ydCB7XG4gIFRhYmxlU29ydFN0YXRlLFxuICBUYWJsZUhlYWRlcixcbiAgVGFibGVDZWxsLFxuICBUYWJsZUNvbmZpZ3VyYXRpb24sXG4gIFRhYmxlU29ydENsaWNrUHJvcHMsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsc3ggZnJvbSAnY2xzeCc7XG5cbmV4cG9ydCBjb25zdCB0ZXN0SWRzID0ge1xuICBib2R5Q2VsbDogJ3RhYmxlTW9kdWxlLWJvZHlDZWxsJyxcbiAgYm9keVJvdzogJ3RhYmxlTW9kdWxlLWJvZHlSb3cnLFxuICBoZWFkZXJDZWxsOiAndGFibGVNb2R1bGUtaGVhZGVyQ2VsbCcsXG4gIGhlYWRlclJvdzogJ3RhYmxlTW9kdWxlLWhlYWRlclJvdycsXG4gIGlzTG9hZGluZ1JvdzogJ3RhYmxlTW9kdWxlLWlzTG9hZGluZ1JvdycsXG4gIG5vUmVzdWx0c1JvdzogJ3RhYmxlTW9kdWxlLW5vUmVzdWx0c1JvdycsXG59O1xuXG5leHBvcnQgY29uc3QgVGFibGVNb2R1bGVTdHlsZXNLZXkgPSAnQ2hyb21hVGFibGVNb2R1bGUnO1xuXG5leHBvcnQgY29uc3QgdXNlU3R5bGVzID0gbWFrZVN0eWxlcyhcbiAgKHRoZW1lKSA9PiAoe1xuICAgIHJvb3Q6IHtcbiAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgYm9yZGVyU3BhY2luZzogMCxcbiAgICAgIGJveFNoYWRvdzogdGhlbWUuYm94U2hhZG93cy50YWJsZSxcbiAgICAgIGRpc3BsYXk6ICd0YWJsZScsXG4gICAgICBvdmVyZmxvd1g6ICdhdXRvJyxcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgfSxcbiAgICByb3VuZGVkOiB7XG4gICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnB4VG9SZW0oNCksXG4gICAgfSxcbiAgICB0YWJsZUhlYWRlcjoge1xuICAgICAgZGlzcGxheTogJ3RhYmxlLWhlYWRlci1ncm91cCcsXG4gICAgfSxcbiAgICB0YWJsZVJvdzoge1xuICAgICAgYmFja2dyb3VuZDogdGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGUsXG4gICAgICBjb2xvcjogJ2luaGVyaXQnLFxuICAgICAgZGlzcGxheTogJ3RhYmxlLXJvdycsXG4gICAgICBvdXRsaW5lOiAnbm9uZScsXG4gICAgICB2ZXJ0aWNhbEFsaWduOiAnbWlkZGxlJyxcbiAgICAgICcmOmhvdmVyJzoge1xuICAgICAgICAnJiAkdGFibGVSb3dBY3Rpb25DZWxsJzoge1xuICAgICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICAnJjpmb2N1cy5mb2N1cy12aXNpYmxlLCAmOmZvY3VzLXdpdGhpbic6IHtcbiAgICAgICAgJyYgJHRhYmxlUm93QWN0aW9uQ2VsbCc6IHtcbiAgICAgICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZScsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgdGFibGVEYXRhUm93OiB7XG4gICAgICBib3JkZXJCb3R0b206IGAxcHggc29saWQgJHt0aGVtZS5wYWxldHRlLmRpdmlkZXJ9YCxcbiAgICAgICcmOmxhc3QtY2hpbGQnOiB7XG4gICAgICAgIGJvcmRlckJvdHRvbTogJ25vbmUnLFxuICAgICAgICAvLyBIaWRlIHRhYmxlIGFjdGlvbiBjZWxsIGJvdHRvbSBib3JkZXJcbiAgICAgICAgLy8gb24gdGhlIGxhc3QgdGFibGUgcm93IHRvIGF2b2lkIDFweFxuICAgICAgICAvLyB2ZXJ0aWNhbCBzY3JvbGxcbiAgICAgICAgJyYgJHRhYmxlUm93QWN0aW9uQ2VsbDo6YWZ0ZXInOiB7XG4gICAgICAgICAgZGlzcGxheTogJ25vbmUnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgICcmOmhvdmVyJzoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBgcmdiKDIyMiwgMjQ0LCAyNTIsIDAuMjUpYCxcbiAgICAgICAgJyYgJHRhYmxlTW9kdWxlQWN0aW9ucyc6IHtcbiAgICAgICAgICBsZWZ0OiB0aGVtZS5weFRvUmVtKDgpLFxuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgdHJhbnNpdGlvbjogJzAuMTVzIGVhc2Utb3V0JyxcbiAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk6ICcwLjE1cycsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgJyY6Zm9jdXMuZm9jdXMtdmlzaWJsZSwgJjpmb2N1cy13aXRoaW4nOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IGByZ2IoMjIyLCAyNDQsIDI1MiwgMC4yNSlgLFxuICAgICAgICAnJiAkdGFibGVNb2R1bGVBY3Rpb25zJzoge1xuICAgICAgICAgIGxlZnQ6IHRoZW1lLnB4VG9SZW0oOCksXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICB0cmFuc2l0aW9uOiAnMC4xNXMgZWFzZS1vdXQnLFxuICAgICAgICAgIHRyYW5zaXRpb25EZWxheTogJzAuMTVzJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB0YWJsZVJvd0NlbGw6IHtcbiAgICAgIGJvcmRlckJvdHRvbTogJ2luaGVyaXQnLFxuICAgICAgZGlzcGxheTogJ3RhYmxlLWNlbGwnLFxuICAgICAgZm9udFNpemU6IHRoZW1lLnR5cG9ncmFwaHkuY2FwdGlvbi5mb250U2l6ZSxcbiAgICAgIGZvbnRXZWlnaHQ6IHRoZW1lLnR5cG9ncmFwaHkuZm9udFdlaWdodFJlZ3VsYXIsXG4gICAgICBwYWRkaW5nQm90dG9tOiB0aGVtZS5zcGFjaW5nKDEuNzUpLFxuICAgICAgcGFkZGluZ0xlZnQ6IHRoZW1lLnNwYWNpbmcoMiksXG4gICAgICBwYWRkaW5nUmlnaHQ6IHRoZW1lLnNwYWNpbmcoMiksXG4gICAgICBwYWRkaW5nVG9wOiB0aGVtZS5zcGFjaW5nKDEuNzUpLFxuICAgICAgdGV4dEFsaWduOiAnbGVmdCcsXG4gICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgICAgIC8vIEZpcnN0IGFuZCBsYXN0IGNlbGxzIGhhdmUgZGVmYXVsdCBzcGFjaW5nXG4gICAgICAvLyBUaGlzIG1hdGNoZXMgdGhlIGBUYWJsZUhlYWRlckNlbGxgXG4gICAgICAnJjpmaXJzdC1vZi10eXBlJzoge1xuICAgICAgICBwYWRkaW5nTGVmdDogdGhlbWUuc3BhY2luZyg0KSxcbiAgICAgIH0sXG4gICAgICAnJjpsYXN0LW9mLXR5cGUnOiB7XG4gICAgICAgIHBhZGRpbmdSaWdodDogdGhlbWUuc3BhY2luZyg0KSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB0YWJsZVJvd0NlbGxBbGlnblJpZ2h0OiB7XG4gICAgICB0ZXh0QWxpZ246ICdyaWdodCcsXG4gICAgfSxcbiAgICB0YWJsZVJvd0NlbGxUcnVuY2F0ZToge1xuICAgICAgdGV4dE92ZXJmbG93OiAnZWxsaXBzaXMnLFxuICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgIH0sXG4gICAgdGFibGVSb3dDZWxsTWF4V2lkdGgxOiB7XG4gICAgICBtYXhXaWR0aDogJzYuODc1cmVtJyxcbiAgICB9LFxuICAgIHRhYmxlUm93Q2VsbE1heFdpZHRoMjoge1xuICAgICAgbWF4V2lkdGg6ICcxMHJlbScsXG4gICAgfSxcbiAgICB0YWJsZVJvd0FjdGlvbkNlbGw6IHtcbiAgICAgIHBhZGRpbmdUb3A6IDAsXG4gICAgICBwYWRkaW5nQm90dG9tOiAwLFxuICAgICAgcGFkZGluZ1JpZ2h0OiAxNixcbiAgICAgIHBhZGRpbmdMZWZ0OiAwLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB0ZXh0QWxpZ246ICdyaWdodCcsXG4gICAgICB3aWR0aDogdGhlbWUucHhUb1JlbSgxKSxcbiAgICAgIC8vIEFkZCBib3R0b20gYm9yZGVyIHRvIHRhYmxlIGFjdGlvbiByb3dcbiAgICAgIC8vIHdoZW4gYWN0aW9ucyBhcmUgaGlkZGVuXG4gICAgICAnJjo6YWZ0ZXInOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUuZGl2aWRlcixcbiAgICAgICAgY29udGVudDogYCcnYCxcbiAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgaGVpZ2h0OiB0aGVtZS5weFRvUmVtKDEpLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgYm90dG9tOiB0aGVtZS5weFRvUmVtKC0xKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBzdGlja3k6IHtcbiAgICAgIHBvc2l0aW9uOiAnc3RpY2t5JyxcbiAgICAgIHJpZ2h0OiAwLFxuICAgIH0sXG4gICAgdGFibGVNb2R1bGVBY3Rpb25zOiB7XG4gICAgICBiYWNrZ3JvdW5kOiBgbGluZWFyLWdyYWRpZW50KDEzNWRlZyxcbiAgICAgICAgJHt0aGVtZS5wYWxldHRlLnByaW1hcnkubGlnaHR9IDAlLFxuICAgICAgICAke3RoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWlufSAyMiUsXG4gICAgICAgICR7dGhlbWUucGFsZXR0ZS5wdXJwbGVbNzAwXX0gOTIlKWAsXG4gICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLnB4VG9SZW0oMTYpLFxuICAgICAgYm94U2hhZG93OiB0aGVtZS5ib3hTaGFkb3dzLnRvb2x0aXAsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWZsZXgnLFxuICAgICAgbWluSGVpZ2h0OiB0aGVtZS5weFRvUmVtKDMyKSxcbiAgICAgIGxlZnQ6IDAsXG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgcGFkZGluZ0xlZnQ6ICcwLjc1cmVtJyxcbiAgICAgIHBhZGRpbmdSaWdodDogJzAuNzVyZW0nLFxuICAgICAgcGFkZGluZ1RvcDogJzAuMnJlbScsXG4gICAgICBwYWRkaW5nQm90dG9tOiAnMC4ycmVtJyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgJyYgPiBidXR0b24nOiB7XG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgIG1pbkhlaWdodDogMCxcbiAgICAgICAgLy8gQWRkIG5lZ2F0aXZlIGhvcml6b250YWwgbWFyZ2lucyB3aGVuIHRoZXJlIGlzXG4gICAgICAgIC8vIG9ubHkgb25lIGJ1dHRvbiBzbyBjb250YWluZXIgYXBwZWFycyBhcyBjaXJjbGVcbiAgICAgICAgLy8gaW5zdGVhZCBvZiBhIHBpbGwgc2hhcGVcbiAgICAgICAgJyY6b25seS1vZi10eXBlJzoge1xuICAgICAgICAgIG1hcmdpbkxlZnQ6IHRoZW1lLnNwYWNpbmcoLTAuMzc1KSxcbiAgICAgICAgICBtYXJnaW5SaWdodDogdGhlbWUuc3BhY2luZygtMC4zNzUpLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIHRhYmxlTG9hZGluZ0NlbGw6IHtcbiAgICAgIGJvcmRlckJvdHRvbTogJ2luaGVyaXQnLFxuICAgICAgZGlzcGxheTogJ3RhYmxlLWNlbGwnLFxuICAgICAgcGFkZGluZ0JvdHRvbTogdGhlbWUuc3BhY2luZygxKSxcbiAgICAgIHBhZGRpbmdMZWZ0OiB0aGVtZS5zcGFjaW5nKDQpLFxuICAgICAgcGFkZGluZ1RvcDogdGhlbWUuc3BhY2luZygxKSxcbiAgICB9LFxuICAgIGNsaWNrYWJsZToge1xuICAgICAgJyY6aG92ZXInOiB7XG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgfSxcbiAgICB9LFxuICB9KSxcbiAgeyBuYW1lOiBUYWJsZU1vZHVsZVN0eWxlc0tleSB9XG4pO1xuXG5leHBvcnQgdHlwZSBUYWJsZU1vZHVsZUNsYXNzZXMgPSBHZXRDbGFzc2VzPHR5cGVvZiB1c2VTdHlsZXM+O1xuXG5leHBvcnQgaW50ZXJmYWNlIFRhYmxlTW9kdWxlUHJvcHM8SXRlbSA9IGFueT5cbiAgZXh0ZW5kcyBSZWFjdC5EZXRhaWxlZEhUTUxQcm9wczxcbiAgICBSZWFjdC5IVE1MQXR0cmlidXRlczxIVE1MVGFibGVFbGVtZW50PixcbiAgICBIVE1MVGFibGVFbGVtZW50XG4gID4ge1xuICBjb25maWc/OiBBcnJheTxUYWJsZUNvbmZpZ3VyYXRpb248SXRlbT4+O1xuICBkYXRhPzogQXJyYXk8YW55PjtcbiAgaXNMb2FkaW5nPzogYm9vbGVhbjtcbiAgb25Sb3dDbGljaz86IChyb3c6IGFueSkgPT4gdm9pZDtcbiAgcm93Um9sZT86ICdsaW5rJztcbiAgbm9SZXN1bHRzTWVzc2FnZT86IHN0cmluZztcbiAgc29ydFN0YXRlPzogVGFibGVTb3J0U3RhdGU7XG4gIG1heENlbGxXaWR0aD86IDEgfCAyO1xuICByb3dBY3Rpb25zPzogKHJvdzogYW55KSA9PiBSZWFjdC5SZWFjdE5vZGU7XG4gIHJvd0NsaWNrTGFiZWw/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBUYWJsZU1vZHVsZTogUmVhY3QuRkM8VGFibGVNb2R1bGVQcm9wcz4gPSBSZWFjdC5tZW1vKFxuICAoe1xuICAgIGNvbmZpZyA9IFtdLFxuICAgIGNsYXNzTmFtZSxcbiAgICBkYXRhLFxuICAgIG9uUm93Q2xpY2ssXG4gICAgaXNMb2FkaW5nID0gZmFsc2UsXG4gICAgcm93Um9sZSxcbiAgICBub1Jlc3VsdHNNZXNzYWdlLFxuICAgIHNvcnRTdGF0ZSA9IHsgc29ydEtleTogbnVsbCwgc29ydERpcmVjdGlvbjogbnVsbCB9LFxuICAgIG1heENlbGxXaWR0aCxcbiAgICByb3dBY3Rpb25zLFxuICAgIHJvd0NsaWNrTGFiZWwsXG4gICAgLi4ucm9vdFByb3BzXG4gIH0pID0+IHtcbiAgICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKHt9KTtcblxuICAgIHdhcm5pbmcoXG4gICAgICBCb29sZWFuKG9uUm93Q2xpY2spICYmXG4gICAgICAgICFyb3dDbGlja0xhYmVsICYmXG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnLFxuICAgICAgJ0Nocm9tYSBXYXJuaW5nOiBJdCBpcyByZWNvbW1lbmRlZCB5b3UgcHJvdmlkZSBcInJvd0NsaWNrTGFiZWxcIiBpZiBzcGVjaWZ5aW5nIGEgXCJvblJvd0NsaWNrXCIgZm9yIHRoZSA8VGFibGVNb2R1bGU+IGNvbXBvbmVudC4gVGhpcyB3aWxsIGJlIGEgcmVxdWlyZWQgcHJvcCBpbiBhIGZ1dHVyZSBtYWpvciB2ZXJzaW9uLidcbiAgICApO1xuXG4gICAgY29uc3QgW3NvcnQsIHNldFNvcnRdID0gUmVhY3QudXNlU3RhdGU8VGFibGVTb3J0U3RhdGU+KHNvcnRTdGF0ZSk7XG5cbiAgICBjb25zdCBbaGVhZGluZ3MsIHNldEhlYWRpbmdzXSA9IFJlYWN0LnVzZVN0YXRlPEFycmF5PFRhYmxlSGVhZGVyPj4oXG4gICAgICBjb25maWc/Lm1hcCgoYykgPT4gYy5oZWFkZXIpIHx8IFtdXG4gICAgKTtcbiAgICBjb25zdCBbY2VsbHMsIHNldENlbGxzXSA9IFJlYWN0LnVzZVN0YXRlPEFycmF5PFRhYmxlQ2VsbD4+KFxuICAgICAgY29uZmlnPy5tYXAoKGMpID0+IGMuY2VsbCkgfHwgW11cbiAgICApO1xuXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmIChjb25maWcubGVuZ3RoID4gMCkge1xuICAgICAgICBzZXRIZWFkaW5ncyhjb25maWcubWFwKChjKSA9PiBjLmhlYWRlcikpO1xuICAgICAgICBzZXRDZWxscyhjb25maWcubWFwKChjKSA9PiBjLmNlbGwpKTtcbiAgICAgIH1cbiAgICB9LCBbY29uZmlnXSk7XG5cbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKHNvcnRTdGF0ZS5zb3J0S2V5ICYmIGhlYWRpbmdzKSB7XG4gICAgICAgIGNvbnN0IGNvbHVtbiA9IGhlYWRpbmdzICYmIGhlYWRpbmdzW3NvcnRTdGF0ZS5zb3J0S2V5XTtcbiAgICAgICAgY29sdW1uLm9uU29ydCAmJlxuICAgICAgICAgIGNvbHVtbi5vblNvcnQoe1xuICAgICAgICAgICAgaW5kZXg6IHNvcnRTdGF0ZS5zb3J0S2V5LFxuICAgICAgICAgICAgc29ydERpcmVjdGlvbjogc29ydFN0YXRlLnNvcnREaXJlY3Rpb24sXG4gICAgICAgICAgICBoZWFkZXI6IGNvbHVtbixcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCBbaGVhZGluZ3MsIHNvcnRTdGF0ZS5zb3J0RGlyZWN0aW9uLCBzb3J0U3RhdGUuc29ydEtleV0pO1xuXG4gICAgY29uc3QgaGFuZGxlU29ydENvbHVtbkNsaWNrID0gKHtcbiAgICAgIGluZGV4LFxuICAgICAgc29ydERpcmVjdGlvbixcbiAgICAgIGhlYWRlcixcbiAgICB9OiBUYWJsZVNvcnRDbGlja1Byb3BzKSA9PiB7XG4gICAgICAvLyBBIGNvbHVtbiB3YXMgY2xpY2tlZCwgYW5kIHdlIGVpdGhlciBkb24ndCBoYXZlIGEgc29ydCBzZXR1cCB5ZXQsXG4gICAgICAvLyBvciB3ZSBhcmUgbW92aW5nIGZyb20gb25lIGNvbHVtbiB0byBhbm90aGVyXG4gICAgICBpZiAoc29ydC5zb3J0S2V5ICE9PSBpbmRleCkge1xuICAgICAgICBzZXRTb3J0KHsgc29ydEtleTogaW5kZXgsIHNvcnREaXJlY3Rpb246ICdhc2MnIH0pO1xuICAgICAgICBoZWFkZXIub25Tb3J0ICYmIGhlYWRlci5vblNvcnQoeyBpbmRleCwgc29ydERpcmVjdGlvbjogJ2FzYycsIGhlYWRlciB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGUgc2FtZSBjb2x1bW4gd2FzIGNsaWNrZWQsIHNvIHdlIG5lZWQgdG8gZmlndXJlIG91dFxuICAgICAgLy8gdGhlIHNvcnRpbmcgZGlyZWN0aW9uIG5vd1xuICAgICAgaWYgKCFzb3J0RGlyZWN0aW9uKSB7XG4gICAgICAgIHNldFNvcnQoeyBzb3J0S2V5OiBpbmRleCwgc29ydERpcmVjdGlvbjogJ2FzYycgfSk7XG4gICAgICAgIGhlYWRlci5vblNvcnQgJiYgaGVhZGVyLm9uU29ydCh7IGluZGV4LCBzb3J0RGlyZWN0aW9uOiAnYXNjJywgaGVhZGVyIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChzb3J0RGlyZWN0aW9uID09PSAnYXNjJykge1xuICAgICAgICBzZXRTb3J0KHsgc29ydEtleTogaW5kZXgsIHNvcnREaXJlY3Rpb246ICdkZXNjJyB9KTtcbiAgICAgICAgaGVhZGVyLm9uU29ydCAmJlxuICAgICAgICAgIGhlYWRlci5vblNvcnQoeyBpbmRleCwgc29ydERpcmVjdGlvbjogJ2Rlc2MnLCBoZWFkZXIgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHNvcnREaXJlY3Rpb24gPT09ICdkZXNjJykge1xuICAgICAgICBzZXRTb3J0KHsgc29ydEtleTogaW5kZXgsIHNvcnREaXJlY3Rpb246IG51bGwgfSk7XG4gICAgICAgIGhlYWRlci5vblNvcnQgJiYgaGVhZGVyLm9uU29ydCh7IGluZGV4LCBzb3J0RGlyZWN0aW9uOiBudWxsLCBoZWFkZXIgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDx0YWJsZVxuICAgICAgICByb2xlPVwidGFibGVcIlxuICAgICAgICBjbGFzc05hbWU9e2Nsc3goY2xhc3Nlcy5yb290LCBjbGFzc05hbWUpfVxuICAgICAgICB7Li4ucm9vdFByb3BzfVxuICAgICAgPlxuICAgICAgICA8dGhlYWQgY2xhc3NOYW1lPXtjbGFzc2VzLnRhYmxlSGVhZGVyfT5cbiAgICAgICAgICA8dHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy50YWJsZVJvd31cbiAgICAgICAgICAgIHJvbGU9XCJyb3dcIlxuICAgICAgICAgICAgey4uLmdldFRlc3RQcm9wcyh0ZXN0SWRzLmhlYWRlclJvdyl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2hlYWRpbmdzPy5tYXAoKGhlYWRlciwgaSkgPT4gKFxuICAgICAgICAgICAgICA8VGFibGVIZWFkZXJDZWxsXG4gICAgICAgICAgICAgICAgaW5kZXg9e2l9XG4gICAgICAgICAgICAgICAgaGVhZGluZ3NDb3VudD17aGVhZGluZ3MubGVuZ3RofVxuICAgICAgICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICAgICAgICBoZWFkZXI9e2hlYWRlcn1cbiAgICAgICAgICAgICAgICBpc1NvcnRpbmc9e3NvcnQuc29ydEtleSA9PT0gaX1cbiAgICAgICAgICAgICAgICBzb3J0RGlyZWN0aW9uPXtzb3J0LnNvcnREaXJlY3Rpb259XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU29ydENvbHVtbkNsaWNrfVxuICAgICAgICAgICAgICAgIHsuLi5nZXRUZXN0UHJvcHModGVzdElkcy5oZWFkZXJDZWxsKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgeyhyb3dBY3Rpb25zIHx8IG9uUm93Q2xpY2spICYmIChcbiAgICAgICAgICAgICAgPFRhYmxlSGVhZGVyQ2VsbFxuICAgICAgICAgICAgICAgIGhlYWRlcj17e1xuICAgICAgICAgICAgICAgICAgbGFiZWw6ICcnLFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgaW5kZXg9e2hlYWRpbmdzPy5sZW5ndGggKyAxfVxuICAgICAgICAgICAgICAgIGhlYWRpbmdzQ291bnQ9e2hlYWRpbmdzLmxlbmd0aH1cbiAgICAgICAgICAgICAgICBpc1NvcnRpbmc9e2ZhbHNlfVxuICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb249e3NvcnQuc29ydERpcmVjdGlvbn1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgPC90aGVhZD5cbiAgICAgICAgPHRib2R5IHJvbGU9XCJyb3dncm91cFwiPlxuICAgICAgICAgIHshaXNMb2FkaW5nICYmIGRhdGEgJiYgZGF0YS5sZW5ndGggPT09IDAgJiYgKFxuICAgICAgICAgICAgPHRyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChjbGFzc2VzLnRhYmxlUm93LCBjbGFzc2VzLnRhYmxlRGF0YVJvdyl9XG4gICAgICAgICAgICAgIHJvbGU9XCJyb3dcIlxuICAgICAgICAgICAgICB7Li4uZ2V0VGVzdFByb3BzKHRlc3RJZHMubm9SZXN1bHRzUm93KX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPG1vdGlvbi50ZFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy50YWJsZVJvd0NlbGx9XG4gICAgICAgICAgICAgICAgY29sU3Bhbj17aGVhZGluZ3MubGVuZ3RofVxuICAgICAgICAgICAgICAgIHJvbGU9XCJjZWxsXCJcbiAgICAgICAgICAgICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAgfX1cbiAgICAgICAgICAgICAgICBhbmltYXRlPXt7IG9wYWNpdHk6IDEsIHRyYW5zaXRpb246IHsgZHVyYXRpb246IDEuNSB9IH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7bm9SZXN1bHRzTWVzc2FnZSB8fCAnTm8gcmVzdWx0cyd9XG4gICAgICAgICAgICAgIDwvbW90aW9uLnRkPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtkYXRhPy5tYXAoKHJvdywgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxUYWJsZU1vZHVsZVJvd1xuICAgICAgICAgICAgICAgIGtleT17YHRhYmxlUm93LSR7cm93SW5kZXh9YH1cbiAgICAgICAgICAgICAgICBkYXRhPXtyb3d9XG4gICAgICAgICAgICAgICAgb25Sb3dDbGljaz17b25Sb3dDbGlja31cbiAgICAgICAgICAgICAgICByb3dSb2xlPXtyb3dSb2xlfVxuICAgICAgICAgICAgICAgIG1heENlbGxXaWR0aD17bWF4Q2VsbFdpZHRofVxuICAgICAgICAgICAgICAgIHJvdz17cm93fVxuICAgICAgICAgICAgICAgIGhlYWRpbmdzTGVuZ3RoPXtoZWFkaW5ncz8ubGVuZ3RofVxuICAgICAgICAgICAgICAgIGNlbGxzPXtjZWxsc31cbiAgICAgICAgICAgICAgICByb3dBY3Rpb25zPXtyb3dBY3Rpb25zfVxuICAgICAgICAgICAgICAgIHJvd0NsaWNrTGFiZWw9e3Jvd0NsaWNrTGFiZWx9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICAgIHtpc0xvYWRpbmcgJiYgKFxuICAgICAgICAgICAgPHRyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy50YWJsZVJvd31cbiAgICAgICAgICAgICAgey4uLmdldFRlc3RQcm9wcyh0ZXN0SWRzLmlzTG9hZGluZ1Jvdyl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDx0ZFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy50YWJsZUxvYWRpbmdDZWxsfVxuICAgICAgICAgICAgICAgIGNvbFNwYW49e2hlYWRpbmdzLmxlbmd0aH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxEb3RMb2FkZXIgc2l6ZT17MH0gLz5cbiAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC90Ym9keT5cbiAgICAgIDwvdGFibGU+XG4gICAgKTtcbiAgfVxuKTtcbiJdfQ==