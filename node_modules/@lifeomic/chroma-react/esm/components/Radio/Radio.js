var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
import clsx from 'clsx';
import * as React from 'react';
import { makeStyles } from '../../styles';
import { buildDescribedBy, FormHelpMessage, helpFor, } from '../_private/forms';
import { generateUniqueId } from '../_private/UniqueId';
import { Text } from '../Text';
import { useRadioGroup } from './useRadioGroup';
export var RadioStylesKey = 'ChromaRadio';
export var useStyles = makeStyles(function (theme) { return ({
    root: {
        display: 'flex',
        '& > input[type="radio"]::after': {
            opacity: 0,
            transition: 'transform .3s cubic-bezier(.2, .85, .32, 1.2), opacity .2s',
        },
        '& > input[type="radio"]:checked::after': {
            opacity: 1,
        },
    },
    input: {
        background: 'rgba(132, 137, 166, 0.15)',
        border: '1px solid transparent',
        borderRadius: '50%',
        cursor: 'pointer',
        display: 'inline-block',
        height: theme.pxToRem(21),
        margin: 0,
        MozAppearance: 'none',
        outline: 'none',
        position: 'relative',
        transition: 'background .3s, border-color .3s, box-shadow .2s',
        verticalAlign: 'top',
        WebkitAppearance: 'none',
        width: theme.pxToRem(21),
        '&:after': {
            background: theme.palette.common.white,
            borderRadius: '50%',
            content: '" "',
            display: 'block',
            position: 'absolute',
            top: 0,
            left: 0,
            transform: 'scale(0.5)',
            height: theme.pxToRem(19),
            width: theme.pxToRem(19),
        },
        '&:checked': {
            background: theme.palette.primary.main,
        },
        '&:disabled': {
            cursor: 'not-allowed',
            opacity: 0.625,
            // Ensure the label sibling cannot be clicked as well
            '& + label': {
                cursor: 'not-allowed',
            },
        },
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(0, 150, 225, .3)',
        },
        '&:hover:not(:disabled):not(:checked)': {
            border: "1px solid " + theme.palette.primary[700],
        },
    },
    inputInverse: {
        backgroundColor: 'rgba(230, 231, 237, 0.1)',
        '&:checked': {
            backgroundColor: 'rgba(230, 231, 237, 0.1)',
            border: "1px solid rgba(230, 231, 237, 0.55)",
        },
        '&:focus': {
            boxShadow: '0 0 0 2px rgba(255, 255, 255, .3)',
        },
        '&:hover:not(:disabled):not(:checked)': {
            border: "1px solid " + theme.palette.common.white,
        },
    },
    labelContainer: {
        flex: 1,
        marginLeft: theme.spacing(1),
    },
    label: {
        cursor: 'pointer',
        display: 'inline-block',
        marginBottom: 0,
        marginTop: theme.spacing(0.25),
        verticalAlign: 'top',
        '& p': {
            lineHeight: 1.25,
        },
    },
    labelInverse: {
        color: theme.palette.common.white,
    },
}); }, { name: RadioStylesKey });
export var Radio = React.forwardRef(function (_a, ref) {
    var _b;
    var className = _a.className, children = _a.children, _c = _a.checked, checked = _c === void 0 ? false : _c, color = _a.color, helpMessage = _a.helpMessage, id = _a.id, label = _a.label, value = _a.value, rootProps = __rest(_a, ["className", "children", "checked", "color", "helpMessage", "id", "label", "value"]);
    var classes = useStyles({});
    var uniqueId = React.useState(function () { return id || generateUniqueId('radio-'); })[0];
    var _d = useRadioGroup(), colorFromContext = _d.color, nameFromContext = _d.name, valueFromContext = _d.value, onChangeFromContext = _d.onChange;
    var handleChange = function (e) {
        onChangeFromContext && onChangeFromContext(e);
    };
    return (React.createElement("div", { className: clsx(classes.root, className) },
        React.createElement("input", __assign({ "aria-describedby": buildDescribedBy({
                hasHelpMessage: !!helpMessage,
                uniqueId: uniqueId,
            }), className: clsx(classes.input, (_b = {},
                _b[classes.inputInverse] = color === 'inverse' || colorFromContext === 'inverse',
                _b)), ref: ref, role: "radio", type: "radio", id: uniqueId, tabIndex: 0, name: nameFromContext, value: value, onChange: handleChange, checked: checked || valueFromContext
                ? valueFromContext === value || checked
                : undefined }, rootProps)),
        React.createElement("div", { className: classes.labelContainer },
            React.createElement("label", { className: classes.label, htmlFor: uniqueId },
                React.createElement(Text, { size: "subbody", className: color === 'inverse' || colorFromContext === 'inverse'
                        ? classes.labelInverse
                        : undefined }, label)),
            helpMessage && (React.createElement(FormHelpMessage, { color: color || colorFromContext, rootElementId: uniqueId, describedById: helpFor(uniqueId) }, helpMessage))),
        children));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFkaW8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9SYWRpby9SYWRpby50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUN4QixPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBRTFDLE9BQU8sRUFFTCxnQkFBZ0IsRUFDaEIsZUFBZSxFQUNmLE9BQU8sR0FDUixNQUFNLG1CQUFtQixDQUFDO0FBQzNCLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFDL0IsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRWhELE1BQU0sQ0FBQyxJQUFNLGNBQWMsR0FBRyxhQUFhLENBQUM7QUFFNUMsTUFBTSxDQUFDLElBQU0sU0FBUyxHQUFHLFVBQVUsQ0FDakMsVUFBQyxLQUFLLElBQUssT0FBQSxDQUFDO0lBQ1YsSUFBSSxFQUFFO1FBQ0osT0FBTyxFQUFFLE1BQU07UUFDZixnQ0FBZ0MsRUFBRTtZQUNoQyxPQUFPLEVBQUUsQ0FBQztZQUNWLFVBQVUsRUFDUiw0REFBNEQ7U0FDL0Q7UUFDRCx3Q0FBd0MsRUFBRTtZQUN4QyxPQUFPLEVBQUUsQ0FBQztTQUNYO0tBQ0Y7SUFDRCxLQUFLLEVBQUU7UUFDTCxVQUFVLEVBQUUsMkJBQTJCO1FBQ3ZDLE1BQU0sRUFBRSx1QkFBdUI7UUFDL0IsWUFBWSxFQUFFLEtBQUs7UUFDbkIsTUFBTSxFQUFFLFNBQVM7UUFDakIsT0FBTyxFQUFFLGNBQWM7UUFDdkIsTUFBTSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQ3pCLE1BQU0sRUFBRSxDQUFDO1FB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QUssRUFBRSxLQUFLLElBQUksZ0JBQWdCLEVBQ2hDLGFBQWEsRUFBRSxRQUFRLEVBQ3ZCLGFBQWEsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUFDLElBRS9CLFdBQVcsQ0FDSSxDQUNuQixDQUNHO1FBQ0wsUUFBUSxDQUNMLENBQ1AsQ0FBQztBQUNKLENBQUMsQ0FDRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNsc3ggZnJvbSAnY2xzeCc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtYWtlU3R5bGVzIH0gZnJvbSAnLi4vLi4vc3R5bGVzJztcbmltcG9ydCB7IEdldENsYXNzZXMgfSBmcm9tICcuLi8uLi90eXBlVXRpbHMnO1xuaW1wb3J0IHtcbiAgQmFzZUZvcm1FbGVtZW50LFxuICBidWlsZERlc2NyaWJlZEJ5LFxuICBGb3JtSGVscE1lc3NhZ2UsXG4gIGhlbHBGb3IsXG59IGZyb20gJy4uL19wcml2YXRlL2Zvcm1zJztcbmltcG9ydCB7IGdlbmVyYXRlVW5pcXVlSWQgfSBmcm9tICcuLi9fcHJpdmF0ZS9VbmlxdWVJZCc7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnLi4vVGV4dCc7XG5pbXBvcnQgeyB1c2VSYWRpb0dyb3VwIH0gZnJvbSAnLi91c2VSYWRpb0dyb3VwJztcblxuZXhwb3J0IGNvbnN0IFJhZGlvU3R5bGVzS2V5ID0gJ0Nocm9tYVJhZGlvJztcblxuZXhwb3J0IGNvbnN0IHVzZVN0eWxlcyA9IG1ha2VTdHlsZXMoXG4gICh0aGVtZSkgPT4gKHtcbiAgICByb290OiB7XG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAnJiA+IGlucHV0W3R5cGU9XCJyYWRpb1wiXTo6YWZ0ZXInOiB7XG4gICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgIHRyYW5zaXRpb246XG4gICAgICAgICAgJ3RyYW5zZm9ybSAuM3MgY3ViaWMtYmV6aWVyKC4yLCAuODUsIC4zMiwgMS4yKSwgb3BhY2l0eSAuMnMnLFxuICAgICAgfSxcbiAgICAgICcmID4gaW5wdXRbdHlwZT1cInJhZGlvXCJdOmNoZWNrZWQ6OmFmdGVyJzoge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGlucHV0OiB7XG4gICAgICBiYWNrZ3JvdW5kOiAncmdiYSgxMzIsIDEzNywgMTY2LCAwLjE1KScsXG4gICAgICBib3JkZXI6ICcxcHggc29saWQgdHJhbnNwYXJlbnQnLFxuICAgICAgYm9yZGVyUmFkaXVzOiAnNTAlJyxcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG4gICAgICBoZWlnaHQ6IHRoZW1lLnB4VG9SZW0oMjEpLFxuICAgICAgbWFyZ2luOiAwLFxuICAgICAgTW96QXBwZWFyYW5jZTogJ25vbmUnLFxuICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB0cmFuc2l0aW9uOiAnYmFja2dyb3VuZCAuM3MsIGJvcmRlci1jb2xvciAuM3MsIGJveC1zaGFkb3cgLjJzJyxcbiAgICAgIHZlcnRpY2FsQWxpZ246ICd0b3AnLFxuICAgICAgV2Via2l0QXBwZWFyYW5jZTogJ25vbmUnLFxuICAgICAgd2lkdGg6IHRoZW1lLnB4VG9SZW0oMjEpLFxuICAgICAgJyY6YWZ0ZXInOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICAgICBjb250ZW50OiAnXCIgXCInLFxuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgwLjUpJyxcbiAgICAgICAgaGVpZ2h0OiB0aGVtZS5weFRvUmVtKDE5KSxcbiAgICAgICAgd2lkdGg6IHRoZW1lLnB4VG9SZW0oMTkpLFxuICAgICAgfSxcbiAgICAgICcmOmNoZWNrZWQnOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnBhbGV0dGUucHJpbWFyeS5tYWluLFxuICAgICAgfSxcbiAgICAgICcmOmRpc2FibGVkJzoge1xuICAgICAgICBjdXJzb3I6ICdub3QtYWxsb3dlZCcsXG4gICAgICAgIG9wYWNpdHk6IDAuNjI1LFxuICAgICAgICAvLyBFbnN1cmUgdGhlIGxhYmVsIHNpYmxpbmcgY2Fubm90IGJlIGNsaWNrZWQgYXMgd2VsbFxuICAgICAgICAnJiArIGxhYmVsJzoge1xuICAgICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICAnJjpmb2N1cyc6IHtcbiAgICAgICAgYm94U2hhZG93OiAnMCAwIDAgMnB4IHJnYmEoMCwgMTUwLCAyMjUsIC4zKScsXG4gICAgICB9LFxuICAgICAgJyY6aG92ZXI6bm90KDpkaXNhYmxlZCk6bm90KDpjaGVja2VkKSc6IHtcbiAgICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5wcmltYXJ5WzcwMF19YCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBpbnB1dEludmVyc2U6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjMwLCAyMzEsIDIzNywgMC4xKScsXG4gICAgICAnJjpjaGVja2VkJzoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDIzMCwgMjMxLCAyMzcsIDAuMSknLFxuICAgICAgICBib3JkZXI6IGAxcHggc29saWQgcmdiYSgyMzAsIDIzMSwgMjM3LCAwLjU1KWAsXG4gICAgICB9LFxuICAgICAgJyY6Zm9jdXMnOiB7XG4gICAgICAgIGJveFNoYWRvdzogJzAgMCAwIDJweCByZ2JhKDI1NSwgMjU1LCAyNTUsIC4zKScsXG4gICAgICB9LFxuICAgICAgJyY6aG92ZXI6bm90KDpkaXNhYmxlZCk6bm90KDpjaGVja2VkKSc6IHtcbiAgICAgICAgYm9yZGVyOiBgMXB4IHNvbGlkICR7dGhlbWUucGFsZXR0ZS5jb21tb24ud2hpdGV9YCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsYWJlbENvbnRhaW5lcjoge1xuICAgICAgZmxleDogMSxcbiAgICAgIG1hcmdpbkxlZnQ6IHRoZW1lLnNwYWNpbmcoMSksXG4gICAgfSxcbiAgICBsYWJlbDoge1xuICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIG1hcmdpbkJvdHRvbTogMCxcbiAgICAgIG1hcmdpblRvcDogdGhlbWUuc3BhY2luZygwLjI1KSxcbiAgICAgIHZlcnRpY2FsQWxpZ246ICd0b3AnLFxuICAgICAgJyYgcCc6IHtcbiAgICAgICAgbGluZUhlaWdodDogMS4yNSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBsYWJlbEludmVyc2U6IHtcbiAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICB9LFxuICB9KSxcbiAgeyBuYW1lOiBSYWRpb1N0eWxlc0tleSB9XG4pO1xuXG5leHBvcnQgdHlwZSBSYWRpb0NsYXNzZXMgPSBHZXRDbGFzc2VzPHR5cGVvZiB1c2VTdHlsZXM+O1xuXG5leHBvcnQgaW50ZXJmYWNlIFJhZGlvUHJvcHMgZXh0ZW5kcyBCYXNlRm9ybUVsZW1lbnQge31cblxuZXhwb3J0IGNvbnN0IFJhZGlvID0gUmVhY3QuZm9yd2FyZFJlZjxIVE1MSW5wdXRFbGVtZW50LCBSYWRpb1Byb3BzPihcbiAgKFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgY2hlY2tlZCA9IGZhbHNlLFxuICAgICAgY29sb3IsXG4gICAgICBoZWxwTWVzc2FnZSxcbiAgICAgIGlkLFxuICAgICAgbGFiZWwsXG4gICAgICB2YWx1ZSxcbiAgICAgIC4uLnJvb3RQcm9wc1xuICAgIH0sXG4gICAgcmVmXG4gICkgPT4ge1xuICAgIGNvbnN0IGNsYXNzZXMgPSB1c2VTdHlsZXMoe30pO1xuXG4gICAgY29uc3QgW3VuaXF1ZUlkXSA9IFJlYWN0LnVzZVN0YXRlPHN0cmluZz4oXG4gICAgICAoKSA9PiBpZCB8fCBnZW5lcmF0ZVVuaXF1ZUlkKCdyYWRpby0nKVxuICAgICk7XG5cbiAgICBjb25zdCB7XG4gICAgICBjb2xvcjogY29sb3JGcm9tQ29udGV4dCxcbiAgICAgIG5hbWU6IG5hbWVGcm9tQ29udGV4dCxcbiAgICAgIHZhbHVlOiB2YWx1ZUZyb21Db250ZXh0LFxuICAgICAgb25DaGFuZ2U6IG9uQ2hhbmdlRnJvbUNvbnRleHQsXG4gICAgfSA9IHVzZVJhZGlvR3JvdXAoKTtcblxuICAgIGNvbnN0IGhhbmRsZUNoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgb25DaGFuZ2VGcm9tQ29udGV4dCAmJiBvbkNoYW5nZUZyb21Db250ZXh0KGUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Nsc3goY2xhc3Nlcy5yb290LCBjbGFzc05hbWUpfT5cbiAgICAgICAgPGlucHV0XG4gICAgICAgICAgYXJpYS1kZXNjcmliZWRieT17YnVpbGREZXNjcmliZWRCeSh7XG4gICAgICAgICAgICBoYXNIZWxwTWVzc2FnZTogISFoZWxwTWVzc2FnZSxcbiAgICAgICAgICAgIHVuaXF1ZUlkLFxuICAgICAgICAgIH0pfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChjbGFzc2VzLmlucHV0LCB7XG4gICAgICAgICAgICBbY2xhc3Nlcy5pbnB1dEludmVyc2VdOlxuICAgICAgICAgICAgICBjb2xvciA9PT0gJ2ludmVyc2UnIHx8IGNvbG9yRnJvbUNvbnRleHQgPT09ICdpbnZlcnNlJyxcbiAgICAgICAgICB9KX1cbiAgICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgICByb2xlPVwicmFkaW9cIlxuICAgICAgICAgIHR5cGU9XCJyYWRpb1wiXG4gICAgICAgICAgaWQ9e3VuaXF1ZUlkfVxuICAgICAgICAgIHRhYkluZGV4PXswfVxuICAgICAgICAgIG5hbWU9e25hbWVGcm9tQ29udGV4dH1cbiAgICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICBjaGVja2VkPXtcbiAgICAgICAgICAgIGNoZWNrZWQgfHwgdmFsdWVGcm9tQ29udGV4dFxuICAgICAgICAgICAgICA/IHZhbHVlRnJvbUNvbnRleHQgPT09IHZhbHVlIHx8IGNoZWNrZWRcbiAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgICAgey4uLnJvb3RQcm9wc31cbiAgICAgICAgLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMubGFiZWxDb250YWluZXJ9PlxuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9e2NsYXNzZXMubGFiZWx9IGh0bWxGb3I9e3VuaXF1ZUlkfT5cbiAgICAgICAgICAgIDxUZXh0XG4gICAgICAgICAgICAgIHNpemU9XCJzdWJib2R5XCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcbiAgICAgICAgICAgICAgICBjb2xvciA9PT0gJ2ludmVyc2UnIHx8IGNvbG9yRnJvbUNvbnRleHQgPT09ICdpbnZlcnNlJ1xuICAgICAgICAgICAgICAgICAgPyBjbGFzc2VzLmxhYmVsSW52ZXJzZVxuICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7bGFiZWx9XG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICB7aGVscE1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgPEZvcm1IZWxwTWVzc2FnZVxuICAgICAgICAgICAgICBjb2xvcj17Y29sb3IgfHwgY29sb3JGcm9tQ29udGV4dH1cbiAgICAgICAgICAgICAgcm9vdEVsZW1lbnRJZD17dW5pcXVlSWR9XG4gICAgICAgICAgICAgIGRlc2NyaWJlZEJ5SWQ9e2hlbHBGb3IodW5pcXVlSWQpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7aGVscE1lc3NhZ2V9XG4gICAgICAgICAgICA8L0Zvcm1IZWxwTWVzc2FnZT5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuKTtcbiJdfQ==