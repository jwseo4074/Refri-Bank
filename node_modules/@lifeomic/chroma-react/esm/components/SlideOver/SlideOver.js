var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
import { makeStyles } from '../../styles';
import { RemoveScroll } from 'react-remove-scroll';
import * as React from 'react';
import clsx from 'clsx';
export var SlideOverStylesKey = 'ChromaSlideOver';
export var useStyles = makeStyles(function (theme) { return ({
    '@keyframes fade-in': {
        '0%': {
            opacity: 0,
        },
        '100%': {
            opacity: 1,
        },
    },
    '@keyframes fade-out': {
        '0%': {
            opacity: 1,
        },
        '100%': {
            opacity: 0,
        },
    },
    '@keyframes slide-in': {
        '0%': {
            width: 0,
            maxWidth: 0,
        },
        '100%': {
            maxWidth: '100%',
            width: 'var(--slideover-width)',
        },
    },
    '@keyframes slide-out': {
        '0%': {
            maxWidth: '100%',
            width: 'var(--slideover-width)',
        },
        '100%': {
            width: 0,
            maxWidth: 0,
        },
    },
    root: {
        '--slideover-width': '28rem',
        backgroundColor: theme.palette.common.white,
        bottom: 0,
        display: 'flex',
        position: 'absolute',
        right: 0,
        top: 0,
        zIndex: 100,
        boxShadow: theme.boxShadows.elevatedContent,
        animation: '$slide-in 0.25s ease-in-out',
        transform: 'translate3d(0, 0, 0)',
        '@media (prefers-reduced-motion)': {
            animation: '$slide-in 0.1s ease-in-out',
        },
    },
    transitionClose: {
        animation: '$slide-out 0.2s ease-in-out',
        '@media (prefers-reduced-motion)': {
            animation: '$slide-out 0.1s ease-in-out',
        },
    },
    fadeInAnimation: {
        animation: '$fade-in 1s',
    },
    fadeOutAnimation: {
        animation: '$fade-out 0.15s',
    },
    inner: {
        maxWidth: 'var(--slideover-width)',
        position: 'relative',
        width: '100vw',
    },
    content: {
        backgroundColor: 'white',
        display: 'flex',
        flexDirection: 'column',
        height: '100%',
        overflowY: 'auto',
    },
}); }, { name: SlideOverStylesKey });
export var SlideOver = function (_a) {
    var additionalClasses = _a.classes, className = _a.className, children = _a.children, _b = _a.isOpen, isOpen = _b === void 0 ? false : _b, rootProps = __rest(_a, ["classes", "className", "children", "isOpen"]);
    var classes = useStyles({});
    // If the two below states get more complicated, may want to move to a
    // useReducer.
    // We use a local state open variable so we can ensure
    // that the keyframe animations finish before we remove the element
    // from the DOM
    var _c = React.useState(isOpen), localIsOpen = _c[0], setLocalIsOpen = _c[1];
    // This is another state variable we use to apply the "slide-out" keyframes
    // and then we leverage the `onAnimationEnd` to know when it's safe to
    // remove this element from the DOM
    var _d = React.useState(false), isTransitioningClosed = _d[0], setIsTransitioningClosed = _d[1];
    React.useEffect(function () {
        if (localIsOpen === false && isOpen === true) {
            setLocalIsOpen(true);
            setIsTransitioningClosed(false);
            return;
        }
        if (localIsOpen === true && isOpen == false) {
            setIsTransitioningClosed(true);
        }
    }, [isOpen, localIsOpen]);
    if (localIsOpen === false) {
        return null;
    }
    return (React.createElement(RemoveScroll, { forwardProps: true },
        React.createElement("section", __assign({ className: clsx(classes.root, additionalClasses === null || additionalClasses === void 0 ? void 0 : additionalClasses.root, isTransitioningClosed && classes.transitionClose, className), onAnimationEnd: function () {
                if (localIsOpen && isTransitioningClosed) {
                    setLocalIsOpen(false);
                }
            } }, rootProps),
            React.createElement("div", { className: clsx(classes.inner, additionalClasses === null || additionalClasses === void 0 ? void 0 : additionalClasses.inner) },
                React.createElement("div", { className: clsx(classes.content, classes.fadeInAnimation, isTransitioningClosed && classes.fadeOutAnimation, additionalClasses === null || additionalClasses === void 0 ? void 0 : additionalClasses.content) }, children)))));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2xpZGVPdmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvU2xpZGVPdmVyL1NsaWRlT3Zlci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDMUMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ25ELE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQy9CLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUV4QixNQUFNLENBQUMsSUFBTSxrQkFBa0IsR0FBRyxpQkFBaUIsQ0FBQztBQUVwRCxNQUFNLENBQUMsSUFBTSxTQUFTLEdBQUcsVUFBVSxDQUNqQyxVQUFDLEtBQUssSUFBSyxPQUFBLENBQUM7SUFDVixvQkFBb0IsRUFBRTtRQUNwQixJQUFJLEVBQUU7WUFDSixPQUFPLEVBQUUsQ0FBQztTQUNYO1FBQ0QsTUFBTSxFQUFFO1lBQ04sT0FBTyxFQUFFLENBQUM7U0FDWDtLQUNGO0lBQ0QscUJBQXFCLEVBQUU7UUFDckIsSUFBSSxFQUFFO1lBQ0osT0FBTyxFQUFFLENBQUM7U0FDWDtRQUNELE1BQU0sRUFBRTtZQUNOLE9BQU8sRUFBRSxDQUFDO1NBQ1g7S0FDRjtJQUNELHFCQUFxQixFQUFFO1FBQ3JCLElBQUksRUFBRTtZQUNKLEtBQUssRUFBRSxDQUFDO1lBQ1IsUUFBUSxFQUFFLENBQUM7U0FDWjtRQUNELE1BQU0sRUFBRTtZQUNOLFFBQVEsRUFBRSxNQUFNO1lBQ2hCLEtBQUssRUFBRSx3QkFBd0I7U0FDaEM7S0FDRjtJQUNELHNCQUFzQixFQUFFO1FBQ3RCLElBQUksRUFBRTtZQUNKLFFBQVEsRUFBRSxNQUFNO1lBQ2hCLEtBQUssRUFBRSx3QkFBd0I7U0FDaEM7UUFDRCxNQUFNLEVBQUU7WUFDTixLQUFLLEVBQUUsQ0FBQztZQUNSLFFB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QUFDLGVBQWUsRUFDaEQsU0FBUyxDQUNWLEVBQ0QsY0FBYyxFQUFFO2dCQUNkLElBQUksV0FBVyxJQUFJLHFCQUFxQixFQUFFO29CQUN4QyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7aUJBQ3ZCO1lBQ0gsQ0FBQyxJQUNHLFNBQVM7WUFFYiw2QkFBSyxTQUFTLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsaUJBQWlCLGFBQWpCLGlCQUFpQix1QkFBakIsaUJBQWlCLENBQUUsS0FBSyxDQUFDO2dCQUMzRCw2QkFDRSxTQUFTLEVBQUUsSUFBSSxDQUNiLE9BQU8sQ0FBQyxPQUFPLEVBQ2YsT0FBTyxDQUFDLGVBQWUsRUFDdkIscUJBQXFCLElBQUksT0FBTyxDQUFDLGdCQUFnQixFQUNqRCxpQkFBaUIsYUFBakIsaUJBQWlCLHVCQUFqQixpQkFBaUIsQ0FBRSxPQUFPLENBQzNCLElBRUEsUUFBUSxDQUNMLENBQ0YsQ0FDRSxDQUNHLENBQ2hCLENBQUM7QUFDSixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHZXRDbGFzc2VzIH0gZnJvbSAnLi4vLi4vdHlwZVV0aWxzJztcbmltcG9ydCB7IG1ha2VTdHlsZXMgfSBmcm9tICcuLi8uLi9zdHlsZXMnO1xuaW1wb3J0IHsgUmVtb3ZlU2Nyb2xsIH0gZnJvbSAncmVhY3QtcmVtb3ZlLXNjcm9sbCc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xzeCBmcm9tICdjbHN4JztcblxuZXhwb3J0IGNvbnN0IFNsaWRlT3ZlclN0eWxlc0tleSA9ICdDaHJvbWFTbGlkZU92ZXInO1xuXG5leHBvcnQgY29uc3QgdXNlU3R5bGVzID0gbWFrZVN0eWxlcyhcbiAgKHRoZW1lKSA9PiAoe1xuICAgICdAa2V5ZnJhbWVzIGZhZGUtaW4nOiB7XG4gICAgICAnMCUnOiB7XG4gICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICB9LFxuICAgICAgJzEwMCUnOiB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICB9LFxuICAgIH0sXG4gICAgJ0BrZXlmcmFtZXMgZmFkZS1vdXQnOiB7XG4gICAgICAnMCUnOiB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICB9LFxuICAgICAgJzEwMCUnOiB7XG4gICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICB9LFxuICAgIH0sXG4gICAgJ0BrZXlmcmFtZXMgc2xpZGUtaW4nOiB7XG4gICAgICAnMCUnOiB7XG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBtYXhXaWR0aDogMCxcbiAgICAgIH0sXG4gICAgICAnMTAwJSc6IHtcbiAgICAgICAgbWF4V2lkdGg6ICcxMDAlJyxcbiAgICAgICAgd2lkdGg6ICd2YXIoLS1zbGlkZW92ZXItd2lkdGgpJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAnQGtleWZyYW1lcyBzbGlkZS1vdXQnOiB7XG4gICAgICAnMCUnOiB7XG4gICAgICAgIG1heFdpZHRoOiAnMTAwJScsXG4gICAgICAgIHdpZHRoOiAndmFyKC0tc2xpZGVvdmVyLXdpZHRoKScsXG4gICAgICB9LFxuICAgICAgJzEwMCUnOiB7XG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBtYXhXaWR0aDogMCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICByb290OiB7XG4gICAgICAnLS1zbGlkZW92ZXItd2lkdGgnOiAnMjhyZW0nLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5wYWxldHRlLmNvbW1vbi53aGl0ZSxcbiAgICAgIGJvdHRvbTogMCxcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgcmlnaHQ6IDAsXG4gICAgICB0b3A6IDAsXG4gICAgICB6SW5kZXg6IDEwMCxcbiAgICAgIGJveFNoYWRvdzogdGhlbWUuYm94U2hhZG93cy5lbGV2YXRlZENvbnRlbnQsXG4gICAgICBhbmltYXRpb246ICckc2xpZGUtaW4gMC4yNXMgZWFzZS1pbi1vdXQnLFxuICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwgMCwgMCknLFxuICAgICAgJ0BtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbiknOiB7XG4gICAgICAgIGFuaW1hdGlvbjogJyRzbGlkZS1pbiAwLjFzIGVhc2UtaW4tb3V0JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB0cmFuc2l0aW9uQ2xvc2U6IHtcbiAgICAgIGFuaW1hdGlvbjogJyRzbGlkZS1vdXQgMC4ycyBlYXNlLWluLW91dCcsXG4gICAgICAnQG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uKSc6IHtcbiAgICAgICAgYW5pbWF0aW9uOiAnJHNsaWRlLW91dCAwLjFzIGVhc2UtaW4tb3V0JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBmYWRlSW5BbmltYXRpb246IHtcbiAgICAgIGFuaW1hdGlvbjogJyRmYWRlLWluIDFzJyxcbiAgICB9LFxuICAgIGZhZGVPdXRBbmltYXRpb246IHtcbiAgICAgIGFuaW1hdGlvbjogJyRmYWRlLW91dCAwLjE1cycsXG4gICAgfSxcbiAgICBpbm5lcjoge1xuICAgICAgbWF4V2lkdGg6ICd2YXIoLS1zbGlkZW92ZXItd2lkdGgpJyxcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgd2lkdGg6ICcxMDB2dycsXG4gICAgfSxcbiAgICBjb250ZW50OiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcbiAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgfSxcbiAgfSksXG4gIHsgbmFtZTogU2xpZGVPdmVyU3R5bGVzS2V5IH1cbik7XG5cbmV4cG9ydCB0eXBlIFNsaWRlT3ZlckNsYXNzZXMgPSBHZXRDbGFzc2VzPHR5cGVvZiB1c2VTdHlsZXM+O1xuXG5leHBvcnQgaW50ZXJmYWNlIFNsaWRlT3ZlclByb3BzIHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBjbGFzc2VzPzoge1xuICAgIHJvb3Q/OiBzdHJpbmc7XG4gICAgaW5uZXI/OiBzdHJpbmc7XG4gICAgY29udGVudD86IHN0cmluZztcbiAgfTtcbiAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGU7XG4gIGlzT3Blbj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBTbGlkZU92ZXI6IFJlYWN0LkZDPFNsaWRlT3ZlclByb3BzPiA9ICh7XG4gIGNsYXNzZXM6IGFkZGl0aW9uYWxDbGFzc2VzLFxuICBjbGFzc05hbWUsXG4gIGNoaWxkcmVuLFxuICBpc09wZW4gPSBmYWxzZSxcbiAgLi4ucm9vdFByb3BzXG59KSA9PiB7XG4gIGNvbnN0IGNsYXNzZXMgPSB1c2VTdHlsZXMoe30pO1xuXG4gIC8vIElmIHRoZSB0d28gYmVsb3cgc3RhdGVzIGdldCBtb3JlIGNvbXBsaWNhdGVkLCBtYXkgd2FudCB0byBtb3ZlIHRvIGFcbiAgLy8gdXNlUmVkdWNlci5cblxuICAvLyBXZSB1c2UgYSBsb2NhbCBzdGF0ZSBvcGVuIHZhcmlhYmxlIHNvIHdlIGNhbiBlbnN1cmVcbiAgLy8gdGhhdCB0aGUga2V5ZnJhbWUgYW5pbWF0aW9ucyBmaW5pc2ggYmVmb3JlIHdlIHJlbW92ZSB0aGUgZWxlbWVudFxuICAvLyBmcm9tIHRoZSBET01cbiAgY29uc3QgW2xvY2FsSXNPcGVuLCBzZXRMb2NhbElzT3Blbl0gPSBSZWFjdC51c2VTdGF0ZTxib29sZWFuPihpc09wZW4pO1xuXG4gIC8vIFRoaXMgaXMgYW5vdGhlciBzdGF0ZSB2YXJpYWJsZSB3ZSB1c2UgdG8gYXBwbHkgdGhlIFwic2xpZGUtb3V0XCIga2V5ZnJhbWVzXG4gIC8vIGFuZCB0aGVuIHdlIGxldmVyYWdlIHRoZSBgb25BbmltYXRpb25FbmRgIHRvIGtub3cgd2hlbiBpdCdzIHNhZmUgdG9cbiAgLy8gcmVtb3ZlIHRoaXMgZWxlbWVudCBmcm9tIHRoZSBET01cbiAgY29uc3QgW2lzVHJhbnNpdGlvbmluZ0Nsb3NlZCwgc2V0SXNUcmFuc2l0aW9uaW5nQ2xvc2VkXSA9IFJlYWN0LnVzZVN0YXRlPFxuICAgIGJvb2xlYW5cbiAgPihmYWxzZSk7XG5cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobG9jYWxJc09wZW4gPT09IGZhbHNlICYmIGlzT3BlbiA9PT0gdHJ1ZSkge1xuICAgICAgc2V0TG9jYWxJc09wZW4odHJ1ZSk7XG4gICAgICBzZXRJc1RyYW5zaXRpb25pbmdDbG9zZWQoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChsb2NhbElzT3BlbiA9PT0gdHJ1ZSAmJiBpc09wZW4gPT0gZmFsc2UpIHtcbiAgICAgIHNldElzVHJhbnNpdGlvbmluZ0Nsb3NlZCh0cnVlKTtcbiAgICB9XG4gIH0sIFtpc09wZW4sIGxvY2FsSXNPcGVuXSk7XG5cbiAgaWYgKGxvY2FsSXNPcGVuID09PSBmYWxzZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8UmVtb3ZlU2Nyb2xsIGZvcndhcmRQcm9wcz5cbiAgICAgIDxzZWN0aW9uXG4gICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICBjbGFzc2VzLnJvb3QsXG4gICAgICAgICAgYWRkaXRpb25hbENsYXNzZXM/LnJvb3QsXG4gICAgICAgICAgaXNUcmFuc2l0aW9uaW5nQ2xvc2VkICYmIGNsYXNzZXMudHJhbnNpdGlvbkNsb3NlLFxuICAgICAgICAgIGNsYXNzTmFtZVxuICAgICAgICApfVxuICAgICAgICBvbkFuaW1hdGlvbkVuZD17KCkgPT4ge1xuICAgICAgICAgIGlmIChsb2NhbElzT3BlbiAmJiBpc1RyYW5zaXRpb25pbmdDbG9zZWQpIHtcbiAgICAgICAgICAgIHNldExvY2FsSXNPcGVuKGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH19XG4gICAgICAgIHsuLi5yb290UHJvcHN9XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbHN4KGNsYXNzZXMuaW5uZXIsIGFkZGl0aW9uYWxDbGFzc2VzPy5pbm5lcil9PlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xzeChcbiAgICAgICAgICAgICAgY2xhc3Nlcy5jb250ZW50LFxuICAgICAgICAgICAgICBjbGFzc2VzLmZhZGVJbkFuaW1hdGlvbixcbiAgICAgICAgICAgICAgaXNUcmFuc2l0aW9uaW5nQ2xvc2VkICYmIGNsYXNzZXMuZmFkZU91dEFuaW1hdGlvbixcbiAgICAgICAgICAgICAgYWRkaXRpb25hbENsYXNzZXM/LmNvbnRlbnRcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvc2VjdGlvbj5cbiAgICA8L1JlbW92ZVNjcm9sbD5cbiAgKTtcbn07XG4iXX0=