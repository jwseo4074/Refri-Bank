var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
import { makeStyles } from '../../styles';
import { RemoveScroll } from 'react-remove-scroll';
import * as React from 'react';
import clsx from 'clsx';
export var SlideOverStylesKey = 'ChromaSlideOver';
export var useStyles = makeStyles(function (theme) { return ({
    '@keyframes fade-in': {
        '0%': {
            opacity: 0,
        },
        '100%': {
            opacity: 1,
        },
    },
    '@keyframes fade-out': {
        '0%': {
            opacity: 1,
        },
        '100%': {
            opacity: 0,
        },
    },
    '@keyframes slide-in': {
        '0%': {
            width: 0,
            maxWidth: 0,
        },
        '100%': {
            maxWidth: '100%',
            width: 'var(--slideover-width)',
        },
    },
    '@keyframes slide-out': {
        '0%': {
            maxWidth: '100%',
            width: 'var(--slideover-width)',
        },
        '100%': {
            width: 0,
            maxWidth: 0,
        },
    },
    root: {
        '--slideover-width': '28rem',
        backgroundColor: theme.palette.common.white,
        bottom: 0,
        display: 'flex',
        position: 'absolute',
        right: 0,
        top: 0,
        zIndex: 100,
        boxShadow: theme.boxShadows.elevatedContent,
        animation: '$slide-in 0.25s ease-in-out',
        transform: 'translate3d(0, 0, 0)',
        '@media (prefers-reduced-motion)': {
            animation: '$slide-in 0.1s ease-in-out',
        },
    },
    transitionClose: {
        animation: '$slide-out 0.2s ease-in-out',
        '@media (prefers-reduced-motion)': {
            animation: '$slide-out 0.1s ease-in-out',
        },
    },
    fadeInAnimation: {
        animation: '$fade-in 1s',
    },
    fadeOutAnimation: {
        animation: '$fade-out 0.15s',
    },
    inner: {
        maxWidth: 'var(--slideover-width)',
        position: 'relative',
        width: '100vw',
    },
    content: {
        backgroundColor: 'white',
        display: 'flex',
        flexDirection: 'column',
        height: '100%',
        overflowY: 'auto',
    },
}); }, { name: SlideOverStylesKey });
export var SlideOver = function (_a) {
    var additionalClasses = _a.classes, className = _a.className, children = _a.children, _b = _a.isOpen, isOpen = _b === void 0 ? false : _b, rootProps = __rest(_a, ["classes", "className", "children", "isOpen"]);
    var classes = useStyles({});
    // If the two below states get more complicated, may want to move to a
    // useReducer.
    // We use a local state open variable so we can ensure
    // that the keyframe animations finish before we remove the element
    // from the DOM
    var _c = React.useState(isOpen), localIsOpen = _c[0], setLocalIsOpen = _c[1];
    // This is another state variable we use to apply the "slide-out" keyframes
    // and then we leverage the `onAnimationEnd` to know when it's safe to
    // remove this element from the DOM
    var _d = React.useState(false), isTransitioningClosed = _d[0], setIsTransitioningClosed = _d[1];
    React.useEffect(function () {
        if (localIsOpen === false && isOpen === true) {
            setLocalIsOpen(true);
            setIsTransitioningClosed(false);
            return;
        }
        if (localIsOpen === true && isOpen == false) {
            setIsTransitioningClosed(true);
        }
    }, [isOpen, localIsOpen]);
    if (localIsOpen === false) {
        return null;
    }
    return (React.createElement(RemoveScroll, { forwardProps: true },
        React.createElement("section", __assign({ className: clsx(classes.root, additionalClasses === null || additionalClasses === void 0 ? void 0 : additionalClasses.root, isTransitioningClosed && classes.transitionClose, className), onAnimationEnd: function () {
                if (localIsOpen && isTransitioningClosed) {
                    setLocalIsOpen(false);
                }
            } }, rootProps),
            React.createElement("div", { className: clsx(classes.inner, additionalClasses === null || additionalClasses === void 0 ? void 0 : additionalClasses.inner) },
                React.createElement("div", { className: clsx(classes.content, classes.fadeInAnimation, isTransitioningClosed && classes.fadeOutAnimation, additionalClasses === null || additionalClasses === void 0 ? void 0 : additionalClasses.content) }, children)))));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2xpZGVPdmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvU2xpZGVPdmVyL1NsaWRlT3Zlci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDMUMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ25ELE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQy9CLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQztBQUV4QixNQUFNLENBQUMsSUFBTSxrQkFBa0IsR0FBRyxpQkFBaUIsQ0FBQztBQUVwRCxNQUFNLENBQUMsSUFBTSxTQUFTLEdBQUcsVUFBVSxDQUNqQyxVQUFDLEtBQUssSUFBSyxPQUFBLENBQUM7SUFDVixvQkFBb0IsRUFBRTtRQUNwQixJQUFJLEVBQUU7WUFDSixPQUFPLEVBQUUsQ0FBQztTQUNYO1FBQ0QsTUFBTSxFQUFFO1lBQ04sT0FBTyxFQUFFLENBQUM7U0FDWDtLQUNGO0lBQ0QscUJBQXFCLEVBQUU7UUFDckIsSUFBSSxFQUFFO1lBQ0osT0FBTyxFQUFFLENBQUM7U0FDWDtRQUNELE1BQU0sRUFBRTtZQUNOLE9BQU8sRUFBRSxDQUFDO1NBQ1g7S0FDRjtJQUNELHFCQUFxQixFQUFFO1FBQ3JCLElBQUksRUFBRTtZQUNKLEtBQUssRUFBRSxDQUFDO1lBQ1IsUUFBUSxFQUFFLENBQUM7U0FDWjtRQUNELE1BQU0sRUFBRTtZQUNOLFFBQVEsRUFBRSxNQUFNO1lBQ2hCLEtBQUssRUFBRSx3QkFBd0I7U0FDaEM7S0FDRjtJQUNELHNCQUFzQixFQUFFO1FBQ3RCLElBQUksRUFBRTtZQUNKLFFBQVEsRUFBRSxNQUFNO1lBQ2hCLEtBQUssRUFBRSx3QkFBd0I7U0FDaEM7UUFDRCxNQUFNLEVBQUU7WUFDTixLQUFLLEVBQUUsQ0FBQztZQUNSLFFB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Q0csU0FBUztZQUViLDZCQUFLLFNBQVMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxpQkFBaUIsYUFBakIsaUJBQWlCLHVCQUFqQixpQkFBaUIsQ0FBRSxLQUFLLENBQUM7Z0JBQzNELDZCQUNFLFNBQVMsRUFBRSxJQUFJLENBQ2IsT0FBTyxDQUFDLE9BQU8sRUFDZixPQUFPLENBQUMsZUFBZSxFQUN2QixxQkFBcUIsSUFBSSxPQUFPLENBQUMsZ0JBQWdCLEVBQ2pELGlCQUFpQixhQUFqQixpQkFBaUIsdUJBQWpCLGlCQUFpQixDQUFFLE9BQU8sQ0FDM0IsSUFFQSxRQUFRLENBQ0wsQ0FDRixDQUNFLENBQ0csQ0FDaEIsQ0FBQztBQUNKLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdldENsYXNzZXMgfSBmcm9tICcuLi8uLi90eXBlVXRpbHMnO1xuaW1wb3J0IHsgbWFrZVN0eWxlcyB9IGZyb20gJy4uLy4uL3N0eWxlcyc7XG5pbXBvcnQgeyBSZW1vdmVTY3JvbGwgfSBmcm9tICdyZWFjdC1yZW1vdmUtc2Nyb2xsJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbHN4IGZyb20gJ2Nsc3gnO1xuXG5leHBvcnQgY29uc3QgU2xpZGVPdmVyU3R5bGVzS2V5ID0gJ0Nocm9tYVNsaWRlT3Zlcic7XG5cbmV4cG9ydCBjb25zdCB1c2VTdHlsZXMgPSBtYWtlU3R5bGVzKFxuICAodGhlbWUpID0+ICh7XG4gICAgJ0BrZXlmcmFtZXMgZmFkZS1pbic6IHtcbiAgICAgICcwJSc6IHtcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgIH0sXG4gICAgICAnMTAwJSc6IHtcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAnQGtleWZyYW1lcyBmYWRlLW91dCc6IHtcbiAgICAgICcwJSc6IHtcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgIH0sXG4gICAgICAnMTAwJSc6IHtcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAnQGtleWZyYW1lcyBzbGlkZS1pbic6IHtcbiAgICAgICcwJSc6IHtcbiAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgIG1heFdpZHRoOiAwLFxuICAgICAgfSxcbiAgICAgICcxMDAlJzoge1xuICAgICAgICBtYXhXaWR0aDogJzEwMCUnLFxuICAgICAgICB3aWR0aDogJ3ZhcigtLXNsaWRlb3Zlci13aWR0aCknLFxuICAgICAgfSxcbiAgICB9LFxuICAgICdAa2V5ZnJhbWVzIHNsaWRlLW91dCc6IHtcbiAgICAgICcwJSc6IHtcbiAgICAgICAgbWF4V2lkdGg6ICcxMDAlJyxcbiAgICAgICAgd2lkdGg6ICd2YXIoLS1zbGlkZW92ZXItd2lkdGgpJyxcbiAgICAgIH0sXG4gICAgICAnMTAwJSc6IHtcbiAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgIG1heFdpZHRoOiAwLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHJvb3Q6IHtcbiAgICAgICctLXNsaWRlb3Zlci13aWR0aCc6ICcyOHJlbScsXG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLnBhbGV0dGUuY29tbW9uLndoaXRlLFxuICAgICAgYm90dG9tOiAwLFxuICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICByaWdodDogMCxcbiAgICAgIHRvcDogMCxcbiAgICAgIHpJbmRleDogMTAwLFxuICAgICAgYm94U2hhZG93OiB0aGVtZS5ib3hTaGFkb3dzLmVsZXZhdGVkQ29udGVudCxcbiAgICAgIGFuaW1hdGlvbjogJyRzbGlkZS1pbiAwLjI1cyBlYXNlLWluLW91dCcsXG4gICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgwLCAwLCAwKScsXG4gICAgICAnQG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uKSc6IHtcbiAgICAgICAgYW5pbWF0aW9uOiAnJHNsaWRlLWluIDAuMXMgZWFzZS1pbi1vdXQnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHRyYW5zaXRpb25DbG9zZToge1xuICAgICAgYW5pbWF0aW9uOiAnJHNsaWRlLW91dCAwLjJzIGVhc2UtaW4tb3V0JyxcbiAgICAgICdAbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb24pJzoge1xuICAgICAgICBhbmltYXRpb246ICckc2xpZGUtb3V0IDAuMXMgZWFzZS1pbi1vdXQnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGZhZGVJbkFuaW1hdGlvbjoge1xuICAgICAgYW5pbWF0aW9uOiAnJGZhZGUtaW4gMXMnLFxuICAgIH0sXG4gICAgZmFkZU91dEFuaW1hdGlvbjoge1xuICAgICAgYW5pbWF0aW9uOiAnJGZhZGUtb3V0IDAuMTVzJyxcbiAgICB9LFxuICAgIGlubmVyOiB7XG4gICAgICBtYXhXaWR0aDogJ3ZhcigtLXNsaWRlb3Zlci13aWR0aCknLFxuICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB3aWR0aDogJzEwMHZ3JyxcbiAgICB9LFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJyxcbiAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICB9LFxuICB9KSxcbiAgeyBuYW1lOiBTbGlkZU92ZXJTdHlsZXNLZXkgfVxuKTtcblxuZXhwb3J0IHR5cGUgU2xpZGVPdmVyQ2xhc3NlcyA9IEdldENsYXNzZXM8dHlwZW9mIHVzZVN0eWxlcz47XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2xpZGVPdmVyUHJvcHMge1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIGNsYXNzZXM/OiB7XG4gICAgcm9vdD86IHN0cmluZztcbiAgICBpbm5lcj86IHN0cmluZztcbiAgICBjb250ZW50Pzogc3RyaW5nO1xuICB9O1xuICBpc09wZW4/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgU2xpZGVPdmVyOiBSZWFjdC5GQzxTbGlkZU92ZXJQcm9wcz4gPSAoe1xuICBjbGFzc2VzOiBhZGRpdGlvbmFsQ2xhc3NlcyxcbiAgY2xhc3NOYW1lLFxuICBjaGlsZHJlbixcbiAgaXNPcGVuID0gZmFsc2UsXG4gIC4uLnJvb3RQcm9wc1xufSkgPT4ge1xuICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKHt9KTtcblxuICAvLyBJZiB0aGUgdHdvIGJlbG93IHN0YXRlcyBnZXQgbW9yZSBjb21wbGljYXRlZCwgbWF5IHdhbnQgdG8gbW92ZSB0byBhXG4gIC8vIHVzZVJlZHVjZXIuXG5cbiAgLy8gV2UgdXNlIGEgbG9jYWwgc3RhdGUgb3BlbiB2YXJpYWJsZSBzbyB3ZSBjYW4gZW5zdXJlXG4gIC8vIHRoYXQgdGhlIGtleWZyYW1lIGFuaW1hdGlvbnMgZmluaXNoIGJlZm9yZSB3ZSByZW1vdmUgdGhlIGVsZW1lbnRcbiAgLy8gZnJvbSB0aGUgRE9NXG4gIGNvbnN0IFtsb2NhbElzT3Blbiwgc2V0TG9jYWxJc09wZW5dID0gUmVhY3QudXNlU3RhdGU8Ym9vbGVhbj4oaXNPcGVuKTtcblxuICAvLyBUaGlzIGlzIGFub3RoZXIgc3RhdGUgdmFyaWFibGUgd2UgdXNlIHRvIGFwcGx5IHRoZSBcInNsaWRlLW91dFwiIGtleWZyYW1lc1xuICAvLyBhbmQgdGhlbiB3ZSBsZXZlcmFnZSB0aGUgYG9uQW5pbWF0aW9uRW5kYCB0byBrbm93IHdoZW4gaXQncyBzYWZlIHRvXG4gIC8vIHJlbW92ZSB0aGlzIGVsZW1lbnQgZnJvbSB0aGUgRE9NXG4gIGNvbnN0IFtpc1RyYW5zaXRpb25pbmdDbG9zZWQsIHNldElzVHJhbnNpdGlvbmluZ0Nsb3NlZF0gPSBSZWFjdC51c2VTdGF0ZTxcbiAgICBib29sZWFuXG4gID4oZmFsc2UpO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGxvY2FsSXNPcGVuID09PSBmYWxzZSAmJiBpc09wZW4gPT09IHRydWUpIHtcbiAgICAgIHNldExvY2FsSXNPcGVuKHRydWUpO1xuICAgICAgc2V0SXNUcmFuc2l0aW9uaW5nQ2xvc2VkKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobG9jYWxJc09wZW4gPT09IHRydWUgJiYgaXNPcGVuID09IGZhbHNlKSB7XG4gICAgICBzZXRJc1RyYW5zaXRpb25pbmdDbG9zZWQodHJ1ZSk7XG4gICAgfVxuICB9LCBbaXNPcGVuLCBsb2NhbElzT3Blbl0pO1xuXG4gIGlmIChsb2NhbElzT3BlbiA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPFJlbW92ZVNjcm9sbCBmb3J3YXJkUHJvcHM+XG4gICAgICA8c2VjdGlvblxuICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgY2xhc3Nlcy5yb290LFxuICAgICAgICAgIGFkZGl0aW9uYWxDbGFzc2VzPy5yb290LFxuICAgICAgICAgIGlzVHJhbnNpdGlvbmluZ0Nsb3NlZCAmJiBjbGFzc2VzLnRyYW5zaXRpb25DbG9zZSxcbiAgICAgICAgICBjbGFzc05hbWVcbiAgICAgICAgKX1cbiAgICAgICAgb25BbmltYXRpb25FbmQ9eygpID0+IHtcbiAgICAgICAgICBpZiAobG9jYWxJc09wZW4gJiYgaXNUcmFuc2l0aW9uaW5nQ2xvc2VkKSB7XG4gICAgICAgICAgICBzZXRMb2NhbElzT3BlbihmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9fVxuICAgICAgICB7Li4ucm9vdFByb3BzfVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xzeChjbGFzc2VzLmlubmVyLCBhZGRpdGlvbmFsQ2xhc3Nlcz8uaW5uZXIpfT5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9e2Nsc3goXG4gICAgICAgICAgICAgIGNsYXNzZXMuY29udGVudCxcbiAgICAgICAgICAgICAgY2xhc3Nlcy5mYWRlSW5BbmltYXRpb24sXG4gICAgICAgICAgICAgIGlzVHJhbnNpdGlvbmluZ0Nsb3NlZCAmJiBjbGFzc2VzLmZhZGVPdXRBbmltYXRpb24sXG4gICAgICAgICAgICAgIGFkZGl0aW9uYWxDbGFzc2VzPy5jb250ZW50XG4gICAgICAgICAgICApfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3NlY3Rpb24+XG4gICAgPC9SZW1vdmVTY3JvbGw+XG4gICk7XG59O1xuIl19